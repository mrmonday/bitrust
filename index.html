<!DOCTYPE html><html><head>
<title>BitRust - Breaking Changes in rust-lang/rust</title>
</head><body><pre>
commit 7f53b943f94b338e4c5401f1ce9efbe7da92b0c5
Merge: 81e2396 dedac5e
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Mar 19 19:15:22 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Mar 19 19:15:22 2015 +0000

    Auto merge of #23430 - alexcrichton:io-error, r=aturon
    
    This commit stabilizes the `ErrorKind` enumeration which is consumed by and
    generated by the `io::Error` type. The purpose of this type is to serve as a
    cross-platform namespace to categorize errors into. Two specific issues are
    addressed as part of this stablization:
    
    * The naming of each variant was scrutinized and some were tweaked. An example
      is how `FileNotFound` was renamed to simply `NotFound`. These names should not
      show either a Unix or Windows bias and the set of names is intended to grow
      over time. For now the names will likely largely consist of those errors
      generated by the I/O APIs in the standard library.
    
    * The mapping of OS error codes onto kinds has been altered. Coalescing no
      longer occurs (multiple error codes become one kind). It is intended that each
      OS error code, if bound, corresponds to only one `ErrorKind`. The current set
      of error kinds was expanded slightly to include some networking errors.
    
    This commit also adds a `raw_os_error` function which returns an `Option&lt;i32&gt;`
    to extract the underlying raw error code from the `Error`.
    
    Closes #16666
    
    [breaking-change]

commit a32bb1bcc4c6b8806b1058c2f654415341240233
Merge: c7392be c225824
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Thu Mar 19 06:08:56 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Thu Mar 19 08:49:34 2015 +0530

    Rollup merge of #23475 - nikomatsakis:closure-ret-syntax, r=acrichto
    
     Require braces when a closure has an explicit return type. This is a [breaking-change]: instead of a closure like `|| -&gt; i32 22`, prefer `|| -&gt; i32 { 22 }`.
    
    Fixes #23420.

commit c225824bded695c8bced713f5a4c62fe327277bc
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Wed Mar 18 09:22:38 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Wed Mar 18 20:07:27 2015 -0400

    Require braces when a closure has an explicit return type. This is a
    [breaking-change]: instead of a closure like `|| -&gt; i32 22`, prefer `||
    -&gt; i32 { 22 }`.
    
    Fixes #23420.

commit 46f649c479ce40f3b4590590dda6c2895e8d60f6
Merge: f9a7bc5 dccd17d
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Mar 18 08:27:22 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Mar 18 08:27:22 2015 +0000

    Auto merge of #22838 - petrochenkov:bytelit, r=alexcrichton
    
    This patch changes the type of byte string literals from `&amp;[u8]` to `&amp;[u8; N]`.
    It also implements some necessary traits (`IntoBytes`, `Seek`, `Read`, `BufRead`) for fixed-size arrays (also related to #21725) and adds test for #17233, which seems to be resolved.
    
    Fixes #18465
    [breaking-change]

commit c10918905fda1344e78bc16e6e73294d096ee97d
Merge: 1ae32de 0947f40
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Mar 18 03:22:12 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Mar 18 03:22:12 2015 +0000

    Auto merge of #23452 - nikomatsakis:unsafety-subtyping, r=nrc
    
    Safe fns are no longer subtypes of unsafe fns, but you can coerce from one to the other.
    
    This is a [breaking-change] in that impl fns must now be declared `unsafe` if the trait is declared `unsafe`. In some rare cases, the subtyping change may also direct affect you, but no such cases were encountered in practice.
    
    Fixes #23449.
    
    r? @nrc

commit ea8b82e90c450febb1f26a07862a1ec89c22addd
Merge: bfac337 e256b7f
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 21:23:02 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 21:23:02 2015 +0000

    Auto merge of #23376 - eddyb:die-tydesc-die, r=nikomatsakis
    
    Final remnant of reflection is gone. Also, virtual `Trait` destructors are no longer tied to `Box`.
    That means they can be used to drop any instance of the type (used in libarena to replace TyDesc).
    
    This is [breaking-change] for direct users of intrinsics:
    * use `intrinsics::type_name::&lt;T&gt;()` instead of `(*intrinsics::get_tydesc::&lt;T&gt;()).name`
    * the only way to get the destructor is from a trait object's vtable (see libarena changes)
    
    r? @pcwalton f? @dotdash

commit c64d671671aea2e44ee7fc6eb00ee75fc30ed7b9
Merge: 31ba212 277b4f0
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 13:29:48 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 13:29:48 2015 +0000

    Auto merge of #23423 - nikomatsakis:issue-18737-trait-subtyping, r=nrc
    
    This upcast coercion currently never requires vtable changes. It should be generalized.
    
    This is a [breaking-change] -- if you have an impl on an object type like `impl SomeTrait`, then this will no longer be applicable to object types like `SomeTrait+Send`. In the standard library, this primarily affected `Any`, and this PR adds impls for `Any+Send` as to keep the API the same in practice. An alternate workaround is to use UFCS form or standalone fns. For more details, see &lt;https://github.com/rust-lang/rust/issues/18737#issuecomment-78450798&gt;.
    
    r? @nrc

commit c2671b59ccbc899b8defbabf453e88f89900c3a0
Merge: a4b57be cbd37d8
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 17 15:19:57 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 17 15:19:57 2015 +0530

    Rollup merge of #23409 - GBGamer:patch-2, r=alexcrichton
    
     To the correct MAP_NORESERVE. Every other instance is known as MAP_NORESERVE, so this is just a basic typo.
    
    I really doubt this will break anybody's but my own code.
    
    [breaking-change]

commit e46610966f798a083350724461648c6ffdd151f4
Merge: a257288 b65ebc4
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 03:23:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 03:23:50 2015 +0000

    Auto merge of #23104 - japaric:inherent, r=nikomatsakis
    
    - Allow inherent implementations on `char`, `str`, `[T]`, `*const T`, `*mut T` and all the numeric primitives.
    - copy `unicode::char::CharExt` methods into `impl char`
    - remove `unicode::char::CharExt`, its re-export `std::char::CharExt` and `CharExt` from the prelude
    - copy `collections::str::StrExt` methods into `impl str`
    - remove `collections::str::StrExt` its re-export `std::str::StrExt`, and `StrExt` from the prelude
    - copy `collections::slice::SliceExt` methods into `impl&lt;T&gt; [T]`
    - remove `collections::slice::SliceExt` its re-export `std::slice::SliceExt`, and `SliceExt` from the prelude
    - copy `core::ptr::PtrExt` methods into `impl&lt;T&gt; *const T`
    - remove `core::ptr::PtrExt` its re-export `std::ptr::PtrExt`, and `PtrExt` from the prelude
    - copy `core::ptr::PtrExt` and `core::ptr::MutPtrExt` methods into `impl&lt;T&gt; *mut T`
    - remove `core::ptr::MutPtrExt` its re-export `std::ptr::MutPtrExt`, and `MutPtrExt` from the prelude
    - copy `core::num::Int` and `core::num::SignedInt` methods into `impl i{8,16,32,64,size}`
    - copy `core::num::Int` and `core::num::UnsignedInt` methods into `impl u{8,16,32,64,size}`
    - remove `core::num::UnsignedInt` and its re-export `std::num::UnsignedInt`
    - move `collections` tests into its own crate: `collectionstest`
    - copy `core::num::Float` methods into `impl f{32,64}`
    
    Because this PR removes several traits, this is a [breaking-change], however functionality remains unchanged and breakage due to unresolved imports should be minimal. If you encounter an error due to an unresolved import, simply remove the import:
    
    ``` diff
      fn main() {
    -     use std::num::UnsignedInt;  //~ error: unresolved import `std::num::UnsignedInt`.
    -
          println!("{}", 8_usize.is_power_of_two());
      }
    ```
    
    ---
    
    cc  #16862
    [preview docs](http://japaric.github.io/inherent/std/index.html)
    [unicode::char](http://japaric.github.io/inherent/unicode/primitive.char.html)
    [collections::str](http://japaric.github.io/inherent/collections/primitive.str.html)
    [std::f32](http://japaric.github.io/inherent/std/primitive.f32.html)

commit a2572885ab62512a2508868a27c22d615382174a
Merge: 92dd995 f798674
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 00:50:26 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 00:50:26 2015 +0000

    Auto merge of #23352 - alexcrichton:stabilize-net, r=aturon
    
    This commit performs a stabilization pass over the std::net module,
    incorporating the changes from RFC 923. Specifically, the following actions were
    taken:
    
    Stable functionality:
    
    * `net` (the name)
    * `Shutdown`
    * `Shutdown::{Read, Write, Both}`
    * `lookup_host`
    * `LookupHost`
    * `SocketAddr`
    * `SocketAddr::{V4, V6}`
    * `SocketAddr::port`
    * `SocketAddrV4`
    * `SocketAddrV4::{new, ip, port}`
    * `SocketAddrV6`
    * `SocketAddrV4::{new, ip, port, flowinfo, scope_id}`
    * Common trait impls for socket addr structures
    * `ToSocketAddrs`
    * `ToSocketAddrs::Iter`
    * `ToSocketAddrs::to_socket_addrs`
    * `ToSocketAddrs for {SocketAddr*, (Ipv*Addr, u16), str, (str, u16)}`
    * `Ipv4Addr`
    * `Ipv4Addr::{new, octets, to_ipv6_compatible, to_ipv6_mapped}`
    * `Ipv6Addr`
    * `Ipv6Addr::{new, segments, to_ipv4}`
    * `TcpStream`
    * `TcpStream::connect`
    * `TcpStream::{peer_addr, local_addr, shutdown, try_clone}`
    * `{Read,Write} for {TcpStream, &amp;TcpStream}`
    * `TcpListener`
    * `TcpListener::bind`
    * `TcpListener::{local_addr, try_clone, accept, incoming}`
    * `Incoming`
    * `UdpSocket`
    * `UdpSocket::bind`
    * `UdpSocket::{recv_from, send_to, local_addr, try_clone}`
    
    Unstable functionality:
    
    * Extra methods on `Ipv{4,6}Addr` for various methods of inspecting the address
      and determining qualities of it.
    * Extra methods on `TcpStream` to configure various protocol options.
    * Extra methods on `UdpSocket` to configure various protocol options.
    
    Deprecated functionality:
    
    * The `socket_addr` method has been renamed to `local_addr`
    
    This commit is a breaking change due to the restructuring of the `SocketAddr`
    type as well as the renaming of the `socket_addr` method. Migration should be
    fairly straightforward, however, after accounting for the new level of
    abstraction in `SocketAddr` (protocol distinction at the socket address level,
    not the IP address).
    
    [breaking-change]

commit 92dd995e1705a8c398a5266c8483e2519e494f47
Merge: 1760e87 9889aae
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Mar 16 22:13:52 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Mar 16 22:13:52 2015 +0000

    Auto merge of #23331 - eddyb:attr-lookahead, r=nikomatsakis
    
    Most of the changes are cleanup facilitated by straight-forward attribute handling.
    This is a minor [breaking-change] for users of `quote_stmt!` (returns `Option&lt;P&lt;Stmt&gt;&gt;` now) and some of the public methods in `Parser` (a few `Vec&lt;Attribute&gt;` arguments/returns were removed).
    
    r? @nikomatsakis

commit bde09eea35113f25d4e0bcc4a8344de971f3069a
Merge: cc78919 1d5983a
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Mar 16 17:02:11 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Mar 16 17:02:11 2015 +0000

    Auto merge of #23347 - aturon:stab-misc, r=alexcrichton
    
    This commit deprecates the `count`, `range` and `range_step` functions
    in `iter`, in favor of range notation. To recover all existing
    functionality, a new `step_by` adapter is provided directly on `ops::Range`
    and `ops::RangeFrom`.
    
    [breaking-change]
    
    r? @alexcrichton

commit 170ccd615f976fc9e90a8f14ce6c373bfdf01533
Author:     Nick Cameron &lt;ncameron@mozilla.com&gt;
AuthorDate: Sun Mar 15 18:47:00 2015 +1300
Commit:     Nick Cameron &lt;ncameron@mozilla.com&gt;
CommitDate: Mon Mar 16 11:03:54 2015 +1300

    Error if `pub use` references a private item.
    
    [breaking-change]
    
    Closes #23266

commit 542e2bb3910f8860d49b4b40bcd78d9c74e733ff
Merge: b4f5e78 1f5f76a
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Mar 15 18:42:54 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Mar 15 18:42:54 2015 +0000

    Auto merge of #23353 - alexcrichton:stabilize-os, r=aturon
    
    This commit starts to organize the `std::os::$platform` modules and in the
    process stabilizes some of the functionality contained within. The organization
    of these modules will reflect the organization of the standard library itself
    with extension traits for primitives in the same corresponding module.
    
    The OS-specific modules will grow more functionality over time including
    concrete types that are not extending functionality of other structures, and
    these will either go into the closest module in `std::os::$platform` or they
    will grow a new module in the hierarchy.
    
    The following items are now stable:
    
    * `os::{unix, windows}`
    * `unix::ffi`
    * `unix::ffi::OsStrExt`
    * `unix::ffi::OsStrExt::{from_bytes, as_bytes, to_cstring}`
    * `unix::ffi::OsString`
    * `unix::ffi::OsStringExt::{from_vec, into_vec}`
    * `unix::process`
    * `unix::process::CommandExt`
    * `unix::process::CommandExt::{uid, gid}`
    * `unix::process::ExitStatusExt`
    * `unix::process::ExitStatusExt::signal`
    * `unix::prelude`
    * `windows::ffi`
    * `windows::ffi::OsStringExt`
    * `windows::ffi::OsStringExt::from_wide`
    * `windows::ffi::OsStrExt`
    * `windows::ffi::OsStrExt::encode_wide`
    * `windows::prelude`
    
    The following items remain unstable:
    
    * `unix::io`
    * `unix::io::{Fd, AsRawFd}`
    * `unix::fs::{PermissionsExt, OpenOptionsExt}`
    * `windows::io`
    * `windows::io::{Handle, AsRawHandle}`
    * `windows::io::{Socket, AsRawSocket}`
    * `windows::fs`
    * `windows::fs::OpenOptionsExt`
    
    Due to the reorgnization of the platform extension modules, this commit is a
    breaking change. Most imports can be fixed by adding the relevant libstd module
    in the `use` path (such as `ffi` or `fs`).
    
    [breaking-change]

commit 1f5f76adc36082ec514a6cfa4ad2d7e6655a5253
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 13 17:12:38 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Sun Mar 15 10:28:34 2015 -0700

    std: Stabilize portions of `std::os::$platform`
    
    This commit starts to organize the `std::os::$platform` modules and in the
    process stabilizes some of the functionality contained within. The organization
    of these modules will reflect the organization of the standard library itself
    with extension traits for primitives in the same corresponding module.
    
    The OS-specific modules will grow more functionality over time including
    concrete types that are not extending functionality of other structures, and
    these will either go into the closest module in `std::os::$platform` or they
    will grow a new module in the hierarchy.
    
    The following items are now stable:
    
    * `os::{unix, windows}`
    * `unix::ffi`
    * `unix::ffi::OsStrExt`
    * `unix::ffi::OsStrExt::{from_bytes, as_bytes, to_cstring}`
    * `unix::ffi::OsString`
    * `unix::ffi::OsStringExt::{from_vec, into_vec}`
    * `unix::process`
    * `unix::process::CommandExt`
    * `unix::process::CommandExt::{uid, gid}`
    * `unix::process::ExitStatusExt`
    * `unix::process::ExitStatusExt::signal`
    * `unix::prelude`
    * `windows::ffi`
    * `windows::ffi::OsStringExt`
    * `windows::ffi::OsStringExt::from_wide`
    * `windows::ffi::OsStrExt`
    * `windows::ffi::OsStrExt::encode_wide`
    * `windows::prelude`
    
    The following items remain unstable:
    
    * `unix::io`
    * `unix::io::{Fd, AsRawFd}`
    * `unix::fs::{PermissionsExt, OpenOptionsExt}`
    * `windows::io`
    * `windows::io::{Handle, AsRawHandle}`
    * `windows::io::{Socket, AsRawSocket}`
    * `windows::fs`
    * `windows::fs::OpenOptionsExt`
    
    Due to the reorgnization of the platform extension modules, this commit is a
    breaking change. Most imports can be fixed by adding the relevant libstd module
    in the `use` path (such as `ffi` or `fs`).
    
    [breaking-change]

commit 54660fc392343e4ddee8a0ea1ca196ffc533585b
Merge: f59af75 60a4a2d
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Mar 15 09:18:42 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Mar 15 09:18:42 2015 +0000

    Auto merge of #23316 - alexcrichton:less-question-sized, r=aturon
    
    It is a frequent pattern among I/O functions to take `P: AsPath + ?Sized` or
    `AsOsStr` instead of `AsPath`. Most of these functions do not need to take
    ownership of their argument, but for libraries in general it's much more
    ergonomic to not deal with `?Sized` at all and simply require an argument `P`
    instead of `&amp;P`.
    
    This change is aimed at removing unsightly `?Sized` bounds while retaining the
    same level of usability as before. All affected functions now take ownership of
    their arguments instead of taking them by reference, but due to the forwarding
    implementations of `AsOsStr` and `AsPath` all code should continue to work as it
    did before.
    
    This is strictly speaking a breaking change due to the signatures of these
    functions changing, but normal idiomatic usage of these APIs should not break in
    practice.
    
    [breaking-change]

commit 60a4a2db8837be91bdae051bd51ab181077e5dc6
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Mar 12 12:59:53 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Sat Mar 14 23:23:54 2015 -0700

    std: Remove ?Sized bounds from many I/O functions
    
    It is a frequent pattern among I/O functions to take `P: AsPath + ?Sized` or
    `AsOsStr` instead of `AsPath`. Most of these functions do not need to take
    ownership of their argument, but for libraries in general it's much more
    ergonomic to not deal with `?Sized` at all and simply require an argument `P`
    instead of `&amp;P`.
    
    This change is aimed at removing unsightly `?Sized` bounds while retaining the
    same level of usability as before. All affected functions now take ownership of
    their arguments instead of taking them by reference, but due to the forwarding
    implementations of `AsOsStr` and `AsPath` all code should continue to work as it
    did before.
    
    This is strictly speaking a breaking change due to the signatures of these
    functions changing, but normal idiomatic usage of these APIs should not break in
    practice.
    
    [breaking-change]

commit f798674b86382929ca17c88de422a6e2fdb27f2a
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 13 14:22:33 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Mar 13 16:47:42 2015 -0700

    std: Stabilize the `net` module
    
    This commit performs a stabilization pass over the std::net module,
    incorporating the changes from RFC 923. Specifically, the following actions were
    taken:
    
    Stable functionality:
    
    * `net` (the name)
    * `Shutdown`
    * `Shutdown::{Read, Write, Both}`
    * `lookup_host`
    * `LookupHost`
    * `SocketAddr`
    * `SocketAddr::{V4, V6}`
    * `SocketAddr::port`
    * `SocketAddrV4`
    * `SocketAddrV4::{new, ip, port}`
    * `SocketAddrV6`
    * `SocketAddrV4::{new, ip, port, flowinfo, scope_id}`
    * Common trait impls for socket addr structures
    * `ToSocketAddrs`
    * `ToSocketAddrs::Iter`
    * `ToSocketAddrs::to_socket_addrs`
    * `ToSocketAddrs for {SocketAddr*, (Ipv*Addr, u16), str, (str, u16)}`
    * `Ipv4Addr`
    * `Ipv4Addr::{new, octets, to_ipv6_compatible, to_ipv6_mapped}`
    * `Ipv6Addr`
    * `Ipv6Addr::{new, segments, to_ipv4}`
    * `TcpStream`
    * `TcpStream::connect`
    * `TcpStream::{peer_addr, local_addr, shutdown, try_clone}`
    * `{Read,Write} for {TcpStream, &amp;TcpStream}`
    * `TcpListener`
    * `TcpListener::bind`
    * `TcpListener::{local_addr, try_clone, accept, incoming}`
    * `Incoming`
    * `UdpSocket`
    * `UdpSocket::bind`
    * `UdpSocket::{recv_from, send_to, local_addr, try_clone}`
    
    Unstable functionality:
    
    * Extra methods on `Ipv{4,6}Addr` for various methods of inspecting the address
      and determining qualities of it.
    * Extra methods on `TcpStream` to configure various protocol options.
    * Extra methods on `UdpSocket` to configure various protocol options.
    
    Deprecated functionality:
    
    * The `socket_addr` method has been renamed to `local_addr`
    
    This commit is a breaking change due to the restructuring of the `SocketAddr`
    type as well as the renaming of the `socket_addr` method. Migration should be
    fairly straightforward, however, after accounting for the new level of
    abstraction in `SocketAddr` (protocol distinction at the socket address level,
    not the IP address).
    
    [breaking-change]

commit 1d5983aded687149239e8943debd51abdce5d27b
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Fri Mar 13 11:35:53 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Fri Mar 13 14:45:13 2015 -0700

    Deprecate range, range_step, count, distributions
    
    This commit deprecates the `count`, `range` and `range_step` functions
    in `iter`, in favor of range notation. To recover all existing
    functionality, a new `step_by` adapter is provided directly on `ops::Range`
    and `ops::RangeFrom`.
    
    [breaking-change]

commit 3e4be02b80a3dd27bce20870958fe0aef7e7336d
Merge: 9eb69ab 981bf5f
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Mar 13 20:22:16 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Mar 13 20:22:16 2015 +0000

    Auto merge of #23292 - alexcrichton:stabilize-io, r=aturon
    
    The new `std::io` module has had some time to bake now, and this commit
    stabilizes its functionality. There are still portions of the module which
    remain unstable, and below contains a summart of the actions taken.
    
    This commit also deprecates the entire contents of the `old_io` module in a
    blanket fashion. All APIs should now have a reasonable replacement in the
    new I/O modules.
    
    Stable APIs:
    
    * `std::io` (the name)
    * `std::io::prelude` (the name)
    * `Read`
    * `Read::read`
    * `Read::{read_to_end, read_to_string}` after being modified to return a `usize`
      for the number of bytes read.
    * `ReadExt`
    * `Write`
    * `Write::write`
    * `Write::{write_all, write_fmt}`
    * `WriteExt`
    * `BufRead`
    * `BufRead::{fill_buf, consume}`
    * `BufRead::{read_line, read_until}` after being modified to return a `usize`
      for the number of bytes read.
    * `BufReadExt`
    * `BufReader`
    * `BufReader::{new, with_capacity}`
    * `BufReader::{get_ref, get_mut, into_inner}`
    * `{Read,BufRead} for BufReader`
    * `BufWriter`
    * `BufWriter::{new, with_capacity}`
    * `BufWriter::{get_ref, get_mut, into_inner}`
    * `Write for BufWriter`
    * `IntoInnerError`
    * `IntoInnerError::{error, into_inner}`
    * `{Error,Display} for IntoInnerError`
    * `LineWriter`
    * `LineWriter::{new, with_capacity}` - `with_capacity` was added
    * `LineWriter::{get_ref, get_mut, into_inner}` - `get_mut` was added)
    * `Write for LineWriter`
    * `BufStream`
    * `BufStream::{new, with_capacities}`
    * `BufStream::{get_ref, get_mut, into_inner}`
    * `{BufRead,Read,Write} for BufStream`
    * `stdin`
    * `Stdin`
    * `Stdin::lock`
    * `Stdin::read_line` - added method
    * `StdinLock`
    * `Read for Stdin`
    * `{Read,BufRead} for StdinLock`
    * `stdout`
    * `Stdout`
    * `Stdout::lock`
    * `StdoutLock`
    * `Write for Stdout`
    * `Write for StdoutLock`
    * `stderr`
    * `Stderr`
    * `Stderr::lock`
    * `StderrLock`
    * `Write for Stderr`
    * `Write for StderrLock`
    * `io::Result`
    * `io::Error`
    * `io::Error::last_os_error`
    * `{Display, Error} for Error`
    
    Unstable APIs:
    
    (reasons can be found in the commit itself)
    
    * `Write::flush`
    * `Seek`
    * `ErrorKind`
    * `Error::new`
    * `Error::from_os_error`
    * `Error::kind`
    
    Deprecated APIs
    
    * `Error::description` - available via the `Error` trait
    * `Error::detail` - available via the `Display` implementation
    * `thread::Builder::{stdout, stderr}`
    
    Changes in functionality:
    
    * `old_io::stdio::set_stderr` is now a noop as the infrastructure for printing
      backtraces has migrated to `std::io`.
    
    [breaking-change]

commit d54bd9f29af67748b7ddf80a5cf285145949ddc2
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Mar 11 14:16:46 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Mar 12 20:39:03 2015 -0700

    std: Stabilize the `io` module
    
    The new `std::io` module has had some time to bake now, and this commit
    stabilizes its functionality. There are still portions of the module which
    remain unstable, and below contains a summart of the actions taken.
    
    This commit also deprecates the entire contents of the `old_io` module in a
    blanket fashion. All APIs should now have a reasonable replacement in the
    new I/O modules.
    
    Stable APIs:
    
    * `std::io` (the name)
    * `std::io::prelude` (the name)
    * `Read`
    * `Read::read`
    * `Read::{read_to_end, read_to_string}` after being modified to return a `usize`
      for the number of bytes read.
    * `Write`
    * `Write::write`
    * `Write::{write_all, write_fmt}`
    * `BufRead`
    * `BufRead::{fill_buf, consume}`
    * `BufRead::{read_line, read_until}` after being modified to return a `usize`
      for the number of bytes read.
    * `BufReader`
    * `BufReader::{new, with_capacity}`
    * `BufReader::{get_ref, get_mut, into_inner}`
    * `{Read,BufRead} for BufReader`
    * `BufWriter`
    * `BufWriter::{new, with_capacity}`
    * `BufWriter::{get_ref, get_mut, into_inner}`
    * `Write for BufWriter`
    * `IntoInnerError`
    * `IntoInnerError::{error, into_inner}`
    * `{Error,Display} for IntoInnerError`
    * `LineWriter`
    * `LineWriter::{new, with_capacity}` - `with_capacity` was added
    * `LineWriter::{get_ref, get_mut, into_inner}` - `get_mut` was added)
    * `Write for LineWriter`
    * `BufStream`
    * `BufStream::{new, with_capacities}`
    * `BufStream::{get_ref, get_mut, into_inner}`
    * `{BufRead,Read,Write} for BufStream`
    * `stdin`
    * `Stdin`
    * `Stdin::lock`
    * `Stdin::read_line` - added method
    * `StdinLock`
    * `Read for Stdin`
    * `{Read,BufRead} for StdinLock`
    * `stdout`
    * `Stdout`
    * `Stdout::lock`
    * `StdoutLock`
    * `Write for Stdout`
    * `Write for StdoutLock`
    * `stderr`
    * `Stderr`
    * `Stderr::lock`
    * `StderrLock`
    * `Write for Stderr`
    * `Write for StderrLock`
    * `io::Result`
    * `io::Error`
    * `io::Error::last_os_error`
    * `{Display, Error} for Error`
    
    Unstable APIs:
    
    (reasons can be found in the commit itself)
    
    * `Write::flush`
    * `Seek`
    * `ErrorKind`
    * `Error::new`
    * `Error::from_os_error`
    * `Error::kind`
    
    Deprecated APIs
    
    * `Error::description` - available via the `Error` trait
    * `Error::detail` - available via the `Display` implementation
    * `thread::Builder::{stdout, stderr}`
    
    Changes in functionality:
    
    * `old_io::stdio::set_stderr` is now a noop as the infrastructure for printing
      backtraces has migrated to `std::io`.
    * The `ReadExt`, `WriteExt`, and `BufReadExt` extension traits were all removed
      by folding functionality into the corresponding trait.
    
    [breaking-change]

commit 79dd393a4f144fa5e6f81c720c782de3175810d7
Merge: c9b03c2 42c4e48
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Mar 13 01:00:02 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Mar 13 01:00:02 2015 +0000

    Auto merge of #23229 - aturon:stab-path, r=alexcrichton
    
    This commit stabilizes essentially all of the new `std::path` API. The
    API itself is changed in a couple of ways (which brings it in closer
    alignment with the RFC):
    
    * `.` components are now normalized away, unless they appear at the
      start of a path. This in turn effects the semantics of e.g. asking for
      the file name of `foo/` or `foo/.`, both of which yield `Some("foo")`
      now. This semantics is what the original RFC specified, and is also
      desirable given early experience rolling out the new API.
    
    * The `parent` method is now `without_file` and succeeds if, and only
      if, `file_name` is `Some(_)`. That means, in particular, that it fails
      for a path like `foo/../`. This change affects `pop` as well.
    
    In addition, the `old_path` module is now deprecated.
    
    [breaking-change]
    
    r? @alexcrichton

commit 42c4e481cd98bd392839144c9ac83e55e445a12a
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Mar 9 08:49:10 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Thu Mar 12 16:38:58 2015 -0700

    Stabilize std::path
    
    This commit stabilizes essentially all of the new `std::path` API. The
    API itself is changed in a couple of ways (which brings it in closer
    alignment with the RFC):
    
    * `.` components are now normalized away, unless they appear at the
      start of a path. This in turn effects the semantics of e.g. asking for
      the file name of `foo/` or `foo/.`, both of which yield `Some("foo")`
      now. This semantics is what the original RFC specified, and is also
      desirable given early experience rolling out the new API.
    
    * The `parent` function now succeeds if, and only if, the path has at
      least one non-root/prefix component. This change affects `pop` as
      well.
    
    * The `Prefix` component now involves a separate `PrefixComponent`
      struct, to better allow for keeping both parsed and unparsed prefix data.
    
    In addition, the `old_path` module is now deprecated.
    
    Closes #23264
    
    [breaking-change]

commit c9b03c24ec346e6405883032094f47805ef9c43e
Merge: 538840b 9da9185
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Mar 12 20:13:23 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Mar 12 20:13:23 2015 +0000

    Auto merge of #23265 - eddyb:meth-ast-refactor, r=nikomatsakis
    
    The end result is that common fields (id, name, attributes, etc.) are stored in now-structures `ImplItem` and `TraitItem`.
    The signature of a method is no longer duplicated between methods with a body (default/impl) and those without, they now share `MethodSig`.
    
    This is also a [breaking-change] because of minor bugfixes and changes to syntax extensions:
    * `pub fn` methods in a trait no longer parse - remove the `pub`, it has no meaning anymore
    * `MacResult::make_methods` is now `make_impl_items` and the return type has changed accordingly
    * `quote_method` is gone, because `P&lt;ast::Method&gt;` doesn't exist and it couldn't represent a full method anyways - could be replaced by `quote_impl_item`/`quote_trait_item` in the future, but I do hope we realize how silly that combinatorial macro expansion is and settle on a single `quote` macro + some type hints - or just no types at all (only token-trees)
    
    r? @nikomatsakis This is necessary (hopefully also sufficient) for associated constants.

commit cfea8ec41699e25c8fb524d625190f0cb860dc71
Merge: 6048ba8 0f6a0b5
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 10 22:45:10 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 10 22:45:10 2015 +0000

    Auto merge of #23126 - alexcrichton:char-third-pass, r=aturon
    
    This commit performs another pass over the `std::char` module for stabilization.
    Some minor cleanup is performed such as migrating documentation from libcore to
    libunicode (where the `std`-facing trait resides) as well as a slight
    reorganiation in libunicode itself. Otherwise, the stability modifications made
    are:
    
    * `char::from_digit` is now stable
    * `CharExt::is_digit` is now stable
    * `CharExt::to_digit` is now stable
    * `CharExt::to_{lower,upper}case` are now stable after being modified to return
      an iterator over characters. While the implementation today has not changed
      this should allow us to implement the full set of case conversions in unicode
      where some characters can map to multiple when doing an upper or lower case
      mapping.
    * `StrExt::to_{lower,upper}case` was added as unstable for a convenience of not
      having to worry about characters expanding to more characters when you just
      want the whole string to get into upper or lower case.
    
    This is a breaking change due to the change in the signatures of the
    `CharExt::to_{upper,lower}case` methods. Code can be updated to use functions
    like `flat_map` or `collect` to handle the difference.
    
    [breaking-change]
    
    Closes #20333

commit 0f6a0b58f9dbc3a741abd898f2d06a8ba78a938d
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Mar 5 18:23:57 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 10 15:08:31 2015 -0700

    std: Stabilize more of the `char` module
    
    This commit performs another pass over the `std::char` module for stabilization.
    Some minor cleanup is performed such as migrating documentation from libcore to
    libunicode (where the `std`-facing trait resides) as well as a slight
    reorganiation in libunicode itself. Otherwise, the stability modifications made
    are:
    
    * `char::from_digit` is now stable
    * `CharExt::is_digit` is now stable
    * `CharExt::to_digit` is now stable
    * `CharExt::to_{lower,upper}case` are now stable after being modified to return
      an iterator over characters. While the implementation today has not changed
      this should allow us to implement the full set of case conversions in unicode
      where some characters can map to multiple when doing an upper or lower case
      mapping.
    * `StrExt::to_{lower,upper}case` was added as unstable for a convenience of not
      having to worry about characters expanding to more characters when you just
      want the whole string to get into upper or lower case.
    
    This is a breaking change due to the change in the signatures of the
    `CharExt::to_{upper,lower}case` methods. Code can be updated to use functions
    like `flat_map` or `collect` to handle the difference.
    
    [breaking-change]

commit 668c6474081a10768ef143b9984efcab5376bf68
Merge: b8c6eb1 491054f
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Mar 7 18:39:17 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Mar 7 18:39:17 2015 +0000

    Auto merge of #23137 - kmcallister:derive-sugar, r=sfackler
    
    This is a hack, but I don't think we can do much better as long as `derive` is running at the syntax expansion phase.
    
    If the `custom_derive` feature gate is enabled, this works with user-defined traits and syntax extensions. Without the gate, you can't use e.g. `#[derive_Clone]` directly, so this does not change the stable language.
    
    To make this effective, we now check gated attributes both before and after macro expansion. This uncovered a number of tests that were missing feature gates.
    
    This PR also cleans up the deriving code somewhat, and forbids some previously-meaningless attribute syntax. For this reason it's technically a
    
        [breaking-change]
    
    r? @sfackler

commit 491054f08e2aaaa8438f1a9943f115dad9da1c6b
Author:     Keegan McAllister &lt;kmcallister@mozilla.com&gt;
AuthorDate: Fri Mar 6 13:15:54 2015 -0800
Commit:     Keegan McAllister &lt;kmcallister@mozilla.com&gt;
CommitDate: Fri Mar 6 18:20:16 2015 -0800

    Make #[derive(Anything)] into sugar for #[derive_Anything]
    
    This is a hack, but I don't think we can do much better as long as `derive` is
    running at the syntax expansion phase.
    
    If the custom_derive feature gate is enabled, this works with user-defined
    traits and syntax extensions. Without the gate, you can't use e.g. #[derive_Clone]
    directly, so this does not change the stable language.
    
    This commit also cleans up the deriving code somewhat, and forbids some
    previously-meaningless attribute syntax. For this reason it's technically a
    
        [breaking-change]

commit fd86a01bb9f23921c82017485d88fe14448e78fe
Merge: 1a30412 9aea749
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 6 15:36:08 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Mar 6 15:36:08 2015 -0800

    rollup merge of #22813: alexcrichton/deprecate-net
    
    The `std::net` primitives should be ready for use now and as a result the old
    ones are now deprecated and slated for removal. Most TCP/UDP functionality is
    now available through `std::net` but the `std::old_io::net::pipe` module is
    removed entirely from the standard library.
    
    Unix socket funtionality can be found in sfackler's [`unix_socket`][unix] crate
    and there is currently no replacement for named pipes on Windows.
    
    [unix]: https://crates.io/crates/unix_socket
    
    [breaking-change]

commit 9aea749b835a6fdcad6f2840a00adac996cc0339
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Feb 25 13:08:51 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Mar 6 10:27:28 2015 -0800

    std: Deprecate the std::old_io::net primitives
    
    The `std::net` primitives should be ready for use now and as a result the old
    ones are now deprecated and slated for removal. Most TCP/UDP functionality is
    now available through `std::net` but the `std::old_io::net::pipe` module is
    removed entirely from the standard library.
    
    Unix socket funtionality can be found in sfackler's [`unix_socket`][unix] crate
    and there is currently no replacement for named pipes on Windows.
    
    [unix]: https://crates.io/crates/unix_socket
    
    [breaking-change]

commit 1fe8f221450bad3ffb1351c6549f67c18ce0b94e
Merge: b0746ff b5c6ab2
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Mar 6 05:20:11 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Mar 6 05:20:11 2015 +0000

    Auto merge of #22899 - huonw:macro-stability, r=alexcrichton
    
    Unstable items used in a macro expansion will now always trigger
    stability warnings, *unless* the unstable items are directly inside a
    macro marked with `#[allow_internal_unstable]`. IOW, the compiler warns
    unless the span of the unstable item is a subspan of the definition of a
    macro marked with that attribute.
    
    E.g.
    
        #[allow_internal_unstable]
        macro_rules! foo {
            ($e: expr) =&gt; {{
                $e;
                unstable(); // no warning
                only_called_by_foo!();
            }}
        }
    
        macro_rules! only_called_by_foo {
            () =&gt; { unstable() } // warning
        }
    
        foo!(unstable()) // warning
    
    The unstable inside `foo` is fine, due to the attribute. But the
    `unstable` inside `only_called_by_foo` is not, since that macro doesn't
    have the attribute, and the `unstable` passed into `foo` is also not
    fine since it isn't contained in the macro itself (that is, even though
    it is only used directly in the macro).
    
    In the process this makes the stability tracking much more precise,
    e.g. previously `println!("{}", unstable())` got no warning, but now it
    does. As such, this is a bug fix that may cause [breaking-change]s.
    
    The attribute is definitely feature gated, since it explicitly allows
    side-stepping the feature gating system.
    
    ---
    
    This updates `thread_local!` macro to use the attribute, since it uses
    unstable features internally (initialising a struct with unstable
    fields).

commit fe41c935603be8192c7481fcd846e629d76337b1
Merge: c9063e0 73b0b25
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 6 09:01:50 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 6 09:01:50 2015 +0530

    Rollup merge of #23081 - alexcrichton:stabilize-fs, r=aturon
    
     This commit performs a stabilization pass over the `std::fs` module now that
    it's had some time to bake. The change was largely just adding `#[stable]` tags,
    but there are a few APIs that remain `#[unstable]`.
    
    The following apis are now marked `#[stable]`:
    
    * `std::fs` (the name)
    * `File`
    * `Metadata`
    * `ReadDir`
    * `DirEntry`
    * `OpenOptions`
    * `Permissions`
    * `File::{open, create}`
    * `File::{sync_all, sync_data}`
    * `File::set_len`
    * `File::metadata`
    * Trait implementations for `File` and `&amp;File`
    * `OpenOptions::new`
    * `OpenOptions::{read, write, append, truncate, create}`
    * `OpenOptions::open` - this function was modified, however, to not attempt to
      reject cross-platform openings of directories. This means that some platforms
      will succeed in opening a directory and others will fail.
    * `Metadata::{is_dir, is_file, len, permissions}`
    * `Permissions::{readonly, set_readonly}`
    * `Iterator for ReadDir`
    * `DirEntry::path`
    * `remove_file` - like with `OpenOptions::open`, the extra windows code to
      remove a readonly file has been removed. This means that removing a readonly
      file will succeed on some platforms but fail on others.
    * `metadata`
    * `rename`
    * `copy`
    * `hard_link`
    * `soft_link`
    * `read_link`
    * `create_dir`
    * `create_dir_all`
    * `remove_dir`
    * `remove_dir_all`
    * `read_dir`
    
    The following apis remain `#[unstable]`.
    
    * `WalkDir` and `walk` - there are many methods by which a directory walk can be
      constructed, and it's unclear whether the current semantics are the right
      ones. For example symlinks are not handled super well currently. This is now
      behind a new `fs_walk` feature.
    * `File::path` - this is an extra abstraction which the standard library
      provides on top of what the system offers and it's unclear whether we should
      be doing so. This is now behind a new `file_path` feature.
    * `Metadata::{accessed, modified}` - we do not currently have a good
      abstraction for a moment in time which is what these APIs should likely be
      returning, so these remain `#[unstable]` for now. These are now behind a new
      `fs_time` feature
    * `set_file_times` - like with `Metadata::accessed`, we do not currently have
      the appropriate abstraction for the arguments here so this API remains
      unstable behind the `fs_time` feature gate.
    * `PathExt` - the precise set of methods on this trait may change over time and
      some methods may be removed. This API remains unstable behind the `path_ext`
      feature gate.
    * `set_permissions` - we may wish to expose a more granular ability to set the
      permissions on a file instead of just a blanket \"set all permissions\" method.
      This function remains behind the `fs` feature.
    
    The following apis are now `#[deprecated]`
    
    * The `TempDir` type is now entirely deprecated and is [located on
      crates.io][tempdir] as the `tempdir` crate with [its source][github] at
      rust-lang/tempdir.
    
    [tempdir]: https://crates.io/crates/tempdir
    [github]: https://github.com/rust-lang/tempdir
    
    The stability of some of these APIs has been questioned over the past few weeks
    in using these APIs, and it is intentional that the majority of APIs here are
    marked `#[stable]`. The `std::fs` module has a lot of room to grow and the
    material is [being tracked in a RFC issue][rfc-issue].
    
    [rfc-issue]: rust-lang/rfcs#939
    
    Closes #22879
    
    [breaking-change]

commit c9063e0f98da9eb0cb30427010614ea634b409ed
Merge: d77fc9f 7ed418c
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 6 09:01:37 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 6 09:01:37 2015 +0530

    Rollup merge of #23079 - alexcrichton:deprecate-process, r=aturon
    
     This module is now superseded by the `std::process` module. This module still
    has some room to expand to get quite back up to parity with the `old_io`
    version, and there is a [tracking issue][issue] for feature requests as well as
    known room for expansion.
    
    [issue]: https://github.com/rust-lang/rfcs/issues/941
    [breaking-change]

commit 32631b4138fbaeca0f6496dd83aa327c76d5a900
Merge: efb487b 0dfa997
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 6 08:58:44 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 6 08:58:44 2015 +0530

    Rollup merge of #23010 - alexcrichton:deprecate-some-old-io, r=aturon
    
     The new `io` module has had some time to bake and this commit stabilizes some of
    the utilities associated with it. This commit also deprecates a number of
    `std::old_io::util` functions and structures.
    
    These items are now `#[stable]`
    
    * `Cursor`
    * `Cursor::{new, into_inner, get_ref, get_mut, position, set_position}`
    * Implementations of I/O traits for `Cursor&lt;T&gt;`
    * Delegating implementations of I/O traits for references and `Box` pointers
    * Implementations of I/O traits for primitives like slices and `Vec&lt;T&gt;`
    * `ReadExt::bytes`
    * `Bytes` (and impls)
    * `ReadExt::chain`
    * `Chain` (and impls)
    * `ReadExt::take` (and impls)
    * `BufReadExt::lines`
    * `Lines` (and impls)
    * `io::copy`
    * `io::{empty, Empty}` (and impls)
    * `io::{sink, Sink}` (and impls)
    * `io::{repeat, Repeat}` (and impls)
    
    These items remain `#[unstable]`
    
    * Core I/O traits. These may want a little bit more time to bake along with the
      commonly used methods like `read_to_end`.
    * `BufReadExt::split` - this function may be renamed to not conflict with
      `SliceExt::split`.
    * `Error` - there are a number of questions about its representation,
      `ErrorKind`, and usability.
    
    These items are now `#[deprecated]` in `old_io`
    
    * `LimitReader` - use `take` instead
    * `NullWriter` - use `io::sink` instead
    * `ZeroReader` - use `io::repeat` instead
    * `NullReader` - use `io::empty` instead
    * `MultiWriter` - use `broadcast` instead
    * `ChainedReader` - use `chain` instead
    * `TeeReader` - use `tee` instead
    * `copy` - use `io::copy` instead
    
    [breaking-change]

commit efb487b503d87f04448fc5e6f75038ca98b8670e
Merge: 9eb596c d5d8345
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 6 08:58:30 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 6 08:58:30 2015 +0530

    Rollup merge of #22980 - alexcrichton:debug-assertions, r=pnkfelix
    
     This commit is an implementation of [RFC 563][rfc] which adds a new
    `cfg(debug_assertions)` directive which is specially recognized and calculated
    by the compiler. The flag is turned off at any optimization level greater than 1
    and may also be explicitly controlled through the `-C debug-assertions`
    flag.
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/563
    
    The `debug_assert!` and `debug_assert_eq!` macros now respect this instead of
    the `ndebug` variable and `ndebug` no longer holds any meaning to the standard
    library.
    
    Code which was previously relying on `not(ndebug)` to gate expensive code should
    be updated to rely on `debug_assertions` instead.
    
    Closes #22492
    [breaking-change]

commit 9eb596ce8f4b70ba73e8671f9b42147c91319842
Merge: e80fc10 b5c6ab2
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 6 08:58:16 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 6 08:58:16 2015 +0530

    Rollup merge of #22899 - huonw:macro-stability, r=alexcrichton
    
     Unstable items used in a macro expansion will now always trigger
    stability warnings, *unless* the unstable items are directly inside a
    macro marked with `#[allow_internal_unstable]`. IOW, the compiler warns
    unless the span of the unstable item is a subspan of the definition of a
    macro marked with that attribute.
    
    E.g.
    
        #[allow_internal_unstable]
        macro_rules! foo {
            ($e: expr) =&gt; {{
                $e;
                unstable(); // no warning
                only_called_by_foo!();
            }}
        }
    
        macro_rules! only_called_by_foo {
            () =&gt; { unstable() } // warning
        }
    
        foo!(unstable()) // warning
    
    The unstable inside `foo` is fine, due to the attribute. But the
    `unstable` inside `only_called_by_foo` is not, since that macro doesn't
    have the attribute, and the `unstable` passed into `foo` is also not
    fine since it isn't contained in the macro itself (that is, even though
    it is only used directly in the macro).
    
    In the process this makes the stability tracking much more precise,
    e.g. previously `println!(\"{}\", unstable())` got no warning, but now it
    does. As such, this is a bug fix that may cause [breaking-change]s.
    
    The attribute is definitely feature gated, since it explicitly allows
    side-stepping the feature gating system.
    
    ---
    
    This updates `thread_local!` macro to use the attribute, since it uses
    unstable features internally (initialising a struct with unstable
    fields).

commit 73b0b25e326687aba319df99aee4b0c4124d4498
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 3 19:18:29 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Mar 5 16:49:41 2015 -0800

    std: Stabilize the `fs` module
    
    This commit performs a stabilization pass over the `std::fs` module now that
    it's had some time to bake. The change was largely just adding `#[stable]` tags,
    but there are a few APIs that remain `#[unstable]`.
    
    The following apis are now marked `#[stable]`:
    
    * `std::fs` (the name)
    * `File`
    * `Metadata`
    * `ReadDir`
    * `DirEntry`
    * `OpenOptions`
    * `Permissions`
    * `File::{open, create}`
    * `File::{sync_all, sync_data}`
    * `File::set_len`
    * `File::metadata`
    * Trait implementations for `File` and `&amp;File`
    * `OpenOptions::new`
    * `OpenOptions::{read, write, append, truncate, create}`
    * `OpenOptions::open` - this function was modified, however, to not attempt to
      reject cross-platform openings of directories. This means that some platforms
      will succeed in opening a directory and others will fail.
    * `Metadata::{is_dir, is_file, len, permissions}`
    * `Permissions::{readonly, set_readonly}`
    * `Iterator for ReadDir`
    * `DirEntry::path`
    * `remove_file` - like with `OpenOptions::open`, the extra windows code to
      remove a readonly file has been removed. This means that removing a readonly
      file will succeed on some platforms but fail on others.
    * `metadata`
    * `rename`
    * `copy`
    * `hard_link`
    * `soft_link`
    * `read_link`
    * `create_dir`
    * `create_dir_all`
    * `remove_dir`
    * `remove_dir_all`
    * `read_dir`
    
    The following apis remain `#[unstable]`.
    
    * `WalkDir` and `walk` - there are many methods by which a directory walk can be
      constructed, and it's unclear whether the current semantics are the right
      ones. For example symlinks are not handled super well currently. This is now
      behind a new `fs_walk` feature.
    * `File::path` - this is an extra abstraction which the standard library
      provides on top of what the system offers and it's unclear whether we should
      be doing so. This is now behind a new `file_path` feature.
    * `Metadata::{accessed, modified}` - we do not currently have a good
      abstraction for a moment in time which is what these APIs should likely be
      returning, so these remain `#[unstable]` for now. These are now behind a new
      `fs_time` feature
    * `set_file_times` - like with `Metadata::accessed`, we do not currently have
      the appropriate abstraction for the arguments here so this API remains
      unstable behind the `fs_time` feature gate.
    * `PathExt` - the precise set of methods on this trait may change over time and
      some methods may be removed. This API remains unstable behind the `path_ext`
      feature gate.
    * `set_permissions` - we may wish to expose a more granular ability to set the
      permissions on a file instead of just a blanket "set all permissions" method.
      This function remains behind the `fs` feature.
    
    The following apis are now `#[deprecated]`
    
    * The `TempDir` type is now entirely deprecated and is [located on
      crates.io][tempdir] as the `tempdir` crate with [its source][github] at
      rust-lang/tempdir.
    
    [tempdir]: https://crates.io/crates/tempdir
    [github]: https://github.com/rust-lang/tempdir
    
    The stability of some of these APIs has been questioned over the past few weeks
    in using these APIs, and it is intentional that the majority of APIs here are
    marked `#[stable]`. The `std::fs` module has a lot of room to grow and the
    material is [being tracked in a RFC issue][rfc-issue].
    
    [rfc-issue]: https://github.com/rust-lang/rfcs/issues/939
    
    [breaking-change]

commit d5d834551cd5a7e7d89ac9f2ae642a93409ed989
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 2 14:51:24 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Mar 5 14:51:38 2015 -0800

    rustc: Add a debug_assertions #[cfg] directive
    
    This commit is an implementation of [RFC 563][rfc] which adds a new
    `cfg(debug_assertions)` directive which is specially recognized and calculated
    by the compiler. The flag is turned off at any optimization level greater than 1
    and may also be explicitly controlled through the `-C debug-assertions`
    flag.
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/563
    
    The `debug_assert!` and `debug_assert_eq!` macros now respect this instead of
    the `ndebug` variable and `ndebug` no longer holds any meaning to the standard
    library.
    
    Code which was previously relying on `not(ndebug)` to gate expensive code should
    be updated to rely on `debug_assertions` instead.
    
    Closes #22492
    [breaking-change]

commit 7ed418c3b4ede0364bf419b2c12b27f89b706dcf
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Mar 5 10:41:42 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Mar 5 10:41:42 2015 -0800

    std: Deprecate the old_io::process module
    
    This module is now superseded by the `std::process` module. This module still
    has some room to expand to get quite back up to parity with the `old_io`
    version, and there is a [tracking issue][issue] for feature requests as well as
    known room for expansion.
    
    [issue]: https://github.com/rust-lang/rfcs/issues/941
    [breaking-change]

commit f0c74f85f363a8081b31f9ab696463717ce312d5
Merge: 68740b4 9b332ff
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Mar 5 17:52:21 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Mar 5 17:52:21 2015 +0000

    Auto merge of #23026 - nikomatsakis:issue-20220-supertrait, r=nikomatsakis
    
    The main gist of this PR is commit 1077efb which removes the list of supertraits from the `TraitDef` and pulls them into a separate table, which is accessed via `lookup_super_predicates`. This is analogous to `lookup_predicates`, which gets the complete where clause. This allows us to create the `TraitDef`, which contains the list generics and so forth, without fully knowing the list of supertraits. This in turn allows the *supertrait listing* to contain references to associated types like `&lt;Self as Foo&gt;::Item`, which were previously impossible because conversion required having the `TraitDef` for `Foo`.
    
    We do not yet support `Self::Item` in a supertrait listing. This doesn't work because to convert that, it attempts to expand out the full set of supertraits, which are in the process of being created. This could potentially be worked out by having the expansion of supertraits proceed in a lazy fashion, but we'd have to define shadowing rules for associated types which we don't currently have.
    
    Along the way (in 9de9ec5) I also removed the restriction against duplicate bounds and generalized the code so that it can handle having the same supertrait multiple times with different arguments, e.g. `Foo : Bar&lt;i32&gt; + Bar&lt;u32&gt;`. This restriction was serving no particular purpose, since the same trait could be extended multiple times indirectly, and in the era of multidispatch it is actively harmful.
    
    This is technically a [breaking-change] because it affects the definition of a super-trait. Anything in a where clause that looks like `where Self : Foo` is now considered a supertrait. Because cycles are disallowed in supertraits, that could lead to some errors. This has not been observed in any existing code.
    
    r? @nrc

commit 84b060ce29bf7dd65fc23e855ad7c5a8748d806c
Author:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
AuthorDate: Sun Mar 1 14:09:28 2015 +1100
Commit:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
CommitDate: Fri Mar 6 00:18:28 2015 +1100

    Add #[allow_internal_unstable] to track stability for macros better.
    
    Unstable items used in a macro expansion will now always trigger
    stability warnings, *unless* the unstable items are directly inside a
    macro marked with `#[allow_internal_unstable]`. IOW, the compiler warns
    unless the span of the unstable item is a subspan of the definition of a
    macro marked with that attribute.
    
    E.g.
    
        #[allow_internal_unstable]
        macro_rules! foo {
            ($e: expr) =&gt; {{
                $e;
                unstable(); // no warning
                only_called_by_foo!();
            }}
        }
    
        macro_rules! only_called_by_foo {
            () =&gt; { unstable() } // warning
        }
    
        foo!(unstable()) // warning
    
    The unstable inside `foo` is fine, due to the attribute. But the
    `unstable` inside `only_called_by_foo` is not, since that macro doesn't
    have the attribute, and the `unstable` passed into `foo` is also not
    fine since it isn't contained in the macro itself (that is, even though
    it is only used directly in the macro).
    
    In the process this makes the stability tracking much more precise,
    e.g. previously `println!("{}", unstable())` got no warning, but now it
    does. As such, this is a bug fix that may cause [breaking-change]s.
    
    The attribute is definitely feature gated, since it explicitly allows
    side-stepping the feature gating system.

commit cc722a4dd3e8110a8bf7e62eea977e99e3a3d128
Merge: 3b3bb0e 95d9046
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Mar 5 01:19:15 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Mar 5 01:19:15 2015 +0000

    Auto merge of #22873 - alexcrichton:deprecate-fs, r=aturon
    
    This commit deprecates the majority of std::old_io::fs in favor of std::fs and
    its new functionality. Some functions remain non-deprecated but are now behind a
    feature gate called `old_fs`. These functions will be deprecated once
    suitable replacements have been implemented.
    
    The compiler has been migrated to new `std::fs` and `std::path` APIs where
    appropriate as part of this change.
    
    [breaking-change]

commit 0dfa9978cc57efc8eb51485fc3a333eafd1aa392
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 3 14:49:03 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Mar 4 17:04:22 2015 -0800

    std: Stabilize portions of the `io` module
    
    The new `io` module has had some time to bake and this commit stabilizes some of
    the utilities associated with it. This commit also deprecates a number of
    `std::old_io::util` functions and structures.
    
    These items are now `#[stable]`
    
    * `Cursor`
    * `Cursor::{new, into_inner, get_ref, get_mut, position, set_position}`
    * Implementations of I/O traits for `Cursor&lt;T&gt;`
    * Delegating implementations of I/O traits for references and `Box` pointers
    * Implementations of I/O traits for primitives like slices and `Vec&lt;T&gt;`
    * `ReadExt::bytes`
    * `Bytes` (and impls)
    * `ReadExt::chain`
    * `Chain` (and impls)
    * `ReadExt::take` (and impls)
    * `BufReadExt::lines`
    * `Lines` (and impls)
    * `io::copy`
    * `io::{empty, Empty}` (and impls)
    * `io::{sink, Sink}` (and impls)
    * `io::{repeat, Repeat}` (and impls)
    
    These items remain `#[unstable]`
    
    * Core I/O traits. These may want a little bit more time to bake along with the
      commonly used methods like `read_to_end`.
    * `BufReadExt::split` - this function may be renamed to not conflict with
      `SliceExt::split`.
    * `Error` - there are a number of questions about its representation,
      `ErrorKind`, and usability.
    
    These items are now `#[deprecated]` in `old_io`
    
    * `LimitReader` - use `take` instead
    * `NullWriter` - use `io::sink` instead
    * `ZeroReader` - use `io::repeat` instead
    * `NullReader` - use `io::empty` instead
    * `MultiWriter` - use `broadcast` instead
    * `ChainedReader` - use `chain` instead
    * `TeeReader` - use `tee` instead
    * `copy` - use `io::copy` instead
    
    [breaking-change]

commit 393ce1820e3f639b43d6058d2681b9757123ac1b
Merge: d0fcb1f f35f973
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 3 14:12:53 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 3 17:02:20 2015 +0530

    Rollup merge of #22876 - Florob:const, r=nikomatsakis
    
     This changes the type of some public constants/statics in libunicode.
    Notably some `&amp;'static &amp;'static [(char, char)]` have changed
    to `&amp;'static [(char, char)]`. The regexp crate seems to be the
    sole user of these, yet this is technically a [breaking-change]

commit d0fcb1f53c9f81fbcae5379dd1c0577a8605172c
Merge: ea208a8 89776ae
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 3 14:12:44 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 3 17:01:16 2015 +0530

    Rollup merge of #22990 - japaric:privATe, r=alexcrichton
    
     Associated types are now treated as part of the public API by the privacy checker.
    
    If you were exposing a private type in your public API via an associated type, make that type public:
    
    ``` diff
      pub struct PublicType { .. }
    
    - struct Struct { .. }
    + pub struct Struct { .. }
    
      pub trait PublicTrait {
          type Output;
    
          fn foo(&amp;self) -&gt; Self::Output;
      }
    
      impl PublicTrait for PublicType {
          type Output = Struct;
    
          fn foo(&amp;self) -&gt; Struct {  // `Struct` is part of the public API, it must be marked as `pub`lic
              ..
          }
      }
    ```
    
    [breaking-change]
    
    ---
    
    r? @nikomatsakis
    closes #22912

commit 3b30b74692cfee533b45e0380591d237975ec215
Merge: 63a91c2 2b03718
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 3 14:12:12 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 3 17:01:15 2015 +0530

    Rollup merge of #22943 - ipetkov:lint-recursion, r=alexcrichton
    
     * The lint visitor's visit_ty method did not recurse, and had a
      reference to the now closed #10894
    * The newly enabled recursion has only affected the `deprectated` lint
      which now detects uses of deprecated items in trait impls and
      function return types
    * Renamed some references to `CowString` and `CowVec` to `Cow&lt;str&gt;` and
      `Cow&lt;[T]&gt;`, respectively, which appear outside of the crate which
      defines them
    * Replaced a few instances of `InvariantType&lt;T&gt;` with
      `PhantomData&lt;Cell&lt;T&gt;&gt;`
    * Disabled the `deprecated` lint in several places that
      reference/implement traits on deprecated items which will get cleaned
      up in the future
    * Unfortunately, this means that if a library declares
      `#![deny(deprecated)]` and marks anything as deprecated, it will have
      to disable the lint for any uses of said item, e.g. any impl the now
      deprecated item
    
    For any library that denies deprecated items but has deprecated items
    of its own, this is a [breaking-change]
    
    I had originally intended for the lint to ignore uses of deprecated items that are declared in the same crate, but this goes against some previous test cases that expect the lint to capture *all* uses of deprecated items, so I maintained the previous approach to avoid changing the expected behavior of the lint.
    
    Tested locally on OS X, so hopefully there aren't any deprecated item uses behind a `cfg` that I may have missed.

commit cdfff9db35d037c51dfd5c2bac2174f651294adb
Author:     Corey Richardson &lt;corey@octayn.net&gt;
AuthorDate: Tue Jan 6 00:56:30 2015 -0500
Commit:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
CommitDate: Tue Mar 3 12:09:07 2015 +0100

    rustc: implement arithmetic overflow checking
    
    Adds overflow checking to integer addition, multiplication, and subtraction
    when `-Z force-overflow-checks` is true, or if `--cfg ndebug` is not passed to
    the compiler. On overflow, it panics with `arithmetic operation overflowed`.
    Also adds `overflowing_add`, `overflowing_sub`, and `overflowing_mul`
    intrinsics for doing unchecked arithmetic.
    
    [breaking-change]

commit 76e9fa63ba0b6d892aa880db9c8373ede3e67c03
Author:     Brian Anderson &lt;banderson@mozilla.com&gt;
AuthorDate: Thu Feb 19 21:05:35 2015 -0800
Commit:     Brian Anderson &lt;banderson@mozilla.com&gt;
CommitDate: Mon Mar 2 16:12:46 2015 -0800

    core: Audit num module for int/uint
    
    * count_ones/zeros, trailing_ones/zeros return u32, not usize
    * rotate_left/right take u32, not usize
    * RADIX, MANTISSA_DIGITS, DIGITS, BITS, BYTES are u32, not usize
    
    Doesn't touch pow because there's another PR for it.
    
    [breaking-change]

commit 2b03718618d66e7e672663230be1ee857d3fb89a
Author:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
AuthorDate: Sat Feb 28 23:24:05 2015 -0800
Commit:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
CommitDate: Mon Mar 2 15:35:48 2015 -0800

    Enable recursion for visit_ty in lint visitor
    
    * The lint visitor's visit_ty method did not recurse, and had a
      reference to the now closed #10894
    * The newly enabled recursion has only affected the `deprectated` lint
      which now detects uses of deprecated items in trait impls and
      function return types
    * Renamed some references to `CowString` and `CowVec` to `Cow&lt;str&gt;` and
      `Cow&lt;[T]&gt;`, respectively, which appear outside of the crate which
      defines them
    * Replaced a few instances of `InvariantType&lt;T&gt;` with
      `PhantomData&lt;Cell&lt;T&gt;&gt;`
    * Disabled the `deprecated` lint in several places that
      reference/implement traits on deprecated items which will get cleaned
      up in the future
    * Disabled the `exceeding_bitshifts` lint for
      compile-fail/huge-array-simple test so it doesn't shadow the expected
      error on 32bit systems
    * Unfortunately, this means that if a library declares
      `#![deny(deprecated)]` and marks anything as deprecated, it will have
      to disable the lint for any uses of said item, e.g. any impl the now
      deprecated item
    
    For any library that denies deprecated items but has deprecated items
    of its own, this is a [breaking-change]

commit f35f973cb700c444d8c029ee13b37dc16d560225
Author:     Florian Zeitz &lt;florob@babelmonkeys.de&gt;
AuthorDate: Fri Feb 27 15:36:53 2015 +0100
Commit:     Florian Zeitz &lt;florob@babelmonkeys.de&gt;
CommitDate: Mon Mar 2 17:11:51 2015 +0100

    Use `const`s instead of `static`s where appropriate
    
    This changes the type of some public constants/statics in libunicode.
    Notably some `&amp;'static &amp;'static [(char, char)]` have changed
    to `&amp;'static [(char, char)]`. The regexp crate seems to be the
    sole user of these, yet this is technically a [breaking-change]

commit 93613a543f0cae68ea82e6a66b9b9cdfa13b673e
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Feb 27 16:23:21 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Sun Mar 1 20:41:37 2015 -0800

    std: Stabilize the `process` module
    
    This commits blanket marks the API of the `std::process` module as `#[stable]`.
    The module's API is very similar to the old `std::old_io::process` API and has
    generally had quite a bit of time to bake both before and after the new module
    landed.
    
    The one modification made to the API is that `Stdio::capture` is now named
    `stdio::piped`.
    
    [breaking-change]

commit ef8b20a564bab2050403f2f5c1dab90e0941adf7
Merge: 85bdb31 2fc6224
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Mon Mar 2 03:53:54 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Mon Mar 2 03:53:54 2015 +0530

    Rollup merge of #22821 - ipetkov:lint-method-rename, r=eddyb
    
     Traits can have associated types and not just methods. This
    clarification reflects the the type of the input the method accepts.
    
    [breaking-change]

commit 157614249594f187f421cd97f928e64c5ab5c1fa
Merge: 0eb0ba3 d79e910
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Mar 1 14:22:58 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Mar 1 14:22:58 2015 +0000

    Auto merge of #22880 - alexcrichton:deprecate-io-extensions, r=huonw
    
    The `u64_from_be_bytes` and `u64_to_be_bytes` functions are being deprecated
    with no replacement for now.
    
    [breaking-change]

commit d9fb9765a13d44f051cae9a9a7d010621b8e42cb
Merge: 9dc9fcc d11b48c
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sun Mar 1 01:19:26 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Sun Mar 1 09:49:48 2015 +0530

    Rollup merge of #22907 - dotdash:static_assert_bool, r=eddyb
    
     static_assert is documented as working on static with type `bool`, but
    we currently accept it on any const static and crash when the const has
    an non-integral type.
    
    This is a breaking-change for anyone who used static_assert on types
    likes i32, which happened to work but seems like an unintended
    consequence of the missing error checking.
    
    [breaking-change]
    
    Fixes #22056

commit 2fc62244113d01e9524ed712210ba52e8471e2a9
Author:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
AuthorDate: Sat Feb 28 13:56:37 2015 -0800
Commit:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
CommitDate: Sat Feb 28 13:56:37 2015 -0800

    Rename LintPass::check_trait_method to check_trait_item
    
    Traits can have associated types and not just methods. This
    clarification reflects the the type of the input the method accepts.
    
    [breaking-change]

commit d11b48c85c1cceb559ab8a08815ba3f7b3312c44
Author:     Bjrn Steinbrink &lt;bsteinbr@gmail.com&gt;
AuthorDate: Sat Feb 28 19:22:24 2015 +0100
Commit:     Bjrn Steinbrink &lt;bsteinbr@gmail.com&gt;
CommitDate: Sat Feb 28 19:28:49 2015 +0100

    Error out when using static_assert on a non-boolean value
    
    static_assert is documented as working on static with type `bool`, but
    we currently accept it on any const static and crash when the const has
    an non-integral type.
    
    This is a breaking-change for anyone who used static_assert on types
    likes i32, which happened to work but seems like an unintended
    consequence of the missing error checking.
    
    [breaking-change]
    
    Fixes #22056

commit 040a811b9190d2c2c595e09b5d1db07bedffdde9
Merge: 37760c1 7ad2e22
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sat Feb 28 13:56:29 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Sat Feb 28 19:19:00 2015 +0530

    Rollup merge of #22884 - japaric:obsolete, r=alexcrichton
    
     This is leftover from #21843
    
    If you still have `|&amp;:| {}` closures in your code, simply remove the `&amp;:` part.
    
    [breaking-change]

commit 37760c1f25fc55814a92cce1c98edefdc0740188
Merge: a0f5ed9 f66a3f7
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sat Feb 28 13:56:15 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Sat Feb 28 19:18:59 2015 +0530

    Rollup merge of #22875 - kmcallister:maceager, r=sfackler
    
     MacEager is a MacResult implementation for the common case where you've already built each form of AST that you might return.
    
    Fixes #17637. Based on #18814.
    
    This is a [breaking-change] for syntax extensions:
    
      * MacExpr::new becomes MacEager::expr.
    
      * MacPat::new becomes MacEager::pat.
    
      * MacItems::new becomes MacEager::items. It takes a SmallVector directly,
        not an iterator.
    
    r? @sfackler

commit 48aeaba9347a25b2e3848e0dcbc1d8f6b0076718
Merge: 1c93934 3909253
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Feb 28 06:06:18 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Feb 28 06:06:18 2015 +0000

    Auto merge of #22801 - huonw:crateify-lint, r=kmcallister
    
    This pulls out the implementations of most built-in lints into a
    separate crate, to reduce edit-compile-test iteration times with
    librustc_lint and increase parallelism. This should enable lints to be
    refactored, added and deleted much more easily as it slashes the
    edit-compile cycle to get a minimal working compiler to test with (`make
    rustc-stage1`) from
    
        librustc -&gt; librustc_typeck -&gt; ... -&gt; librustc_driver -&gt;
            libcore -&gt; ... -&gt; libstd
    
    to
    
        librustc_lint -&gt; librustc_driver -&gt; libcore -&gt; ... libstd
    
    which is significantly faster, mainly due to avoiding the librustc build
    itself.
    
    The intention would be to move as much as possible of the infrastructure
    into the crate too, but the plumbing is deeply intertwined with librustc
    itself at the moment. Also, there are lints for which diagnostics are
    registered directly in the compiler code, not in their own crate
    traversal, and their definitions have to remain in librustc.
    
    This is a [breaking-change] for direct users of the compiler APIs:
    callers of `rustc::session::build_session` or
    `rustc::session::build_session_` need to manually call
    `rustc_lint::register_builtins` on their return value.
    
    This should make #22206 easier.

commit 532cd5f85a93921f74f5991db2e419c6da58b188
Author:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
AuthorDate: Wed Feb 25 22:44:44 2015 +1100
Commit:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
CommitDate: Sat Feb 28 15:33:59 2015 +1100

    Separate most of rustc::lint::builtin into a separate crate.
    
    This pulls out the implementations of most built-in lints into a
    separate crate, to reduce edit-compile-test iteration times with
    librustc_lint and increase parallelism. This should enable lints to be
    refactored, added and deleted much more easily as it slashes the
    edit-compile cycle to get a minimal working compiler to test with (`make
    rustc-stage1`) from
    
        librustc -&gt; librustc_typeck -&gt; ... -&gt; librustc_driver -&gt;
            libcore -&gt; ... -&gt; libstd
    
    to
    
        librustc_lint -&gt; librustc_driver -&gt; libcore -&gt; ... libstd
    
    which is significantly faster, mainly due to avoiding the librustc build
    itself.
    
    The intention would be to move as much as possible of the infrastructure
    into the crate too, but the plumbing is deeply intertwined with librustc
    itself at the moment. Also, there are lints for which diagnostics are
    registered directly in the compiler code, not in their own crate
    traversal, and their definitions have to remain in librustc.
    
    This is a [breaking-change] for direct users of the compiler APIs:
    callers of `rustc::session::build_session` or
    `rustc::session::build_session_` need to manually call
    `rustc_lint::register_builtins` on their return value.
    
    This should make #22206 easier.

commit d79e91033770fc5a760d34511769f5ba6c872c77
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Feb 27 15:46:02 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Feb 27 16:26:33 2015 -0800

    std: Deprecated the `old_io::extensions` module
    
    The `u64_from_be_bytes` and `u64_to_be_bytes` functions are being deprecated
    with no replacement for now.
    
    [breaking-change]

commit f66a3f7bba378d4a308e02a860a11ab5f9f8e4ad
Author:     Keegan McAllister &lt;kmcallister@mozilla.com&gt;
AuthorDate: Fri Feb 27 11:14:42 2015 -0800
Commit:     Keegan McAllister &lt;kmcallister@mozilla.com&gt;
CommitDate: Fri Feb 27 11:17:05 2015 -0800

    Replace MacExpr / MacPat / MacItems with MacEager
    
    MacEager is a MacResult implementation for the common case where you've already
    built each form of AST that you might return.
    
    Fixes #17637. Based on #18814.
    
    This is a [breaking-change] for syntax extensions:
    
      * MacExpr::new becomes MacEager::expr.
    
      * MacPat::new becomes MacEager::pat.
    
      * MacItems::new becomes MacEager::items. It takes a SmallVector directly,
        not an iterator.

commit ce5f1b3216be790be590ad71eabccc16c9b86c74
Merge: ef80ade 07dc8d6
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Feb 27 11:44:19 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Feb 27 22:07:03 2015 +0530

    Rollup merge of #22817 - jmesmon:result-or-type, r=huonw
    
     Changes .or() so that it can return a Result with a different E type
    than the one it is called on.
    
    Essentially:
    
        fn or(self, res: Result&lt;T, E&gt;) -&gt; Result&lt;T, E&gt;
    
    becomes
    
        fn or&lt;F&gt;(self, res: Result&lt;T, F&gt;) -&gt; Result&lt;T, F&gt;
    
    This brings `or` in line with the existing `and` &amp; `or_else`
    
    This is a
    [breaking-change]
    Due to some code needing additional type annotations.

commit 91569a95f16580f05f9dcb4b6d6eff50203cdde8
Merge: fb92e31 18878b1
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Feb 27 11:43:57 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Feb 27 22:07:02 2015 +0530

    Rollup merge of #22795 - alexcrichton:issue-22617, r=huonw
    
     Keeps the method consistent with `Iterator::any`.
    
    Closes #22617
    [breaking-change]

commit 07dc8d67c92017f950eef3951ec901cb2a3add7e
Author:     Cody P Schafer &lt;dev@codyps.com&gt;
AuthorDate: Wed Feb 25 13:37:22 2015 -0500
Commit:     Cody P Schafer &lt;dev@codyps.com&gt;
CommitDate: Wed Feb 25 17:38:28 2015 -0500

    Result::or : avoid over-specializing the type
    
    Changes .or() so that it can return a Result with a different E type
    than the one it is called on.
    
    Essentially:
    
        fn or(self, res: Result&lt;T, E&gt;) -&gt; Result&lt;T, E&gt;
    
    becomes
    
        fn or&lt;F&gt;(self, res: Result&lt;T, F&gt;) -&gt; Result&lt;T, F&gt;
    
    This brings `or` in line with the existing `and` and `or_else` member
    types.
    
    This is a
    [breaking-change]
    Due to some code needing additional type annotations.

commit 18878b155ebf3c70445f2a461582475f5ef72c92
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 24 21:52:27 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 24 22:04:21 2015 -0800

    std: Require `&amp;mut self` for Iterator::all
    
    Keeps the method consistent with `Iterator::any`.
    
    Closes #22617
    [breaking-change]

commit 6c6f2317bae63261123cd94ebe214e80fb6ad78e
Merge: b18584c ab45694
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Wed Feb 25 10:29:46 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Wed Feb 25 10:29:46 2015 +0530

    Rollup merge of #22729 - alexcrichton:ptr-stabilization, r=aturon
    
     Specifically, the following actions were takend:
    
    * The `copy_memory` and `copy_nonoverlapping_memory` functions
      to drop the `_memory` suffix (as it's implied by the functionality). Both
      functions are now marked as `#[stable]`.
    * The `set_memory` function was renamed to `write_bytes` and is now stable.
    * The `zero_memory` function is now deprecated in favor of `write_bytes`
      directly.
    * The `Unique` pointer type is now behind its own feature gate called `unique`
      to facilitate future stabilization.
    
    [breaking-change]

commit b18584cbd942e2559e718d6318fdbc494e9047bd
Merge: 7b7cf84 2d200c9
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Wed Feb 25 10:29:39 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Wed Feb 25 10:29:39 2015 +0530

    Rollup merge of #22727 - alexcrichton:prep-env, r=aturon
    
     This commit moves `std::env` away from the `std::old_io` error type as well as
    the `std::old_path` module. Methods returning an error now return `io::Error`
    and methods consuming or returning paths use `std::path` instead of
    `std::old_path`. This commit does not yet mark these APIs as `#[stable]`.
    
    This commit also migrates `std::old_io::TempDir` to `std::fs::TempDir` with
    essentially the exact same API. This type was added to interoperate with the new
    path API and has its own `tempdir` feature.
    
    Finally, this commit reverts the deprecation of `std::os` APIs returning the old
    path API types. This deprecation can come back once the entire `std::old_path`
    module is deprecated.
    
    [breaking-change]

commit 24fc50d29545e7ea89320d3c9544cd9043894d7d
Merge: 9692f3b 27f8708
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Wed Feb 25 10:27:11 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Wed Feb 25 10:27:11 2015 +0530

    Rollup merge of #22783 - alexcrichton:deprecate-taskpool, r=alexcrichton
    
     Rather than stabilize on the current API, we're going to punt this
    concern to crates.io, to allow for faster iteration.
    
    [breaking-change]

commit 2d200c9c8bd6659720a68ab8dd74218b1e58c1e9
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Feb 23 10:59:17 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 24 15:27:42 2015 -0800

    std: Move std::env to the new I/O APIs
    
    This commit moves `std::env` away from the `std::old_io` error type as well as
    the `std::old_path` module. Methods returning an error now return `io::Error`
    and methods consuming or returning paths use `std::path` instead of
    `std::old_path`. This commit does not yet mark these APIs as `#[stable]`.
    
    This commit also migrates `std::old_io::TempDir` to `std::fs::TempDir` with
    essentially the exact same API. This type was added to interoperate with the new
    path API and has its own `tempdir` feature.
    
    Finally, this commit reverts the deprecation of `std::os` APIs returning the old
    path API types. This deprecation can come back once the entire `std::old_path`
    module is deprecated.
    
    [breaking-change]

commit ab45694198356ae78972025e0d3beece297431d1
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Feb 23 11:39:16 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 24 14:22:33 2015 -0800

    std: Stabilize some `ptr` functions
    
    Specifically, the following actions were taken:
    
    * The `copy_memory` and `copy_nonoverlapping_memory` functions
      to drop the `_memory` suffix (as it's implied by the functionality). Both
      functions are now marked as `#[stable]`.
    * The `set_memory` function was renamed to `write_bytes` and is now stable.
    * The `zero_memory` function is now deprecated in favor of `write_bytes`
      directly.
    * The `Unique` pointer type is now behind its own feature gate called `unique`
      to facilitate future stabilization.
    * All type parameters now are `T: ?Sized` wherever possible and new clauses were
      added to the `offset` functions to require that the type is sized.
    
    [breaking-change]

commit 0bd15657d93c932611f3aee351b6521cdfa77731
Merge: c9ace05 0c6d1f3
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Feb 24 17:56:09 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Feb 24 17:56:09 2015 +0000

    Auto merge of #22172 - eddyb:almost-there, r=nikomatsakis
    
    Adds `&lt;module::Type&gt;::method` support and makes `module::Type::method` a shorthand for it.
    This is most of #16293, except that chaining multiple associated types is not yet supported.
    It also fixes #22563 as `impl`s are no longer treated as modules in resolve.
    
    Unfortunately, this is still a *[breaking-change]*:
    * If you used a global path to a primitive type, i.e. `::bool`, `::i32` etc. - that was a bug I had to fix.
    Solution: remove the leading `::`.
    * If you passed explicit `impl`-side type parameters to an inherent method, e.g.:
    ```rust
    struct Foo&lt;T&gt;(T);
    impl&lt;A, B&gt; Foo&lt;(A, B)&gt; {
        fn pair(a: A, b: B) -&gt; Foo&lt;(A, B)&gt; { Foo((a, b)) }
    }
    Foo::&lt;A, B&gt;::pair(a, b)
    // Now that is sugar for:
    &lt;Foo&lt;A, B&gt;&gt;::pair(a, b)
    // Which isn't valid because `Foo` has only one type parameter.
    // Solution: replace with:
    Foo::&lt;(A, B)&gt;::pair(a, b)
    // And, if possible, remove the explicit type param entirely:
    Foo::pair(a, b)
    ```
    * If you used the `QPath`-related `AstBuilder` methods @hugwijst added in #21943.
    The methods still exist, but `QPath` was replaced by `QSelf`, with the actual path stored separately.
    Solution: unpack the pair returned by `cx.qpath` to get the two arguments for `cx.expr_qpath`.

commit 717a91d6651598994834d056c69e6c4bf2b74b9f
Author:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
AuthorDate: Mon Feb 23 11:07:37 2015 -0800
Commit:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
CommitDate: Mon Feb 23 11:07:37 2015 -0800

    Update missing-docs lint to check associated type declarations
    
    [breaking-change]
    
    Fixes #20648

commit 67eb38ee4cfd7b28f8498b5b6492da172768dcb9
Merge: dcc6ce2 c8dd2d0
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Feb 22 22:45:46 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Feb 22 22:45:46 2015 +0000

    Auto merge of #22466 - Kimundi:str_pattern_ai_safe, r=aturon
    
    This is not a complete implementation of the RFC:
    
    - only existing methods got updated, no new ones added
    - doc comments are not extensive enough yet
    - optimizations got lost and need to be reimplemented
    
    See https://github.com/rust-lang/rfcs/pull/528
    
    Technically a
    
    [breaking-change]

commit 98ec45ee0b5f38f06b4ac5adfb9aff198f157bdd
Merge: 9fe2d21 be0dc49
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sun Feb 22 01:50:53 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Sun Feb 22 01:50:53 2015 +0530

    Rollup merge of #22542 - ipetkov:unsafe-lint, r=huonw
    
     This allows warning or forbidding all uses of unsafe code, whereas
    previously only unsafe blocks were caught by the lint.
    
    The lint has been renamed from `unsafe-blocks` to `unsafe-code` to
    reflect its new purpose.
    
    This is a minor [breaking-change]
    
    Closes #22430

commit be0dc49675ff38b4bc2e73f68bff298168bc6875
Author:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
AuthorDate: Thu Feb 19 10:04:56 2015 -0800
Commit:     Ivan Petkov &lt;ivanppetkov@gmail.com&gt;
CommitDate: Thu Feb 19 20:43:09 2015 -0800

    Unsafe lint will also check for other unsafe code
    
    Checks include declaration/implementation of unsafe functions, traits,
    and methods.
    
    This allows warning or forbidding all uses of unsafe code, whereas
    previously only unsafe blocks were caught by the lint.
    
    The lint has been renamed from `unsafe-blocks` to `unsafe-code` to
    reflect its new purpose.
    
    This is a minor [breaking-change]
    
    Closes #22430

commit a99e698628cbd396c8100ef776d10ac61d911847
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Feb 11 23:16:32 2015 -0800
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Wed Feb 18 15:23:58 2015 -0800

    Stabilize std::borrow
    
    This commit stabilizes `std::borrow`, making the following modifications
    to catch up the API with language changes:
    
    * It renames `BorrowFrom` to `Borrow`, as was originally intended (but
      blocked for technical reasons), and reorders the parameters
      accordingly.
    
    * It moves the type parameter of `ToOwned` to an associated type. This
      is somewhat less flexible, in that each borrowed type must have a
      unique owned type, but leads to a significant simplification for
      `Cow`. Flexibility can be regained by using newtyped slices, which is
      advisable for other reasons anyway.
    
    * It removes the owned type parameter from `Cow`, making the type much
      less verbose.
    
    * Deprecates the `is_owned` and `is_borrowed` predicates in favor of
      direct matching.
    
    The above API changes are relatively minor; the basic functionality
    remains the same, and essentially the whole module is now marked
    `#[stable]`.
    
    [breaking-change]

commit f3657170b1cbe80393d9ccde8608872f7bdc68f2
Merge: 9774b7e 1860ee5
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Feb 18 14:32:10 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Feb 18 14:32:10 2015 -0800

    rollup merge of #22482: alexcrichton/cstr-changes
    
    This commit is an implementation of [RFC 592][r592] and [RFC 840][r840]. These
    two RFCs tweak the behavior of `CString` and add a new `CStr` unsized slice type
    to the module.
    
    [r592]: https://github.com/rust-lang/rfcs/blob/master/text/0592-c-str-deref.md
    [r840]: https://github.com/rust-lang/rfcs/blob/master/text/0840-no-panic-in-c-string.md
    
    The new `CStr` type is only constructable via two methods:
    
    1. By `deref`'ing from a `CString`
    2. Unsafely via `CStr::from_ptr`
    
    The purpose of `CStr` is to be an unsized type which is a thin pointer to a
    `libc::c_char` (currently it is a fat pointer slice due to implementation
    limitations). Strings from C can be safely represented with a `CStr` and an
    appropriate lifetime as well. Consumers of `&amp;CString` should now consume `&amp;CStr`
    instead to allow producers to pass in C-originating strings instead of just
    Rust-allocated strings.
    
    A new constructor was added to `CString`, `new`, which takes `T: IntoBytes`
    instead of separate `from_slice` and `from_vec` methods (both have been
    deprecated in favor of `new`). The `new` method returns a `Result` instead of
    panicking.  The error variant contains the relevant information about where the
    error happened and bytes (if present). Conversions are provided to the
    `io::Error` and `old_io::IoError` types via the `FromError` trait which
    translate to `InvalidInput`.
    
    This is a breaking change due to the modification of existing `#[unstable]` APIs
    and new deprecation, and more detailed information can be found in the two RFCs.
    Notable breakage includes:
    
    * All construction of `CString` now needs to use `new` and handle the outgoing
      `Result`.
    * Usage of `CString` as a byte slice now explicitly needs a `.as_bytes()` call.
    * The `as_slice*` methods have been removed in favor of just having the
      `as_bytes*` methods.
    
    Closes #22469
    Closes #22470
    [breaking-change]

commit 9774b7e64b7ff8323b4f8160cc38eb793f447217
Merge: 261364d f83e23a
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Feb 18 14:32:03 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Feb 18 14:32:03 2015 -0800

    rollup merge of #22480: alexcrichton/hashv3
    
    This commit is an implementation of [RFC 823][rfc] which is another pass over
    the `std::hash` module for stabilization. The contents of the module were not
    entirely marked stable, but some portions which remained quite similar to the
    previous incarnation are now marked `#[stable]`. Specifically:
    
    [rfc]: https://github.com/rust-lang/rfcs/blob/master/text/0823-hash-simplification.md
    
    * `std::hash` is now stable (the name)
    * `Hash` is now stable
    * `Hash::hash` is now stable
    * `Hasher` is now stable
    * `SipHasher` is now stable
    * `SipHasher::new` and `new_with_keys` are now stable
    * `Hasher for SipHasher` is now stable
    * Many `Hash` implementations are now stable
    
    All other portions of the `hash` module remain `#[unstable]` as they are less
    commonly used and were recently redesigned.
    
    This commit is a breaking change due to the modifications to the `std::hash` API
    and more details can be found on the [RFC][rfc].
    
    Closes #22467
    [breaking-change]

commit 1860ee521aa6096eb7f5410a64b53311fb0d2d0e
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 22:47:40 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Feb 18 14:15:43 2015 -0800

    std: Implement CString-related RFCs
    
    This commit is an implementation of [RFC 592][r592] and [RFC 840][r840]. These
    two RFCs tweak the behavior of `CString` and add a new `CStr` unsized slice type
    to the module.
    
    [r592]: https://github.com/rust-lang/rfcs/blob/master/text/0592-c-str-deref.md
    [r840]: https://github.com/rust-lang/rfcs/blob/master/text/0840-no-panic-in-c-string.md
    
    The new `CStr` type is only constructable via two methods:
    
    1. By `deref`'ing from a `CString`
    2. Unsafely via `CStr::from_ptr`
    
    The purpose of `CStr` is to be an unsized type which is a thin pointer to a
    `libc::c_char` (currently it is a fat pointer slice due to implementation
    limitations). Strings from C can be safely represented with a `CStr` and an
    appropriate lifetime as well. Consumers of `&amp;CString` should now consume `&amp;CStr`
    instead to allow producers to pass in C-originating strings instead of just
    Rust-allocated strings.
    
    A new constructor was added to `CString`, `new`, which takes `T: IntoBytes`
    instead of separate `from_slice` and `from_vec` methods (both have been
    deprecated in favor of `new`). The `new` method returns a `Result` instead of
    panicking.  The error variant contains the relevant information about where the
    error happened and bytes (if present). Conversions are provided to the
    `io::Error` and `old_io::IoError` types via the `FromError` trait which
    translate to `InvalidInput`.
    
    This is a breaking change due to the modification of existing `#[unstable]` APIs
    and new deprecation, and more detailed information can be found in the two RFCs.
    Notable breakage includes:
    
    * All construction of `CString` now needs to use `new` and handle the outgoing
      `Result`.
    * Usage of `CString` as a byte slice now explicitly needs a `.as_bytes()` call.
    * The `as_slice*` methods have been removed in favor of just having the
      `as_bytes*` methods.
    
    Closes #22469
    Closes #22470
    [breaking-change]

commit 66613e26b95438c02e2f5c273c557515454121f7
Author:     Alexis &lt;a.beingessner@gmail.com&gt;
AuthorDate: Wed Feb 18 13:06:21 2015 -0500
Commit:     Alexis &lt;a.beingessner@gmail.com&gt;
CommitDate: Wed Feb 18 14:01:47 2015 -0500

    make FromIterator use IntoIterator
    
    This breaks all implementors of FromIterator, as they must now accept IntoIterator instead of Iterator. The fix for this is generally trivial (change the bound, and maybe call into_iter() on the argument to get the old argument).
    
    Users of FromIterator should be unaffected because Iterators are IntoIterator.
    
    [breaking-change]

commit 4a9d190423f67a00053f4b5c9869f0ccbdfcc689
Author:     Alexis &lt;a.beingessner@gmail.com&gt;
AuthorDate: Wed Feb 18 10:04:30 2015 -0500
Commit:     Alexis &lt;a.beingessner@gmail.com&gt;
CommitDate: Wed Feb 18 14:01:47 2015 -0500

    make Extend use IntoIterator
    
    This breaks all implementors of Extend, as they must now accept IntoIterator instead of Iterator. The fix for this is generally trivial (change the bound, and maybe call into_iter() on the argument to get the old argument).
    
    Users of Extend should be unaffected because Iterators are IntoIterator.
    
    [breaking-change]

commit 5fa9de16df87ab844452821acff1b6c74e948327
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Tue Feb 17 23:44:55 2015 -0800
Commit:     Alexis &lt;a.beingessner@gmail.com&gt;
CommitDate: Wed Feb 18 14:01:46 2015 -0500

    Implement RFC 580
    
    This commit implements RFC 580 by renaming:
    
    * DList -&gt; LinkedList
    * Bitv -&gt; BitVec
    * BitvSet -&gt; BitSet
    * RingBuf -&gt; VecDeque
    
    More details are in [the
    RFC](https://github.com/rust-lang/rfcs/pull/580)
    
    [breaking-change]

commit f83e23ad7c464c242c2d7ace7212d323980b2bca
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 20:48:07 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Feb 18 08:26:20 2015 -0800

    std: Stabilize the `hash` module
    
    This commit is an implementation of [RFC 823][rfc] which is another pass over
    the `std::hash` module for stabilization. The contents of the module were not
    entirely marked stable, but some portions which remained quite similar to the
    previous incarnation are now marked `#[stable]`. Specifically:
    
    [rfc]: https://github.com/rust-lang/rfcs/blob/master/text/0823-hash-simplification.md
    
    * `std::hash` is now stable (the name)
    * `Hash` is now stable
    * `Hash::hash` is now stable
    * `Hasher` is now stable
    * `SipHasher` is now stable
    * `SipHasher::new` and `new_with_keys` are now stable
    * `Hasher for SipHasher` is now stable
    * Many `Hash` implementations are now stable
    
    All other portions of the `hash` module remain `#[unstable]` as they are less
    commonly used and were recently redesigned.
    
    This commit is a breaking change due to the modifications to the `std::hash` API
    and more details can be found on the [RFC][rfc].
    
    Closes #22467
    [breaking-change]

commit eca2453a02548042fcb7082063149367a3343dd7
Merge: 5be2b89 4a9dd3f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 15:13:53 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 17 15:13:53 2015 -0800

    rollup merge of #22208: aturon/expose-more-path
    
    This commit exposes the `is_sep` function and `MAIN_SEP` constant, as
    well as Windows path prefixes. The path prefix enum is safely exposed on
    all platforms, but it only yielded as a component for Windows.
    
    Exposing the prefix enum as part of prefix components involved changing
    the type from `OsStr` to the `Prefix` enum, which is a:
    
    [breaking-change]

commit 5be2b8964c624ee619d2f8518215d3a3b13514e1
Merge: 311fc36 6f5944b
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 15:13:46 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 17 15:13:46 2015 -0800

    rollup merge of #22191: nagisa/target-ptr-width-json
    
    This aligns json target specification to match terminology used elsewhere in the code base.
    
    [breaking-change] for custom target json users. Change all appearances of target-word-size
    to target-pointer-width.

commit f492095eb4ac061f1b4898b92880095d23dc9c86
Merge: 096b105 235f35b
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 15:13:20 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 17 15:13:20 2015 -0800

    rollup merge of #22024: alexcrichton/ascii
    
    * Move the type parameter on the `AsciiExt` trait to an associated type named
      `Owned`.
    * Move `ascii::escape_default` to using an iterator.
    
    This is a breaking change due to the removal of the type parameter on the
    `AsciiExt` trait as well as the modifications to the `escape_default` function
    to returning an iterator. Manual implementations of `AsciiExt` (or `AsciiExt`
    bounds) should be adjusted to remove the type parameter and using the new
    `escape_default` should be relatively straightforward.
    
    [breaking-change]

commit d8f8f7a58c7c8b3352c1c577347865f5a823fee3
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Tue Feb 17 01:08:53 2015 -0800
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Tue Feb 17 14:33:29 2015 -0800

    Revise std::thread semantics
    
    This commit makes several changes to `std::thread` in preparation for
    final stabilization:
    
    * It removes the ability to handle panics from `scoped` children; see
      #20807 for discussion
    
    * It adds a `JoinHandle` structure, now returned from `spawn`, which
      makes it possible to join on children that do not share data from
      their parent's stack. The child is automatically detached when the
      handle is dropped, and the handle cannot be copied due to Posix
      semantics.
    
    * It moves all static methods from `std::thread::Thread` to free
      functions in `std::thread`. This was done in part because, due to the
      above changes, there are effectively no direct `Thread` constructors,
      and the static methods have tended to feel a bit awkward.
    
    * Adds an `io::Result` around the `Builder` methods `scoped` and
      `spawn`, making it possible to handle OS errors when creating
      threads. The convenience free functions entail an unwrap.
    
    * Stabilizes the entire module. Despite the fact that the API is
      changing somewhat here, this is part of a long period of baking and
      the changes are addressing all known issues prior to alpha2. If
      absolutely necessary, further breaking changes can be made prior to beta.
    
    Closes #20807
    
    [breaking-change]

commit a2ebb24ee6cc76791ef834cb2d17ecac95756499
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 11:05:44 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 17 14:02:45 2015 -0800

    std: Rename io/path features with old_ prefix
    
    This commit renames the features for the `std::old_io` and `std::old_path`
    modules to `old_io` and `old_path` to help facilitate migration to the new APIs.
    
    This is a breaking change as crates which mention the old feature names now need
    to be renamed to use the new feature names.
    
    [breaking-change]

commit 235f35b0b724a38a5583112825d46f50c5dde980
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Feb 17 13:58:34 2015 -0800
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Feb 17 13:58:34 2015 -0800

    std: Stabilize the `ascii` module
    
    This commit performs a stabilization pass over the `std::ascii` module taking
    the following actions:
    
    * the module name is now stable
    * `AsciiExt` is now stable after moving its type parameter to an `Owned`
      associated type
    * `AsciiExt::is_ascii` is now stable
    * `AsciiExt::to_ascii_uppercase` is now stable
    * `AsciiExt::to_ascii_lowercase` is now stable
    * `AsciiExt::eq_ignore_ascii_case` is now stable
    * `AsciiExt::make_ascii_uppercase` is added to possibly replace
      `OwnedAsciiExt::into_ascii_uppercase` (similarly for lowercase variants).
    * `escape_default` now returns an iterator and is stable
    * `EscapeDefault` is now stable
    
    Trait implementations are now also marked stable.
    
    Primarily it is still unstable to *implement* the `AsciiExt` trait due to it
    containing some unstable methods.
    
    [breaking-change]

commit f9aeea7cb7865a2b82e7102837daabbe549177ea
Merge: f1bb6c2 bc9084b
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Feb 17 15:55:55 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Feb 17 15:55:55 2015 +0000

    Auto merge of #22311 - lfairy:consistent-fmt, r=alexcrichton
    
    This brings it in line with its namesake in `std::io`.
    
    [breaking-change]
    
    r? @aturon

commit 020e4e4ad981ce0518bd8e3464ac592717c41143
Merge: 0e89228 dc0797c
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Feb 17 15:54:25 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Feb 17 17:33:20 2015 +0530

    Rollup merge of #22383 - pnkfelix:pass-features-along-during-expansion, r=huonw
    
     Pass features along during expansion
    
    Use the set of passed features to detect uses of feature-gated macros without the corresponding feature enabled.
    
    Fix #22234.
    
    ----
    
    Also, the framework this add (passing along a reference to the features in the expansion context) is a necessary precursor for landing a properly feature-gated desugaring-based overloaded-`box` and placement-`in` (#22181).
    
    ----
    
    This is fixing a bug, but since there might be code out there that is unknowingly taking advantage of that bug, I feel obligated to mark this as a:
    
    [breaking-change]

commit bf52f2eef578e6fff83611a6276a3aa9f284e1c5
Merge: 4647d89 bc9084b
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Feb 17 15:52:01 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Feb 17 17:33:20 2015 +0530

    Rollup merge of #22311 - lfairy:consistent-fmt, r=alexcrichton
    
     This brings it in line with its namesake in `std::io`.
    
    [breaking-change]
    
    r? @aturon

commit 4647d89205992383f8122e8fde0e2615497572bc
Merge: 1a1ac6c f64d71b
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Feb 17 15:51:53 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Feb 17 17:33:19 2015 +0530

    Rollup merge of #22364 - Manishearth:rfc-572-forbid-attr, r=nikomatsakis
    
     fixes #22203
    
    r? @nikomatsakis
    
    This breaks code that might be using attributes randomly, so it's technically a
    
    [breaking-change]

commit d264ef2b11683337c24cfb16e0335ab386df02ab
Merge: e337a57 e727378
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Mon Feb 16 11:30:21 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Feb 17 06:23:40 2015 +0530

    Rollup merge of #22313 - japaric:iter, r=aturon
    
     `IntoIterator` now has an extra associated item:
    
    ``` rust
    trait IntoIterator {
        type Item;
        type IntoIter: Iterator&lt;Self=Self::Item&gt;;
    }
    ```
    
    This lets you bind the iterator \"`Item`\" directly when writing generic functions:
    
    ``` rust
    // hypothetical change, not included in this PR
    impl Extend&lt;T&gt; for Vec&lt;T&gt; {
        // you can now write
        fn extend&lt;I&gt;(&amp;mut self, it: I) where I: IntoIterator&lt;Item=T&gt; { .. }
        // instead of
        fn extend&lt;I: IntoIterator&gt;(&amp;mut self, it: I) where I::IntoIter: Iterator&lt;Item=T&gt; { .. }
    }
    ```
    
    The downside is that now you have to write an extra associated type in your `IntoIterator` implementations:
    
    ``` diff
     impl&lt;T&gt; IntoIterator for Vec&lt;T&gt; {
    +    type Item = T;
         type IntoIter = IntoIter&lt;T&gt;;
    
         fn into_iter(self) -&gt; IntoIter&lt;T&gt; { .. }
     }
    ```
    
    Because this breaks all downstream implementations of `IntoIterator`, this is a [breaking-change]
    
    ---
    
    r? @aturon

commit efd2a1780b2ee1909e84df0c3b398adb024ee375
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Feb 16 16:33:55 2015 -0800
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Feb 16 16:42:06 2015 -0800

    Deprecate std::sync::TaskPool
    
    Rather than stabilize on the current API, we're going to punt this
    concern to crates.io, to allow for faster iteration.
    
    If you need this functionality, you might look at https://github.com/carllerche/syncbox
    
    [breaking-change]

commit 4a9dd3f8403f84ad518b0119fa2312c379df5dd7
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Feb 11 16:57:23 2015 -0800
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Feb 16 13:53:09 2015 -0800

    Expose more of std::path
    
    This commit exposes the `is_sep` function and `MAIN_SEP` constant, as
    well as Windows path prefixes. The path prefix enum is safely exposed on
    all platforms, but it only yielded as a component for Windows.
    
    Exposing the prefix enum as part of prefix components involved changing
    the type from `OsStr` to the `Prefix` enum, which is a:
    
    [breaking-change]

commit f58a1bfa981eee4ba4d4c3c801f94772e4ab0019
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Thu Feb 12 10:41:47 2015 -0500
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Mon Feb 16 10:55:37 2015 -0500

    Fix fallout in libsyntax from RFC 599. Clarity and efficiency seems to be mostly improved, to my eye.
    Nonetheless, as this commit demonstrates, the previous commits was a [breaking-change].
    
    In practice, breakage is focused on functions of this form:
    
    ```rust
    fn foo(..., object: Box&lt;FnMut()&gt;)
    ````
    
    where `FnMut()` could be any trait object type. The older scheme defaulted objects in argument
    position so that they were bounded by a fresh lifetime:
    
    ```rust
    fn foo&lt;'a&gt;(..., object: Box&lt;FnMut()+'a&gt;)
    ```
    
    This meant that the object could contain borrowed data. The newer
    scheme defaults to a lifetime bound of `'static`:
    
    ```rust
    fn foo(..., object: Box&lt;FnMut()+'static&gt;)
    ```
    
    This means that the object cannot contain borrowed data. In some cases, the best fix
    is to stop using `Box`:
    
    ```rust
    fn foo(..., object: &amp;mut FnMut())
    ```
    
    but another option is to write an explicit annotation for the `'a`
    lifetime that used to be implicit.  Both fixes are demonstrated in
    this commit.

commit 16b24f15bd042c4f97e1d4826d82c992c0228684
Merge: ed728ec dcd4cef
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sun Feb 15 18:36:20 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Sun Feb 15 18:42:48 2015 +0530

    Rollup merge of #22285 - kmcallister:pub-macro, r=nick29581
    
     It's not clear what this means, because a macro in item position can expand to zero or more items.  For now we disallow it, which is technically a
    
        [breaking-change]
    
    but is landing without an RFC.  The `pub` keyword previously had no effect, which seems quite unintended.
    
    Fixes #18317.
    Fixes #14660.

commit f7870b6faa43a9e63b5575d5d9663457003a8ac5
Merge: 8acaaa9 b1cd769
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sun Feb 15 18:34:18 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Sun Feb 15 18:42:47 2015 +0530

    Rollup merge of #22339 - petrochenkov:int, r=huonw
    
     Some function signatures have changed, so this is a [breaking-change].
    In particular, radixes and numerical values of digits are represented by `u32` now.
    
    Part of #22240
</pre></body></html>
