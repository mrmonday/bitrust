<!DOCTYPE html><html><head>
<title>BitRust - Breaking Changes in rust-lang/rust</title>
</head><body><pre>
commit 50141d7e1e5b1b539d45240dff709fa68e7472c2
Merge: 8b37055 b51e009
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Aug 11 03:47:16 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Aug 11 03:47:16 2015 +0000

    Auto merge of #26818 - sfackler:duration-stabilization, r=aturon
    
    This commit stabilizes the `std::time` module and the `Duration` type.
    `Duration::span` remains unstable, and the `Display` implementation for
    `Duration` has been removed as it is still being reworked and all trait
    implementations for stable types are de facto stable.
    
    This is a [breaking-change] to those using `Duration`'s `Display`
    implementation.
    
    I'm opening this PR as a platform for discussion - there may be some method renaming to do as part of the stabilization process.

commit 999bdeca88a06938ac1e1c608091d3afe4d7e173
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Sun Jul 5 23:20:00 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Mon Aug 10 20:04:18 2015 -0400

    Stabilize the Duration API
    
    This commit stabilizes the `std::time` module and the `Duration` type.
    `Duration::span` remains unstable, and the `Display` implementation for
    `Duration` has been removed as it is still being reworked and all trait
    implementations for stable types are de facto stable.
    
    This is a [breaking-change] to those using `Duration`'s `Display`
    implementation.

commit 87055a68c3194db212456f99ece080728a5fc2f8
Merge: f97a82f 3e954a8
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Jul 30 10:25:23 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Jul 30 10:25:23 2015 +0000

    Auto merge of #27371 - Gankro:str-clone, r=alexcrichton
    
    This is a minor [breaking-change], as it changes what
    `boxed_str.to_owned()` does (previously it would deref to `&amp;str` and
    call `to_owned` on that to get a `String`). However `Box&lt;str&gt;` is such an
    exceptionally rare type that this is not expected to be a serious
    concern. Also a `Box&lt;str&gt;` can be freely converted to a `String` to
    obtain the previous result anyway.

commit 3e954a8cb2fd094d79713059d83d37b2daa7b396
Author:     Alexis Beingessner &lt;a.beingessner@gmail.com&gt;
AuthorDate: Mon Jul 27 09:06:00 2015 -0700
Commit:     Alexis Beingessner &lt;a.beingessner@gmail.com&gt;
CommitDate: Wed Jul 29 18:43:01 2015 -0700

    implement Clone for Box&lt;str&gt;, closes #27323
    
    This is a minor [breaking-change], as it changes what
    `boxed_str.to_owned()` does (previously it would deref to `&amp;str` and
    call `to_owned` on that to get a `String`). However `Box&lt;str&gt;` is such an
    exceptionally rare type that this is not expected to be a serious
    concern. Also a `Box&lt;str&gt;` can be freely converted to a `String` to
    obtain the previous behaviour anyway.

commit d576ef3d7be3efe28f902bbb3b2197f4553db412
Merge: 4b4119d e99b53e
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Jul 29 06:47:55 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Jul 29 06:47:55 2015 +0000

    Auto merge of #27261 - arielb1:drop-sanity-check, r=pnkfelix
    
    This fixes multiple bugs, and as several of these are soundness issue, is a [breaking-change].
    
    r? @pnkfelix

commit 55ede7ed8e4f3752c371f7d04da4695ba9aa1c26
Merge: ba9224f 00a5e66
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Jul 28 21:14:28 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Jul 28 21:14:28 2015 +0000

    Auto merge of #27234 - oli-obk:move_get_name_get_ident_to_impl, r=eddyb
    
    this has quite some fallout. but also made lots of stuff more readable imo
    
    [breaking-change] for plugin authors

commit 757b0c176fa185fda59283efaf0d8079b702ca69
Author:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
AuthorDate: Tue Jul 28 16:52:54 2015 +0300
Commit:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
CommitDate: Tue Jul 28 19:51:08 2015 +0300

    prohibit the lhs of an @-pattern being a constant
    
    as this breaks code that worked under some conditions, this is a
    [breaking-change]
    
    Fixes #27033
    Fixes #27077

commit 661a5ad38e79f336976b529aa717871d177ab7ed
Merge: ec49d01 b4dd765
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Jul 28 15:15:00 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Jul 28 15:15:00 2015 +0000

    Auto merge of #26173 - pnkfelix:fsk-trans-nzmove-take3, r=nikomatsakis
    
    Add dropflag hints (stack-local booleans) for unfragmented paths in trans.  Part of #5016.
    
    Added code to maintain these hints at runtime, and to conditionalize drop-filling and calls to destructors.
    
    In this early stage of my incremental implementation strategy, we are using hints, so we are always free to leave out a flag for a path -- then we just pass `None` as the dropflag hint in the corresponding schedule cleanup call. But, once a path has a hint, we must at least maintain it: i.e. if the hint exists, we must ensure it is never set to "moved" if the data in question might actually have been initialized. It remains sound to conservatively set the hint to "initialized" as long as the true drop-flag embedded in the value itself is up-to-date.
    
    I hope the commit series has been broken up to be readable; most of the commits in the series should build (though I did not always check this).
    
    ----
    
    Oh, I think this technically qualifies as a:
    [breaking-change]
    because it removes drop-filling in some cases where one could previously observe it. That should only affect `unsafe` code; no safe code should be able to inspect whether the drop-fill was present or not. For an example of code that needed to change to account for this, see commit a81c24ae0216ab47df59acd724f8a33124fb6d97 (a unit test of the `move_val_init` intrinsic).  I have not encountered actual code that needed to be updated to account for the change, since this should only be skipping the drop-filling on *moved* values, not on dropped one, and so even types that use `unsafe_no_drop_flag` should be unchanged by this particular PR. (Their time will come later.)

commit bfbc7bc45d66ba7be8ab2ba60316cb1e303f4544
Author:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
AuthorDate: Fri Jul 24 01:38:42 2015 +0300
Commit:     Ariel Ben-Yehuda &lt;ariel.byd@gmail.com&gt;
CommitDate: Fri Jul 24 23:46:17 2015 +0300

    handle all type variants correctly in dropck
    
    This fixes a few soundness bugs in dropck, so to anyone who relied on them,
    this is a
    [breaking-change]
    
    Fixes #24086.
    Fixes #25389.
    Fixes #25598.
    Fixes #25750.
    Fixes #26641.
    Fixes #26657.
    Fixes #27240.
    Fixes #27241.

commit 18557500cb91596f3614d4cf65439f8c5f47b2e0
Merge: 39d4faf 0ca8e49
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Jul 20 16:38:33 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Jul 20 16:38:33 2015 +0000

    Auto merge of #27026 - nagisa:overflowing-unsigned, r=pnkfelix
    
    This commit fixes the negate_unsigned feature gate to appropriately
    account for inferred variables.
    
    This is technically a [breaking-change], but Iâ€™d consider it a bug fix.
    
    cc @brson for your relnotes.
    
    Fixes https://github.com/rust-lang/rust/issues/24676
    Fixes #26840
    Fixes https://github.com/rust-lang/rust/issues/25206

commit e05ac3938bcbdd616930bb010a3bbfa35f22850e
Merge: d4432b3 de6b3c2
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Jul 17 18:35:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Jul 17 18:35:50 2015 +0000

    Auto merge of #27045 - nikomatsakis:better-object-defaults-error, r=pnkfelix
    
    Transition to the new object lifetime defaults, replacing the old defaults completely.
    
    r? @pnkfelix
    
    This is a [breaking-change] as specified by [RFC 1156][1156] (though all cases that would break should have been receiving warnings starting in Rust 1.2). Types like `&amp;'a Box&lt;Trait&gt;` (or `&amp;'a Rc&lt;Trait&gt;`, etc) will change from being interpreted as `&amp;'a Box&lt;Trait+'a&gt;` to `&amp;'a Box&lt;Trait+'static&gt;`. To restore the old behavior, write the `+'a` explicitly. For example, the function:
    
    
    ```rust
    trait Trait { }
    fn foo(x: &amp;Box&lt;Trait&gt;) { ... }
    ```
    
    would be rewritten as:
    
    ```rust
    trait Trait { }
    fn foo(x: &amp;'a Box&lt;Trait+'a&gt;) { ... }
    ```
    
    if one wanted to preserve the current typing.
    
    [1156]: https://github.com/rust-lang/rfcs/blob/master/text/1156-adjust-default-object-bounds.md

commit 0c9e3dc75cf2b2d122af0596225594240ed254eb
Author:     Simonas Kazlauskas &lt;git@kazlauskas.me&gt;
AuthorDate: Tue Jul 14 01:03:24 2015 +0300
Commit:     Simonas Kazlauskas &lt;git@kazlauskas.me&gt;
CommitDate: Tue Jul 14 21:48:43 2015 +0300

    Fix negate_unsigned feature gate check
    
    This commit fixes the negate_unsigned feature gate to appropriately
    account for infered variables.
    
    This is technically a [breaking-change].

commit 6b27005f2f8b20834838828588233b877a29d509
Author:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
AuthorDate: Tue Jun 30 20:30:47 2015 +0300
Commit:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
CommitDate: Sat Jul 4 14:09:26 2015 +0300

    require reimplementations of all items when a defaulted associated type is overriden
    
    This is a
    [breaking-change]
    but it follows the RFC (not sure whether it will be accepted).

commit f027bdc1c8a133693651f333624b756abe21960f
Merge: 7b14838 a18d984
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Jul 3 21:31:46 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Jul 3 21:31:46 2015 +0000

    Auto merge of #26378 - arielb1:unused-mut, r=pnkfelix
    
    This makes it somewhat more aggressive, so this is kind-of a [breaking-change] for these compiling with `#[deny(unused_mut)]`.
    
    r? @pnkfelix

commit 31d9aee68499cba8d1a5332b841eca5c67991001
Merge: 4a788a2 5133606
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Jun 22 00:11:00 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Jun 22 00:11:00 2015 +0000

    Auto merge of #26394 - arielb1:implement-rfc401-part2, r=nrc
    
    This makes them compliant with the new version of RFC 401 (i.e.
        RFC 1052).
    
    Fixes #26391. I *hope* the tests I have are enough.
    
    This is a [breaking-change]
    
    r? @nrc

commit ea7637ebc0e5d325ccf0537a8013316c2ed78108
Author:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
AuthorDate: Thu Jun 18 15:51:06 2015 +0300
Commit:     Ariel Ben-Yehuda &lt;arielb1@mail.tau.ac.il&gt;
CommitDate: Thu Jun 18 15:51:06 2015 +0300

    Prohibit casts between fat pointers to different traits
    
    This makes them compliant with the new version of RFC 401 (i.e.
        RFC 1052).
    
    Fixes #26391. I *hope* the tests I have are enough.
    
    This is a [breaking-change]

commit 713d9176adc5072afdf0934dc95b868995e867c0
Merge: 8af39ce 957935a
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Jun 17 22:50:17 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Jun 17 22:50:17 2015 +0000

    Auto merge of #26326 - nikomatsakis:optimize-fulfillment-cache-in-tcx, r=pcwalton
    
    When we successfully resolve a trait reference with no type/lifetime parameters, like `i32: Foo` or `Box&lt;u32&gt;: Sized`, this is in fact globally true. This patch adds a simple global to the tcx to cache such cases. The main advantage of this is really about caching things like `Box&lt;Vec&lt;Foo&gt;&gt;: Sized`. It also points to the need to revamp our caching infrastructure -- the current caches make selection cost cheaper, but we still wind up paying a high cost in the confirmation process, and in particular unrolling out dependent obligations. Moreover, we should probably do caching more uniformly and with a key that takes the where-clauses into account. But that's for later.
    
    For me, this shows up as a reasonably nice win (20%) on Servo's script crate (when built in dev mode). This is not as big as my initial measurements suggested, I think because I was building my rustc with more debugging enabled at the time. I've not yet done follow-up profiling and so forth to see where the new hot spots are. Bootstrap times seem to be largely unaffected.
    
    cc @pcwalton
    
    This is technically a [breaking-change] in that functions with unsatisfiable where-clauses may now yield errors where before they may have been accepted. Even before, these functions could never have been *called* by actual code. In the future, such functions will probably become illegal altogether, but in this commit they are still accepted, so long as they do not rely on the unsatisfiable where-clauses. As before, the functions still cannot be called in any case.

commit 73fb19c04ac227fe2aad2c618f76b6eb05dd7ec9
Merge: a53a098 3ca4d92
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Jun 15 19:52:15 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Jun 15 19:52:15 2015 +0000

    Auto merge of #26275 - arielb1:unconstrained-projection, r=nikomatsakis
    
    Fixes #26262
    
    Because this rejects code that previously compiled, this is a [breaking-change]
    
    r? @nikomatsakis

commit 7517ecf4fc9cfe2adff8a38ecc2ef660692a4b5b
Merge: a54a809 a7bbd7d
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Jun 15 06:44:42 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Jun 15 06:44:42 2015 +0000

    Auto merge of #26168 - sfackler:stdout-panic, r=alexcrichton
    
    Closes #25977
    
    The various `stdfoo_raw` methods in std::io now return `io::Result`s,
    since they may not exist on Windows. They will always return `Ok` on
    Unix-like platforms.
    
    [breaking-change]

commit a7bbd7da4eb98127104fdfd415ad6c746f7e2a12
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Tue Jun 9 21:39:36 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Sun Jun 14 20:17:06 2015 -0700

    Implement RFC 1014
    
    Closes #25977
    
    The various `stdfoo_raw` methods in std::io now return `io::Result`s,
    since they may not exist on Windows. They will always return `Ok` on
    Unix-like platforms.
    
    [breaking-change]

commit 7648776503040b302fe0589311fb27afe7c1e6cc
Merge: 400e955 3be18f0
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Jun 12 00:00:27 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Jun 12 00:00:27 2015 +0000

    Auto merge of #26225 - arielb1:raw-self, r=eddyb
    
    This can't be made to work with the current setup.
    
    Technically a [breaking-change], but a simple bug fix.
    
    Fixes #26194.

commit b70f49b86fa4d8780f46e869880e84e1c24c2f19
Merge: 9a2f68e 5235065
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Jun 3 18:21:09 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Jun 3 18:21:09 2015 +0000

    Auto merge of #24910 - steveklabnik:remove_static_assert, r=alexcrichton
    
    This was always a weird feature, and isn't being used in the compiler.
    Static assertions should be done better than this.
    
    Fixes #13951
    Fixes #23008
    Fixes #6676
    
    This is behind a feature gate, but that's still a
    
    [breaking-change]
    
    (It's not entirely clear to me that this should or shouldn't have an RFC, but if it does, I'm fine blocking on such a thing.)

commit 5235065d740cad78ab55a89299fc1f5d32bf8f46
Author:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
AuthorDate: Tue Apr 28 16:45:22 2015 -0400
Commit:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
CommitDate: Wed Jun 3 09:38:13 2015 -0400

    Remove #[static_assert]
    
    This was always a weird feature, and isn't being used in the compiler.
    Static assertions should be done better than this.
    
    This implements RFC #1096.
    
    Fixes #13951
    Fixes #23008
    Fixes #6676
    
    This is behind a feature gate, but that's still a
    
    [breaking-change]

commit 32211e1d27c258c62cafb6ba357e67db932367bf
Author:     Ulrik Sverdrup &lt;root@localhost&gt;
AuthorDate: Sat May 30 22:03:57 2015 +0200
Commit:     Ulrik Sverdrup &lt;root@localhost&gt;
CommitDate: Sat May 30 22:15:40 2015 +0200

    Mark Arc function get_mut and method make_unique unsafe
    
    This is a temporary mitigation for issue #24880 which points out that
    these functions are racy in a particular situation where weak pointers
    exist.
    
    To mitigate this, mark the functions unsafe until this can be fixed or
    another decision is made.
    
    This is a breaking change to unstable API, because the new version
    requires an `unsafe` block. Review carefully if weak pointers may race
    for any uses of this API and consider abandoning it.
    
    [breaking-change]

commit bd85983d059151c9ef07dbd11a35f1d16463eb94
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Sun May 17 13:17:26 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Sun May 17 17:33:29 2015 -0700

    Make debug builders take &amp;mut self, add entries method
    
    [breaking-change]

commit c23a9d42ea082830593a73d25821842baf9ccf33
Merge: 2da9efe 8cc9878
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun May 17 00:05:34 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun May 17 00:05:34 2015 +0000

    Auto merge of #25387 - eddyb:syn-file-loader, r=nikomatsakis
    
    This allows compiling entire crates from memory or preprocessing source files before they are tokenized.
    
    Minor API refactoring included, which is a [breaking-change] for libsyntax users:
    * `ParseSess::{next_node_id, reserve_node_ids}` moved to rustc's `Session`
    * `new_parse_sess` -&gt; `ParseSess::new`
    * `new_parse_sess_special_handler` -&gt; `ParseSess::with_span_handler`
    * `mk_span_handler` -&gt; `SpanHandler::new`
    * `default_handler` -&gt; `Handler::new`
    * `mk_handler` -&gt; `Handler::with_emitter`
    * `string_to_filemap(sess source, path)` -&gt; `sess.codemap().new_filemap(path, source)`

commit 67ba6dcf68860d8a20891faad88a33b35ed58df5
Merge: 4979423 1aecd17
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat May 9 14:56:56 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat May 9 14:56:56 2015 +0000

    Auto merge of #24612 - lifthrasiir:flt2dec, r=pnkfelix
    
    This is a direct port of my prior work on the float formatting. The detailed description is available [here](https://github.com/lifthrasiir/rust-strconv#flt2dec). In brief,
    
    * This adds a new hidden module `core::num::flt2dec` for testing from `libcoretest`. Why is it in `core::num` instead of `core::fmt`? Because I envision that the table used by `flt2dec` is directly applicable to `dec2flt` (cf. #24557) as well, which exceeds the realm of "formatting".
    * This contains both Dragon4 algorithm (exact, complete but slow) and Grisu3 algorithm (exact, fast but incomplete).
    * The code is accompanied with a large amount of self-tests and some exhaustive tests. In particular, `libcoretest` gets a new dependency on `librand`. For the external interface it relies on the existing test suite.
    * It is known that, in the best case, the entire formatting code has about 30 KBs of binary overhead (judged from strconv experiments). Not too bad but there might be a potential room for improvements.
    
    This is rather large code. I did my best to comment and annotate the code, but you have been warned.
    
    For the maximal availability the original code was licensed in CC0, but I've also dual-licensed it in MIT/Apache as well so there should be no licensing concern.
    
    This is [breaking-change] as it changes the float output slightly (and it also affects the casing of `inf` and `nan`). I hope this is not a big deal though :)
    
    Fixes #7030, #18038 and #24556. Also related to #6220 and #20870.
    
    ## Known Issues
    
    - [x] I've yet to finish `make check-stage1`. It does pass main test suites including `run-pass` but there might be some unknown edges on the doctests.
    - [ ] Figure out how this PR affects rustc.
    - [ ] Determine which internal routine is mapped to the formatting specifier. Depending on the decision, some internal routine can be safely removed (for instance, currently `to_shortest_str` is unused).

commit 3906edf41e8faa0610daea954ffbda39841fbc0d
Merge: 95400c5 8654dfb
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat May 9 09:20:43 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat May 9 09:20:43 2015 +0000

    Auto merge of #25212 - pnkfelix:dropck-box-trait, r=nikomatsakis
    
    dropck: must assume `Box&lt;Trait + 'a&gt;` has a destructor of interest.
    
    Fix #25199.
    
    This detail was documented in [RFC 769]; the implementation was just missing.
    
    [breaking-change]
    
    The breakage here falls into both obvious and non-obvious cases.
    
    The obvious case: if you were relying on the unsoundness this exposes (namely being able to reference dead storage from a destructor, by doing it via a boxed trait object bounded by the lifetime of the dead storage), then this change disallows that.
    
    The non-obvious cases: The way dropck works, it causes lifetimes to be extended to longer extents than they covered before. I.e.  lifetimes that are attached as trait-bounds may become longer than they were previously.
    
    * This includes lifetimes that are only *implicitly* attached as trait-bounds (due to [RFC 599]). So you may have code that was e.g. taking a parameter of type `&amp;'a Box&lt;Trait&gt;` (which expands to `&amp;'a Box&lt;Trait+'a&gt;`), that now may need to be assigned type `&amp;'a Box&lt;Trait+'static&gt;` to ensure that `'a` is not inadvertantly inferred to a region that is actually too long.  (See commit ee06263 for an example of this.)
    
    [RFC 769]: https://github.com/rust-lang/rfcs/blob/master/text/0769-sound-generic-drop.md#the-drop-check-rule
    
    [RFC 599]: https://github.com/rust-lang/rfcs/blob/master/text/0599-default-object-bound.md

commit b5b5a177588c0e8dfc6b9e79540bcbd1eeb9ef91
Author:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
AuthorDate: Fri May 8 15:06:16 2015 +0200
Commit:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
CommitDate: Fri May 8 15:06:16 2015 +0200

    dropck: must assume `Box&lt;Trait + 'a&gt;` has a destructor of interest.
    
    Implements this (previously overlooked) note from [RFC 769]:
    
    &gt; (Note: When encountering a D of the form `Box&lt;Trait+'b&gt;`, we
    &gt; conservatively assume that such a type has a Drop implementation
    &gt; parametric in 'b.)
    
    Fix #25199.
    
    [breaking-change]
    
    The breakage here falls into both obvious and non-obvious cases.
    
    The obvious case: if you were relying on the unsoundness this exposes
    (namely being able to reference dead storage from a destructor, by
    doing it via a boxed trait object bounded by the lifetime of the dead
    storage), then this change disallows that.
    
    The non-obvious cases: The way dropck works, it causes lifetimes to be
    extended to longer extents than they covered before. I.e.  lifetimes
    that are attached as trait-bounds may become longer than they were
    previously.
    
    * This includes lifetimes that are only *implicitly* attached as
      trait-bounds (due to [RFC 599]). So you may have code that was
      e.g. taking a parameter of type `&amp;'a Box&lt;Trait&gt;` (which expands to
      `&amp;'a Box&lt;Trait+'a&gt;`), that now may need to be assigned type `&amp;'a
      Box&lt;Trait+'static&gt;` to ensure that `'a` is not inadvertantly
      inferred to a region that is actually too long.  (See earlier commit
      in this PR for an example of this.)
    
    [RFC 769]: https://github.com/rust-lang/rfcs/blob/master/text/0769-sound-generic-drop.md#the-drop-check-rule
    
    [RFC 599]: https://github.com/rust-lang/rfcs/blob/master/text/0599-default-object-bound.md

commit 5ae026e8923d71d16a4d2b9a592bbcab92d8723a
Merge: f0ac7e0 8d3f84e
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu May 7 21:45:11 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu May 7 21:45:11 2015 +0000

    Auto merge of #25157 - alexcrichton:remove-vec-add, r=aturon
    
    Ideally this trait implementation would be unstable, requiring crates to opt-in
    if they would like the functionality, but that's not currently how stability
    works so the implementation needs to be removed entirely.
    
    This may come back at a future date, but for now the conservative option is to
    remove it.
    
    [breaking-change]

commit 8d3f84e235b22688dd1592cfb86f31459a79ac5f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed May 6 10:51:10 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed May 6 10:52:34 2015 -0700

    std: Remove addition on vectors for now
    
    Ideally this trait implementation would be unstable, requiring crates to opt-in
    if they would like the functionality, but that's not currently how stability
    works so the implementation needs to be removed entirely.
    
    This may come back at a future date, but for now the conservative option is to
    remove it.
    
    [breaking-change]

commit d131f335579b8c080a2416a65ca703169fae560b
Author:     Sean McArthur &lt;sean.monstar@gmail.com&gt;
AuthorDate: Mon Apr 13 14:49:10 2015 -0700
Commit:     Sean McArthur &lt;sean.monstar@gmail.com&gt;
CommitDate: Tue May 5 22:26:23 2015 -0700

    lint: deny transmuting from immutable to mutable, since it's undefined behavior
    
    [breaking-change] Technically breaking, since code that had been using
    these transmutes before will no longer compile. However, it was
    undefined behavior, so really, it's a good thing. Fixing your code would
    require some re-working to use an UnsafeCell instead.
    
    Closes #13146

commit 5aa9f38285b47e2eadaaac0e343da90b922994f1
Author:     Kang Seonghoon &lt;public+git@mearie.org&gt;
AuthorDate: Mon Apr 20 01:36:55 2015 +0900
Commit:     Kang Seonghoon &lt;public+git@mearie.org&gt;
CommitDate: Wed May 6 14:21:41 2015 +0900

    core: made the core formatter to use a new flt2dec.
    
    As a side effect `core::fmt::float` is gone now. This also slightly
    changes the float output, so this is:
    
    [breaking-change]

commit eae692e375cec222803efb7175c79fedc228eea9
Merge: 6cd7486 db477ee
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue May 5 18:18:27 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue May 5 18:18:27 2015 +0000

    Auto merge of #25009 - alexcrichton:less-buffered-stream, r=aturon
    
    As pointed out in #17136 the semantics of a `BufStream` aren't always what one
    expects, and it looks like other [languages like C#][c-sharp] implement a
    buffered stream with only one underlying buffer. For now this commit
    destabilizes the primitive in the `std::io` module to give us some more time in
    figuring out what to do with it.
    
    [c-sharp]: https://msdn.microsoft.com/en-us/library/system.io.bufferedstream%28v=vs.110%29.aspx
    
    [breaking-change]

commit f6574c5b0404f55c4dd4056be47d37eff33684b5
Merge: f3345cb b1976f1
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri May 1 22:54:09 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri May 1 22:54:09 2015 +0000

    Auto merge of #25006 - alexcrichton:unstable-indexing, r=aturon
    
    These implementations were intended to be unstable, but currently the stability
    attributes cannot handle a stable trait with an unstable `impl` block. This
    commit also audits the rest of the standard library for explicitly-`#[unstable]`
    impl blocks. No others were removed but some annotations were changed to
    `#[stable]` as they're defacto stable anyway.
    
    One particularly interesting `impl` marked `#[stable]` as part of this commit
    is the `Add&lt;&amp;[T]&gt;` impl for `Vec&lt;T&gt;`, which uses `push_all` and implicitly
    clones all elements of the vector provided.
    
    Closes #24791
    
    [breaking-change]

commit 5c710b593b429d39ea01375172a9ce968f43ab26
Merge: c634ec2 a576262
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri May 1 04:22:53 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri May 1 04:22:53 2015 +0000

    Auto merge of #24793 - aturon:io-error-any, r=alexcrichton
    
    This commit brings the `Error` trait in line with the [Error interoperation
    RFC](https://github.com/rust-lang/rfcs/pull/201) by adding downcasting,
    which has long been intended. This change means that for any `Error`
    trait objects that are `'static`, you can downcast to concrete error
    types.
    
    To make this work, it is necessary for `Error` to inherit from
    `Reflect` (which is currently used to mark concrete types as "permitted
    for reflection, aka downcasting"). This is a breaking change: it means
    that impls like
    
    ```rust
    impl&lt;T&gt; Error for MyErrorType&lt;T&gt; { ... }
    ```
    
    must change to
    
    ```rust
    impl&lt;T: Reflect&gt; Error for MyErrorType&lt;T&gt; { ... }
    ```
    
    This commit furthermore marks `Reflect` as stable, since we are already
    essentially committed to it via `Any`. Note that in the future, if we
    determine that the parametricity aspects of `Reflect` are not needed, we
    can deprecate the trait and provide a blanket implementation for it
    for *all* types (rather than by using OIBIT), which would allow all
    mentions of `Reflect` to be dropped over time. So there is not a strong
    commitment here.
    
    [breaking-change]
    
    r? @alexcrichton

commit a5762625a168f195afbc5b74d674a93f8c692a8e
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Fri Apr 24 14:34:57 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Thu Apr 30 18:20:22 2015 -0700

    Add downcasting to std::error::Error
    
    This commit brings the `Error` trait in line with the [Error interoperation
    RFC](https://github.com/rust-lang/rfcs/pull/201) by adding downcasting,
    which has long been intended. This change means that for any `Error`
    trait objects that are `'static`, you can downcast to concrete error
    types.
    
    To make this work, it is necessary for `Error` to inherit from
    `Reflect` (which is currently used to mark concrete types as "permitted
    for reflection, aka downcasting"). This is a breaking change: it means
    that impls like
    
    ```rust
    impl&lt;T&gt; Error for MyErrorType&lt;T&gt; { ... }
    ```
    
    must change to something like
    
    ```rust
    impl&lt;T: Reflect&gt; Error for MyErrorType&lt;T&gt; { ... }
    ```
    
    except that `Reflect` is currently unstable (and should remain so for
    the time being). For now, code can instead bound by `Any`:
    
    ```rust
    impl&lt;T: Any&gt; Error for MyErrorType&lt;T&gt; { ... }
    ```
    
    which *is* stable and has `Reflect` as a super trait. The downside is
    that this imposes a `'static` constraint, but that only
    constrains *when* `Error` is implemented -- it does not actually
    constrain the types that can implement `Error`.
    
    [breaking-change]

commit db477eef72924c7b34e9617627eaae37c71bdc1c
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Apr 30 15:45:48 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Apr 30 16:02:58 2015 -0700

    std: Destabilize io::BufStream
    
    As pointed out in #17136 the semantics of a `BufStream` aren't always what one
    expects, and it looks like other [languages like C#][c-sharp] implement a
    buffered stream with only one underlying buffer. For now this commit
    destabilizes the primitive in the `std::io` module to give us some more time in
    figuring out what to do with it.
    
    [c-sharp]: https://msdn.microsoft.com/en-us/library/system.io.bufferedstream%28v=vs.110%29.aspx
    
    [breaking-change]

commit 441b3f0c26c2e30ddb012be968141da7ce7d9d62
Merge: d8b64c7 1f79348
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Apr 28 17:12:36 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Apr 28 17:12:36 2015 +0000

    Auto merge of #24906 - pnkfelix:fsk-fix-24895, r=alexcrichton
    
    dropck: Remove `Copy` from special-cased traits
    
    Fix #24895.
    
    [breaking-change]
    
    What does this break?  Basically, code that implements `Drop` and is
    using `T:Copy` for one of its type parameters and is relying on the
    Drop Check rule not applying to it.
    
    Here is an example:
    
    ```rust
    #![allow(dead_code,unused_variables,unused_assignments)]
    struct D&lt;T:Copy&gt;(T);
    impl&lt;T:Copy&gt; Drop for D&lt;T&gt; { fn drop(&amp;mut self) { } }
    
    trait UserT { fn c(&amp;self) { } }
    impl&lt;T:Copy&gt; UserT for T { }
    struct E&lt;T:UserT&gt;(T);
    impl&lt;T:UserT&gt; Drop for E&lt;T&gt; { fn drop(&amp;mut self) { } }
    
    // This one will start breaking.
    fn foo() { let (d2, d1); d1 = D(34); d2 = D(&amp;d1); }
    
    #[cfg(this_one_does_and_should_always_break)]
    fn bar() { let (e2, e1); e1 = E(34); e2 = E(&amp;e1); }
    
    fn main() {
        foo();
    }
    ```

commit b892264ea4f048feb5f380d3e659d82ba463f5b7
Author:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
AuthorDate: Tue Apr 28 17:47:16 2015 +0200
Commit:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
CommitDate: Tue Apr 28 17:47:16 2015 +0200

    Fix #24895.
    
    [breaking-change]
    
    What does this break?  Basically, code that implements `Drop` and is
    using `T:Copy` for one of its type parameters and is relying on the
    Drop Check rule not applying to it.
    
    Here is an example:
    
    ```rust
    #![allow(dead_code,unused_variables,unused_assignments)]
    struct D&lt;T:Copy&gt;(T);
    impl&lt;T:Copy&gt; Drop for D&lt;T&gt; { fn drop(&amp;mut self) { } }
    
    trait UserT { fn c(&amp;self) { } }
    impl&lt;T:Copy&gt; UserT for T { }
    struct E&lt;T:UserT&gt;(T);
    impl&lt;T:UserT&gt; Drop for E&lt;T&gt; { fn drop(&amp;mut self) { } }
    
    // This one will start breaking.
    fn foo() { let (d2, d1); d1 = D(34); d2 = D(&amp;d1); }
    
    #[cfg(this_one_does_and_should_always_break)]
    fn bar() { let (e2, e1); e1 = E(34); e2 = E(&amp;e1); }
    
    fn main() {
        foo();
    }
    ```

commit b475fc7d6aa1cafa91790c273908fddfb669a82e
Author:     Ulrik Sverdrup &lt;root@localhost&gt;
AuthorDate: Mon Apr 27 19:37:13 2015 +0200
Commit:     Ulrik Sverdrup &lt;root@localhost&gt;
CommitDate: Tue Apr 28 11:38:33 2015 +0200

    collections: Implement vec::drain(range) according to RFC 574
    
    Old `.drain()` on vec is performed using `.drain(..)` now.
    
    `.drain(range)` is unstable and under feature(collections_drain)
    
    [breaking-change]

commit 9c88f3be126d0fe02a92c20e1d78192f4b648401
Merge: 857ef6e 805349a
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Apr 27 20:46:48 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Apr 27 20:46:48 2015 +0000

    Auto merge of #24765 - pnkfelix:fsk-enum-swapindrop, r=nikomatsakis
    
    Inspect enum discriminant *after* calling its destructor
    
    Includes some drive-by cleanup (e.g. changed some field and method names to reflect fill-on-drop; added comments about zero-variant enums being classified as `_match::Single`).
    
    Probably the most invasive change was the expansion of the maps `available_drop_glues` and `drop_glues` to now hold two different kinds of drop glues; there is the (old) normal drop glue, and there is (new) drop-contents glue that jumps straight to dropping the contents of a struct or enum, skipping its destructor.
    
     * For all types that do not have user-defined Drop implementations, the normal glue is generated as usual (i.e. recursively dropping the fields of the data structure).
    
      (And this actually is exactly what the newly-added drop-contents glue does as well.)
    
     * For types that have user-defined Drop implementations, the "normal" drop glue now schedules a cleanup before invoking the `Drop::drop` method that will call the drop-contents glue after that invocation returns.
    
    Fix #23611.
    
    ----
    
    Is this a breaking change?  The prior behavior was totally unsound, and it seems unreasonable that anyone was actually relying on it.
    
    Nonetheless, since there is a user-visible change to the language semantics, I guess I will conservatively mark this as a:
    
    [breaking-change]
    
    (To see an example of what sort of user-visible change this causes, see the comments in the regression test.)

commit 6365080c5cd27b74ec87420c351a3e7bdcff988e
Merge: b0043db 24ef905
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Apr 26 09:52:28 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Apr 26 09:52:28 2015 +0000

    Auto merge of #23085 - goffrie:interpolating-quote, r=huonw
    
    This changes the `ToTokens` implementations for expressions, statements, etc. with almost-trivial ones that produce `Interpolated(*Nt(...))` pseudo-tokens. In this way, quasiquote now works the same way as macros do: already-parsed AST fragments are used as-is, not reparsed.
    
    The `ToSource` trait is removed. Quasiquote no longer involves pretty-printing at all, which removes the need for the `encode_with_hygiene` hack. All associated machinery is removed.
    
    New `Nonterminal`s are added: NtArm, NtImplItem, and NtTraitItem. These are just for quasiquote, not macros.
    
    `ToTokens` is no longer implemented for `Arg` (although this could be added again) and `Generics` (which I don't think makes sense).
    
    This breaks any compiler extensions that relied on the ability of `ToTokens` to turn AST fragments back into inspectable token trees. For this reason, this closes #16987.
    
    As such, this is a [breaking-change].
    
    Fixes #16472.
    Fixes #15962.
    Fixes #17397.
    Fixes #16617.

commit 2d9831dea598d8a45c69e8c799503e8a397aacc0
Author:     Geoffry Song &lt;goffrie@gmail.com&gt;
AuthorDate: Thu Mar 5 15:06:49 2015 -0500
Commit:     Geoffry Song &lt;goffrie@gmail.com&gt;
CommitDate: Sat Apr 25 21:42:10 2015 -0400

    Interpolate AST nodes in quasiquote.
    
    This changes the `ToTokens` implementations for expressions, statements,
    etc. with almost-trivial ones that produce `Interpolated(*Nt(...))`
    pseudo-tokens. In this way, quasiquote now works the same way as macros
    do: already-parsed AST fragments are used as-is, not reparsed.
    
    The `ToSource` trait is removed. Quasiquote no longer involves
    pretty-printing at all, which removes the need for the
    `encode_with_hygiene` hack. All associated machinery is removed.
    
    A new `Nonterminal` is added, NtArm, which the parser now interpolates.
    This is just for quasiquote, not macros (although it could be in the
    future).
    
    `ToTokens` is no longer implemented for `Arg` (although this could be
    added again) and `Generics` (which I don't think makes sense).
    
    This breaks any compiler extensions that relied on the ability of
    `ToTokens` to turn AST fragments back into inspectable token trees. For
    this reason, this closes #16987.
    
    As such, this is a [breaking-change].
    
    Fixes #16472.
    Fixes #15962.
    Fixes #17397.
    Fixes #16617.

commit 00c48d3779fb4c372d2dfe7a8654c6cd1e065511
Merge: 0d8309e 0ad48e4
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Apr 25 21:44:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Apr 25 21:44:50 2015 +0000

    Auto merge of #24547 - bombless:comma, r=pnkfelix
    
    Closes #20616
    It breaks code such as &lt;https://github.com/rust-lang/rust/blob/c64feb63418fd05bd6e5adc6f9ad763aa6a594b1/src/librustc_typeck/check/method/suggest.rs#L367&gt;, so this is a [breaking-change], you have to add missing comma after the last lifetime arguement now.

commit 98e9765d973d46faa5c80fb37a48040ca9e87b28
Merge: 44338cb 8f5b5f9
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Apr 21 15:28:06 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Apr 21 15:28:06 2015 -0700

    rollup merge of #24541: alexcrichton/issue-24538
    
    This is an implementation of [RFC 1030][rfc] which adds these traits to the
    prelude and additionally removes all inherent `into_iter` methods on collections
    in favor of the trait implementation (which is now accessible by default).
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/1030
    
    This is technically a breaking change due to the prelude additions and removal
    of inherent methods, but it is expected that essentially no code breaks in
    practice.
    
    [breaking-change]
    Closes #24538

commit eeb94886adccb3f13003f92f117115d17846ce1f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Apr 17 15:32:42 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Apr 21 11:37:43 2015 -0700

    std: Remove deprecated/unstable num functionality
    
    This commit removes all the old casting/generic traits from `std::num` that are
    no longer in use by the standard library. This additionally removes the old
    `strconv` module which has not seen much use in quite a long time. All generic
    functionality has been supplanted with traits in the `num` crate and the
    `strconv` module is supplanted with the [rust-strconv crate][rust-strconv].
    
    [rust-strconv]: https://github.com/lifthrasiir/rust-strconv
    
    This is a breaking change due to the removal of these deprecated crates, and the
    alternative crates are listed above.
    
    [breaking-change]

commit efa6a46a8eceb4ab792d5ec8e28cf3baaaa96491
Merge: 1284be4 9868529
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Apr 18 02:53:53 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Apr 18 02:53:53 2015 +0000

    Auto merge of #24133 - kballard:add-sync-to-io-error, r=alexcrichton
    
    This allows `io::Error` values to be stored in `Arc` properly.
    
    Because this requires `Sync` of any value passed to `io::Error::new()`
    and modifies the relevant `convert::From` impls, this is a
    
    [breaking-change]
    
    Fixes #24049.

commit 8f5b5f94dcdb9884737dfbc8efd893d1d70f0b14
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Apr 17 14:31:30 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Apr 17 16:37:30 2015 -0700

    std: Add Default/IntoIterator/ToOwned to the prelude
    
    This is an implementation of [RFC 1030][rfc] which adds these traits to the
    prelude and additionally removes all inherent `into_iter` methods on collections
    in favor of the trait implementation (which is now accessible by default).
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/1030
    
    This is technically a breaking change due to the prelude additions and removal
    of inherent methods, but it is expected that essentially no code breaks in
    practice.
    
    [breaking-change]
    Closes #24538

commit e40449e0d545561c73a9b9b324b5971b533a87b7
Merge: abf0548 5a3a599
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Apr 16 01:17:04 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Apr 16 01:17:04 2015 +0000

    Auto merge of #24485 - brson:is, r=alexcrichton
    
    It was an oversight that this was not done in the great int upheaval.
    
    [breaking-change]

commit 5a3a599428f5af024857d19b5d360b148e885fa2
Author:     Brian Anderson &lt;banderson@mozilla.com&gt;
AuthorDate: Wed Apr 15 16:11:56 2015 -0700
Commit:     Brian Anderson &lt;banderson@mozilla.com&gt;
CommitDate: Wed Apr 15 16:13:26 2015 -0700

    Forbid is/us suffixes. Fixes #22496
    
    It was an oversight that this was not done in the great int upheaval.
    
    [breaking-change]

commit 07f807d01f191ced1d7f4857c73fc57fbe31f421
Merge: ce27d02 77bf827
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Apr 15 21:05:16 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Apr 15 21:05:16 2015 +0000

    Auto merge of #24330 - pnkfelix:issue-24267, r=nikomatsakis
    
    Extend rustc::middle::dataflow to allow filtering kills from flow-exits.
    
    Fix borrowck analysis so that it will not treat a break that pops through an assignment
    ```rust
    x = { ... break; ... }
    ```
    as a kill of the "moved-out" bit for `x`.
    
    Fix #24267.
    
    [breaking-change], but really, its only breaking code that was already buggy.

commit e6a812402828f0f11b0de7a7e0c08c1d85a437f1
Merge: f55e66a 2705051
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Apr 14 00:07:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Apr 14 00:07:50 2015 +0000

    Auto merge of #24251 - alexcrichton:unsafe-from-raw-fd, r=aturon
    
    As pointed out in [RFC issue 1043][rfc] it is quite useful to have the standard
    I/O types to provide the contract that they are the sole owner of the underlying
    object they represent. This guarantee enables writing safe interfaces like the
    `MemoryMap` API sketched out in that issue.
    
    [rfc]: https://github.com/rust-lang/rfcs/issues/1043
    
    As constructing objects from these raw handles may end up violating these
    ownership gurantees, the functions for construction are now marked unsafe.
    
    [breaking-change]
    Closes rust-lang/rfcs#1043

commit 6e0fb70ff6effe7b7be2c5fe951e9161613e6707
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Apr 13 14:48:17 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Apr 13 14:48:17 2015 -0700

    Generalize `spawn` beyond unit closures
    
    `thread::spawn` was previously restricted to closures that return `()`,
    which limited the utility of joining on a spawned thread. However, there
    is no reason for this restriction, and this commit allows arbitrary
    return types.
    
    Since it introduces a type parameter to `JoinHandle`, it's technically
    a:
    
    [breaking-change]
    
    However, no code is actually expected to break.

commit 6399bb425b3a82111cd554737f194c95b8f6bad5
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Apr 13 12:08:20 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Apr 13 12:15:28 2015 -0700

    De-stabilize `thread::scoped` and friends
    
    Issue #24292 demonstrates that the `scoped` API as currently offered can
    be memory-unsafe: the `JoinGuard` can be moved into a context that will
    fail to execute destructors prior to the stack frame being popped (for
    example, by creating an `Rc` cycle).
    
    This commit reverts the APIs to `unstable` status while a long-term
    solution is worked out.
    
    (There are several possible ways to address this issue; it's not a
    fundamental problem with the `scoped` idea, but rather an indication
    that Rust doesn't currently provide a good way to ensure that
    destructors are run within a particular stack frame.)
    
    [breaking-change]

commit f55e66aaed42589dcda0221a4545dbaaec68e577
Merge: 588d37c f3f99fb
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Apr 13 17:39:14 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Apr 13 17:39:14 2015 +0000

    Auto merge of #24198 - alexcrichton:windows-readlink, r=aturon
    
    The current implementation of using GetFinalPathNameByHandle actually reads all
    intermediate links instead of just looking at the current link. This commit
    alters the behavior of the function to use a different API which correctly reads
    only one level of the soft link.
    
    [breaking-change]

commit 524547551cd6c9b33a9677e1a58e9a9d1e19c0fc
Merge: 49798c5 5308ac9
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Apr 13 08:08:23 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Apr 13 08:08:23 2015 +0000

    Auto merge of #24339 - lfairy:remove-regex-data, r=alexcrichton
    
    The regex crate keeps its own tables now (rust-lang/regex#41) so we
    don't need them here.
    
    [breaking-change]

commit 5308ac939a330b74540bea5920b0086a2d954648
Author:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
AuthorDate: Sun Apr 12 13:24:19 2015 +1200
Commit:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
CommitDate: Mon Apr 13 10:30:10 2015 +1200

    Remove regex module from libunicode
    
    The regex crate keeps its own tables now (rust-lang/regex#41) so we
    don't need them here.
    
    [breaking-change]

commit 5afa2704a6fdee62b267a5df9ca0934350dfc3d1
Merge: 6790b0e 000db38
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Apr 12 01:26:53 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Apr 12 01:26:53 2015 +0000

    Auto merge of #23011 - nagisa:the-war-of-symbol-and-symbol, r=pnkfelix
    
    We provide tools to tell what exact symbols to emit for any fn or static, but
    donâ€™t quite check if that wonâ€™t cause any issues later on. Some of the issues
    include LLVM mangling our names again and our names pointing to wrong locations,
    us generating dumb foreign call wrappers, linker errors, extern functions
    resolving to different symbols altogether (`extern {fn fail();} fail();` in some
    cases calling `fail1()`), etc.
    
    Before the commit we had a function called `note_unique_llvm_symbol`, so it is
    clear somebody was aware of the issue at some point, but the function was barely
    used, mostly in irrelevant locations.
    
    Along with working on it I took liberty to start refactoring trans/base into
    a few smaller modules. The refactoring is incomplete and I hope I will find some
    motivation to carry on with it.
    
    This is possibly a [breaking-change] because it makes dumbly written code
    properly invalid.
    
    This fixes all those issues about incorrect use of #[no_mangle] being not reported/misreported/ICEd by the compiler.
    
    NB. This PR does not attempt to tackle the parallel codegen issue that was mentioned in https://github.com/rust-lang/rust/pull/22811, but I believe it should be very straightforward in a follow up PR by modifying `trans::declare::get_defined_value` to look at all the contexts.
    
    cc @alexcrichton @huonw @nrc because you commented on the original RFC issue.
    
    EDIT: wow, this became much bigger than I initially intended.

commit 93f7fe32d30b67baa6abf09c073c5862a978dc57
Merge: c897ac0 05aaad1
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Apr 10 23:49:24 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Apr 10 23:49:24 2015 +0000

    Auto merge of #24270 - pnkfelix:use-disr-val-for-derive-ord, r=brson
    
    Use `discriminant_value` intrinsic for `derive(PartialOrd)`
    
    [breaking-change]
    
    This is a [breaking-change] because it can change the result of comparison operators when enum discriminants have been explicitly assigned.  Notably in a case like:
    ```rust
    #[derive(PartialOrd)]
    enum E { A = 2, B = 1}
    ```
    
    Under the old deriving, `A &lt; B` held, because `A` came before `B` in the order of declaration.  But now we use the ordering according to the provided values, and thus `A &gt; B`.  (However, this change is very unlikely to break much, if any, code, since the orderings themselves should all remain well-defined, total, etc.)
    
    Fix #15523

commit d6c72306c8fc2ec0fd9d6e499c32f2bf52f0b8ba
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Apr 3 15:30:10 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Apr 9 17:07:02 2015 -0700

    std: Set CLOEXEC for all fds opened on unix
    
    This commit starts to set the CLOEXEC flag for all files and sockets opened by
    the standard library by default on all unix platforms. There are a few points of
    note in this commit:
    
    * The implementation is not 100% satisfactory in the face of threads. File
      descriptors only have the `F_CLOEXEC` flag set *after* they are opened,
      allowing for a fork/exec to happen in the middle and leak the descriptor.
      Some platforms do support atomically opening a descriptor while setting the
      `CLOEXEC` flag, and it is left as a future extension to bind these apis as it
      is unclear how to do so nicely at this time.
    
    * The implementation does not offer a method of opting into the old behavior of
      not setting `CLOEXEC`. This will possibly be added in the future through
      extensions on `OpenOptions`, for example.
    
    * This change does not yet audit any Windows APIs to see if the handles are
      inherited by default by accident.
    
    This is a breaking change for users who call `fork` or `exec` outside of the
    standard library itself and expect file descriptors to be inherted. All file
    descriptors created by the standard library will no longer be inherited.
    
    [breaking-change]

commit 2705051e2067e8f467b4cb9bc75e801a5cd4f0e7
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Apr 9 15:43:27 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Apr 9 16:12:33 2015 -0700

    std: Make FromRawFd::from_raw_fd an unsafe method
    
    As pointed out in [RFC issue 1043][rfc] it is quite useful to have the standard
    I/O types to provide the contract that they are the sole owner of the underlying
    object they represent. This guarantee enables writing safe interfaces like the
    `MemoryMap` API sketched out in that issue.
    
    [rfc]: https://github.com/rust-lang/rfcs/issues/1043
    
    As constructing objects from these raw handles may end up violating these
    ownership gurantees, the functions for construction are now marked unsafe.
    
    [breaking-change]
    Closes rust-lang/rfcs#1043

commit 5daee19eca622030c598042d9615df17d4ad035f
Merge: 4e466e7 ec7c800
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Thu Apr 9 15:54:28 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Apr 10 00:24:43 2015 +0530

    Rollup merge of #24212 - alexcrichton:destabilize-begin-unwind, r=huonw
    
     Now that we have a `#[allow_internal_unstable]` attribute for macros there's no
    need for these two `begin_unwind` functions to be stable. Right now the `panic!`
    interface is the only one we wish to stabilize, so remove the stability markers
    from these functions.
    
    While this is a breaking change, it is highly unlikely to break any actual code.
    It is recommended to use the `panic!` macro instead if it breaks explicit calls
    into `std::rt`.
    
    [breaking-change]
    cc #24208

commit e3f324cd9d7b27eda6133c407a4751a8b0217631
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Apr 8 17:01:03 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Thu Apr 9 08:54:09 2015 -0700

    Improve bounds in Iterator API
    
    This commit changes `Iterator`'s API by:
    
    * Generalizing bounds from `Iterator` to `IntoIterator` whenever
      possible, matching the semantics and ergonomics of `for` loops.
    
    * Tightens up a few method-level bounds so that you get an error
      earlier. For example, `rev` did not require `DoubleEndedIterator` even
      though the result is only an `Iterator` when the original iterator was
      double-ended.
    
    Closes #23587
    
    The bound-tightening is technically a:
    
    [breaking-change]
    
    but no code should break in practice.

commit 65e3f0325a64d8f1affa146b3575a4b7c90458d7
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 8 15:48:46 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 8 15:48:46 2015 -0700

    std: Destabilize the internals of panic!
    
    Now that we have a `#[allow_internal_unstable]` attribute for macros there's no
    need for these two `begin_unwind` functions to be stable. Right now the `panic!`
    interface is the only one we wish to stabilize, so remove the stability markers
    from these functions.
    
    While this is a breaking change, it is highly unlikely to break any actual code.
    It is recommended to use the `panic!` macro instead if it breaks explicit calls
    into `std::rt`.
    
    [breaking-change]
    cc #24208

commit f3f99fb44eea1d7037f94259aef6cbc39837ebee
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 8 09:50:50 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 8 10:33:39 2015 -0700

    std: Fix fs::read_link behavior on Windows
    
    The current implementation of using GetFinalPathNameByHandle actually reads all
    intermediate links instead of just looking at the current link. This commit
    alters the behavior of the function to use a different API which correctly reads
    only one level of the soft link.
    
    [breaking-change]

commit 97f24a85965c3c51a2c18be029091ae52bbd7920
Author:     Tobias Bucher &lt;tobiasbucher5991@gmail.com&gt;
AuthorDate: Mon Apr 6 17:43:50 2015 +0200
Commit:     Tobias Bucher &lt;tobiasbucher5991@gmail.com&gt;
CommitDate: Wed Apr 8 00:26:35 2015 +0200

    Make `sum` and `product` inherent methods on `Iterator`
    
    In addition to being nicer, this also allows you to use `sum` and `product` for
    iterators yielding custom types aside from the standard integers.
    
    Due to removing the `AdditiveIterator` and `MultiplicativeIterator` trait, this
    is a breaking change.
    
    [breaking-change]

commit 986852911464df87088007e64780165cc538f9b9
Author:     Kevin Ballard &lt;kevin@sb.org&gt;
AuthorDate: Mon Apr 6 16:30:18 2015 -0700
Commit:     Kevin Ballard &lt;kevin@sb.org&gt;
CommitDate: Mon Apr 6 17:20:23 2015 -0700

    Add `Sync` to the bounds in `io::Error`
    
    This allows `io::Error` values to be stored in `Arc` properly.
    
    Because this requires `Sync` of any value passed to `io::Error::new()`
    and modifies the relevant `convert::From` impls, this is a
    
    [breaking-change]
    
    Fixes #24049.

commit f1dabed82bfed643fbbfc93203473e384c58d20a
Author:     Simonas Kazlauskas &lt;git@kazlauskas.me&gt;
AuthorDate: Wed Mar 4 01:08:06 2015 +0200
Commit:     Simonas Kazlauskas &lt;git@kazlauskas.me&gt;
CommitDate: Fri Apr 3 15:48:07 2015 +0300

    Introduce trans::declare
    
    We provide tools to tell what exact symbols to emit for any fn or static, but
    donâ€™t quite check if that wonâ€™t cause any issues later on. Some of the issues
    include LLVM mangling our names again and our names pointing to wrong locations,
    us generating dumb foreign call wrappers, linker errors, extern functions
    resolving to different symbols altogether (extern {fn fail();} fail(); in some
    cases calling fail1()), etc.
    
    Before the commit we had a function called note_unique_llvm_symbol, so it is
    clear somebody was aware of the issue at some point, but the function was barely
    used, mostly in irrelevant locations.
    
    Along with working on it I took liberty to start refactoring trans/base into
    a few smaller modules. The refactoring is incomplete and I hope I will find some
    motivation to carry on with it.
    
    This is possibly a [breaking-change] because it makes dumbly written code
    properly invalid.

commit 82dcec7ee4a8a71fdfb8e8771ae6785261ec1d5b
Merge: fc98b19 7c3efcc
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Apr 3 07:13:51 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Apr 3 07:13:51 2015 +0000

    Auto merge of #23934 - lfairy:write-no-deref, r=alexcrichton
    
    This means passing in e.g. a `Vec&lt;u8&gt;` or `String` will work as
    intended, rather than deref-ing to `&amp;mut [u8]` or `&amp;mut str`.
    
    [breaking-change]
    
    Closes #23768

commit fc98b19cf72ea45851ebb7b28af160be92b19128
Merge: 5e30f05 883adc6
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Apr 3 04:29:52 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Apr 3 04:29:52 2015 +0000

    Auto merge of #23832 - petrochenkov:usize, r=aturon
    
    These constants are small and can fit even in `u8`, but semantically they have type `usize` because they denote sizes and are almost always used in `usize` context. The change of their type to `u32` during the integer audit led only to the large amount of `as usize` noise (see the second commit, which removes this noise).
    
    This is a minor [breaking-change] to an unstable interface.
    
    r? @aturon

commit 655634e6ab00707ef98034dcfb32000cbfa7a01c
Merge: bb252a8 371277f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 1 13:56:20 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 1 13:56:20 2015 -0700

    rollup merge of #23949: aturon/stab-timeout
    
    This commit renames and stabilizes:
    
    * `Condvar::wait_timeout_ms` (renamed from `wait_timeout`)
    * `thread::park_timeout_ms` (renamed from `park_timeout`)
    * `thread::sleep_ms` (renamed from `sleep`)
    
    In each case, the timeout is taken as a `u32` number of milliseconds,
    rather than a `Duration`.
    
    These functions are likely to be deprecated once a stable form of
    `Duration` is available, but there is little cost to having these named
    variants around, and it's crucial functionality for 1.0.
    
    [breaking-change]
    
    r? @alexcrichton
    
    cc @sfackler @carllerche

commit 371277fb0d210152eb8c79e30bd7f7749c5af63c
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Apr 1 12:20:57 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Wed Apr 1 13:43:45 2015 -0700

    Stabilize basic timeout functionality
    
    This commit renames and stabilizes:
    
    * `Condvar::wait_timeout_ms` (renamed from `wait_timeout`)
    * `thread::park_timeout_ms` (renamed from `park_timeout`)
    * `thread::sleep_ms` (renamed from `sleep`)
    
    In each case, the timeout is taken as a `u32` number of milliseconds,
    rather than a `Duration`.
    
    These functions are likely to be deprecated once a stable form of
    `Duration` is available, but there is little cost to having these named
    variants around, and it's crucial functionality for 1.0.
    
    [breaking-change]

commit e9bacbaa2c9c88aaecf07ee30f02d08a1999e5c6
Merge: fb4029f e98dce3
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 1 13:30:08 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 1 13:30:08 2015 -0700

    rollup merge of #23951: alexcrichton/splitn
    
    This commit is an implementation of [RFC 979][rfc] which changes the meaning of
    the count parameter to the `splitn` function on strings and slices. The
    parameter now means the number of items that are returned from the iterator, not
    the number of splits that are made.
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/979
    
    Closes #23911
    [breaking-change]

commit e98dce3e00a7b6bfd264418ef993bbf9cdb1f0b6
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 1 11:28:34 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 1 13:29:42 2015 -0700

    std: Changing the meaning of the count to splitn
    
    This commit is an implementation of [RFC 979][rfc] which changes the meaning of
    the count parameter to the `splitn` function on strings and slices. The
    parameter now means the number of items that are returned from the iterator, not
    the number of splits that are made.
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/979
    
    Closes #23911
    [breaking-change]

commit cade32acf6f5ff209ee082d70350d9bc0362985a
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Wed Apr 1 11:12:30 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Wed Apr 1 14:41:21 2015 -0400

    Remove `Thunk` struct and `Invoke` trait; change `Thunk` to be an alias
    for `Box&lt;FnBox()&gt;`. I found the alias was still handy because it is
    shorter than the fully written type.
    
    This is a [breaking-change]: convert code using `Invoke` to use `FnBox`,
    which is usually pretty straight-forward. Code using thunk mostly works
    if you change `Thunk::new =&gt; Box::new` and `foo.invoke(arg)` to
    `foo(arg)`.

commit 7c3efcc5bb260234fc163340c9fd7aad3d8d780e
Author:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
AuthorDate: Wed Apr 1 19:48:49 2015 +1300
Commit:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
CommitDate: Wed Apr 1 19:48:49 2015 +1300

    Don't reborrow the target of a `write!()`
    
    This means passing in e.g. a `Vec&lt;u8&gt;` or `String` will work as
    intended, rather than deref-ing to `&amp;mut [u8]` or `&amp;mut str`.
    
    [breaking-change]
    
    Closes #23768

commit ac77392f8ab1c201b0c927f6a2d30b632b95acda
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 16:01:03 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 16:12:48 2015 -0700

    std: Stabilize last bits of io::Error
    
    This commit stabilizes a few remaining bits of the `io::Error` type:
    
    * The `Error::new` method is now stable. The last `detail` parameter was removed
      and the second `desc` parameter was generalized to `E: Into&lt;Box&lt;Error&gt;&gt;` to
      allow creating an I/O error from any form of error. Currently there is no form
      of downcasting, but this will be added in time.
    
    * An implementation of `From&lt;&amp;str&gt; for Box&lt;Error&gt;` was added to liballoc to
      allow construction of errors from raw strings.
    
    * The `Error::raw_os_error` method was stabilized as-is.
    
    * Trait impls for `Clone`, `Eq`, and `PartialEq` were removed from `Error` as it
      is not possible to use them with trait objects.
    
    This is a breaking change due to the modification of the `new` method as well as
    the removal of the trait implementations for the `Error` type.
    
    [breaking-change]

commit 3422be3666cba57f1a6fb6ab3deb1a6df66b7695
Merge: 30283d4 608fff8
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 15:59:35 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:59:35 2015 -0700

    rollup merge of #23288: alexcrichton/issue-19470
    
    This is a deprecated attribute that is slated for removal, and it also affects
    all implementors of the trait. This commit removes the attribute and fixes up
    implementors accordingly. The primary implementation which was lost was the
    ability to compare `&amp;[T]` and `Vec&lt;T&gt;` (in that order).
    
    This change also modifies the `assert_eq!` macro to not consider both directions
    of equality, only the one given in the left/right forms to the macro. This
    modification is motivated due to the fact that `&amp;[T] == Vec&lt;T&gt;` no longer
    compiles, causing hundreds of errors in unit tests in the standard library (and
    likely throughout the community as well).
    
    Closes #19470
    [breaking-change]

commit da04788efca6ec1e421139fb4916a5aacd49a2e2
Merge: 94137a3 9fc51ef
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 11:26:10 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:53:26 2015 -0700

    rollup merge of #23875: aturon/revise-convert-2
    
    * Marks `#[stable]` the contents of the `std::convert` module.
    
    * Added methods `PathBuf::as_path`, `OsString::as_os_str`,
      `String::as_str`, `Vec::{as_slice, as_mut_slice}`.
    
    * Deprecates `OsStr::from_str` in favor of a new, stable, and more
      general `OsStr::new`.
    
    * Adds unstable methods `OsString::from_bytes` and `OsStr::{to_bytes,
      to_cstring}` for ergonomic FFI usage.
    
    [breaking-change]
    
    r? @alexcrichton

commit d03120afd36f9e3f4c1305e9e5ca0d24a3b4a32f
Merge: 890f0ab f19e763
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 10:15:32 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:49:11 2015 -0700

    rollup merge of #23876: alexcrichton/stabilize-any
    
    This commit stabilizes the following APIs:
    
    * `TypeId::of` - now that it has an `Any` bound it's ready to be stable.
    * `Box&lt;Any&gt;::downcast` - now that an inherent impl on `Box&lt;Any&gt;` as well as
      `Box&lt;Any+Send&gt;` is allowed the `BoxAny` trait is removed in favor of these
      inherent methods.
    
    This is a breaking change due to the removal of the `BoxAny` trait, but
    consumers can simply remove imports to fix crates.
    
    [breaking-change]

commit 890f0ab10a81720606805db36628f61f29d0e816
Merge: 1829974 6370f29
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 10:15:29 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:49:10 2015 -0700

    rollup merge of #23766: alexcrichton/stabilize-raw-fd
    
    This commit stabilizes the platform-specific `io` modules, specifically around
    the traits having to do with the raw representation of each object on each
    platform.
    
    Specifically, the following material was stabilized:
    
    * `AsRaw{Fd,Socket,Handle}`
    * `RawFd` (renamed from `Fd`)
    * `RawHandle` (renamed from `Handle`)
    * `RawSocket` (renamed from `Socket`)
    * `AsRaw{Fd,Socket,Handle}` implementations
    * `std::os::{unix, windows}::io`
    
    The following material was added as `#[unstable]`:
    
    * `FromRaw{Fd,Socket,Handle}`
    * Implementations for various primitives
    
    There are a number of future improvements that are possible to make to this
    module, but this should cover a good bit of functionality desired from these
    modules for now. Some specific future additions may include:
    
    * `IntoRawXXX` traits to consume the raw representation and cancel the
      auto-destructor.
    * `Fd`, `Socket`, and `Handle` abstractions that behave like Rust objects and
      have nice methods for various syscalls.
    
    At this time though, these are considered backwards-compatible extensions and
    will not be stabilized at this time.
    
    This commit is a breaking change due to the addition of `Raw` in from of the
    type aliases in each of the platform-specific modules.
    
    [breaking-change]

commit 5cf126ae2f6af1cdac901f6995e3c2bab35e587f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 10 17:59:23 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 13:39:14 2015 -0700

    std: Remove #[old_orphan_check] from PartialEq
    
    This is a deprecated attribute that is slated for removal, and it also affects
    all implementors of the trait. This commit removes the attribute and fixes up
    implementors accordingly. The primary implementation which was lost was the
    ability to compare `&amp;[T]` and `Vec&lt;T&gt;` (in that order).
    
    This change also modifies the `assert_eq!` macro to not consider both directions
    of equality, only the one given in the left/right forms to the macro. This
    modification is motivated due to the fact that `&amp;[T] == Vec&lt;T&gt;` no longer
    compiles, causing hundreds of errors in unit tests in the standard library (and
    likely throughout the community as well).
    
    cc #19470
    [breaking-change]

commit 9fc51efe3344a32d9e522f08383f052277b6ab63
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Mar 30 15:15:27 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Tue Mar 31 11:24:38 2015 -0700

    Stabilize `std::convert` and related code
    
    * Marks `#[stable]` the contents of the `std::convert` module.
    
    * Added methods `PathBuf::as_path`, `OsString::as_os_str`,
      `String::as_str`, `Vec::{as_slice, as_mut_slice}`.
    
    * Deprecates `OsStr::from_str` in favor of a new, stable, and more
      general `OsStr::new`.
    
    * Adds unstable methods `OsString::from_bytes` and `OsStr::{to_bytes,
      to_cstring}` for ergonomic FFI usage.
    
    [breaking-change]

commit 5d0beb7d85e8e711334c7fb6f2c5da270e5200cb
Merge: b3317d6 232424d
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 10:15:26 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 10:15:26 2015 -0700

    rollup merge of #23549: aturon/stab-num
    
    This commit stabilizes the `std::num` module:
    
    * The `Int` and `Float` traits are deprecated in favor of (1) the
      newly-added inherent methods and (2) the generic traits available in
      rust-lang/num.
    
    * The `Zero` and `One` traits are reintroduced in `std::num`, which
      together with various other traits allow you to recover the most
      common forms of generic programming.
    
    * The `FromStrRadix` trait, and associated free function, is deprecated
      in favor of inherent implementations.
    
    * A wide range of methods and constants for both integers and floating
      point numbers are now `#[stable]`, having been adjusted for integer
      guidelines.
    
    * `is_positive` and `is_negative` are renamed to `is_sign_positive` and
      `is_sign_negative`, in order to address #22985
    
    * The `Wrapping` type is moved to `std::num` and stabilized;
      `WrappingOps` is deprecated in favor of inherent methods on the
      integer types, and direct implementation of operations on
      `Wrapping&lt;X&gt;` for each concrete integer type `X`.
    
    Closes #22985
    Closes #21069
    
    [breaking-change]
    
    r? @alexcrichton

commit 80bf31dd514055177b22c3dc66836d39eb5b1648
Merge: b3317d6 232424d
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 31 14:50:46 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 31 14:50:46 2015 +0000

    Auto merge of #23549 - aturon:stab-num, r=alexcrichton
    
    This commit stabilizes the `std::num` module:
    
    * The `Int` and `Float` traits are deprecated in favor of (1) the
      newly-added inherent methods and (2) the generic traits available in
      rust-lang/num.
    
    * The `Zero` and `One` traits are reintroduced in `std::num`, which
      together with various other traits allow you to recover the most
      common forms of generic programming.
    
    * The `FromStrRadix` trait, and associated free function, is deprecated
      in favor of inherent implementations.
    
    * A wide range of methods and constants for both integers and floating
      point numbers are now `#[stable]`, having been adjusted for integer
      guidelines.
    
    * `is_positive` and `is_negative` are renamed to `is_sign_positive` and
      `is_sign_negative`, in order to address #22985
    
    * The `Wrapping` type is moved to `std::num` and stabilized;
      `WrappingOps` is deprecated in favor of inherent methods on the
      integer types, and direct implementation of operations on
      `Wrapping&lt;X&gt;` for each concrete integer type `X`.
    
    Closes #22985
    Closes #21069
    
    [breaking-change]
    
    r? @alexcrichton

commit 232424d9952700682373ccf2d578109f401ff023
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Thu Mar 19 23:42:18 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Tue Mar 31 07:50:25 2015 -0700

    Stabilize std::num
    
    This commit stabilizes the `std::num` module:
    
    * The `Int` and `Float` traits are deprecated in favor of (1) the
      newly-added inherent methods and (2) the generic traits available in
      rust-lang/num.
    
    * The `Zero` and `One` traits are reintroduced in `std::num`, which
      together with various other traits allow you to recover the most
      common forms of generic programming.
    
    * The `FromStrRadix` trait, and associated free function, is deprecated
      in favor of inherent implementations.
    
    * A wide range of methods and constants for both integers and floating
      point numbers are now `#[stable]`, having been adjusted for integer
      guidelines.
    
    * `is_positive` and `is_negative` are renamed to `is_sign_positive` and
      `is_sign_negative`, in order to address #22985
    
    * The `Wrapping` type is moved to `std::num` and stabilized;
      `WrappingOps` is deprecated in favor of inherent methods on the
      integer types, and direct implementation of operations on
      `Wrapping&lt;X&gt;` for each concrete integer type `X`.
    
    Closes #22985
    Closes #21069
    
    [breaking-change]

commit 57938041c18ee1c1bef362e60f24f5b2d3a46213
Merge: 464c18c acd48a2
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 31 09:04:38 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 31 09:04:38 2015 +0530

    Rollup merge of #23866 - alexcrichton:switch-some-orders, r=aturon
    
    This functions swaps the order of arguments to a few functions that previously
    took (output, input) parameters, but now take (input, output) parameters (in
    that order).
    
    The affected functions are:
    
    * ptr::copy
    * ptr::copy_nonoverlapping
    * slice::bytes::copy_memory
    * intrinsics::copy
    * intrinsics::copy_nonoverlapping
    
    Closes #22890
    [breaking-change]

commit 606f50c46dd9a3852d36456d2015e1ccf832642e
Author:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
AuthorDate: Tue Mar 31 00:27:13 2015 +1100
Commit:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
CommitDate: Tue Mar 31 12:16:42 2015 +1100

    Lex binary and octal literals more eagerly.
    
    Previously 0b12 was considered two tokens, 0b1 and 2, as 2 isn't a valid
    base 2 digit. This patch changes that to collapse them into one (and
    makes `0b12` etc. an error: 2 isn't a valid base 2 digit).
    
    This may break some macro invocations of macros with `tt` (or syntax
    extensions) that rely on adjacent digits being separate tokens and hence
    is a
    
    [breaking-change]
    
    The fix is to separate the tokens, e.g. `0b12` -&gt; `0b1 2`.
    
    cc https://github.com/rust-lang/rfcs/pull/879

commit e17f4fc1d4545f5c17b21805c5145b05495484ee
Author:     Sean McArthur &lt;sean.monstar@gmail.com&gt;
AuthorDate: Mon Mar 30 17:56:48 2015 -0700
Commit:     Sean McArthur &lt;sean.monstar@gmail.com&gt;
CommitDate: Mon Mar 30 18:08:58 2015 -0700

    convert: remove FromError, use From&lt;E&gt; instead
    
    This removes the FromError trait, since it can now be expressed using
    the new convert::Into trait. All implementations of FromError&lt;E&gt; where
    changed to From&lt;E&gt;, and `try!` was changed to use From::from instead.
    
    Because this removes FromError, it is a breaking change, but fixing it
    simply requires changing the words `FromError` to `From`, and
    `from_error` to `from`.
    
    [breaking-change]

commit f19e763e0824a73118ed715f526cb7bdd584d4c4
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 30 16:43:04 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 30 16:44:11 2015 -0700

    std: Stabilize the rest of Any/BoxAny
    
    This commit stabilizes the following APIs:
    
    * `TypeId::of` - now that it has an `Any` bound it's ready to be stable.
    * `Box&lt;Any&gt;::downcast` - now that an inherent impl on `Box&lt;Any&gt;` as well as
      `Box&lt;Any+Send&gt;` is allowed the `BoxAny` trait is removed in favor of these
      inherent methods.
    
    This is a breaking change due to the removal of the `BoxAny` trait, but
    consumers can simply remove imports to fix crates.
    
    [breaking-change]

commit acd48a2b3e7fcc0372f7718a2fac1cf80e03db95
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 27 11:12:28 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 30 14:08:40 2015 -0700

    std: Standardize (input, output) param orderings
    
    This functions swaps the order of arguments to a few functions that previously
    took (output, input) parameters, but now take (input, output) parameters (in
    that order).
    
    The affected functions are:
    
    * ptr::copy
    * ptr::copy_nonoverlapping
    * slice::bytes::copy_memory
    * intrinsics::copy
    * intrinsics::copy_nonoverlapping
    
    Closes #22890
    [breaking-change]

commit 14192d6df5cc714e5c9a3ca70b08f2514d977be2
Merge: f002640 e64b677
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Mar 30 11:35:52 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Mar 30 11:35:52 2015 +0000

    Auto merge of #23848 - cmr:no-compiler-docs, r=huonw
    
    This saves a bunch of a time and will make distributions smaller, as well as
    avoiding filling the implementors page with internal garbage. Turn it back on
    with `--enable-compiler-docs` if you want them.
    
    (Crates behind the facade are not documented at all)
    
    [breaking-change]

commit c92bdcb232da3973a8a548e6b2044b610e286210
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Tue Mar 24 15:45:11 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Mon Mar 30 05:02:20 2015 -0400

    Fallout where types must be specified.
    
    This is due to a [breaking-change] to operators. The primary affected
    code is uses of the `Rng` trait where we used to (incorrectly) infer the
    right-hand-side type from the left-hand-side, in the case that the LHS
    type was a scalar like `i32`. The fix is to add a type annotation like
    `x + rng.gen::&lt;i32&gt;()`.

commit e64b677ca66d742e7c06738bacf3a160cba827a7
Author:     Corey Richardson &lt;corey@octayn.net&gt;
AuthorDate: Fri Mar 27 23:01:19 2015 -0400
Commit:     Corey Richardson &lt;corey@octayn.net&gt;
CommitDate: Sun Mar 29 06:15:51 2015 -0400

    mk: don't build docs for internal or behind-the-facade crates in beta/stable
    
    This saves a bunch of a time and will make distributions smaller, as well as
    avoiding filling the implementors page with internal garbage. Turn it back on
    with `--enable-compiler-docs` if you want compiler docs during development.
    
    Crates behind the facade are only documented on nightly/dev builds (where they
    can be used).
    
    [breaking-change]
    
    Closes #23772
    Closes #21297

commit 227b46bdede794d5c8476b810bb1c30926bd9c04
Merge: 27af78c 3c0c8fc
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Mar 29 05:21:29 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Mar 29 05:21:29 2015 +0000

    Auto merge of #23810 - sfackler:debug-collections, r=alexcrichton
    
    The collections debug helpers no longer prefix output with the
    collection name, in line with the current conventions for Debug
    implementations. Implementations that want to preserve the current
    behavior can simply add a `try!(write!(fmt, "TypeName "));` at the
    beginning of the `fmt` method.
    
    [breaking-change]

commit c89de2c56baeb61e7cc434924dcc8bedd32b26b8
Merge: 01f2c67 d502f42
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Mar 28 22:11:49 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Mar 28 22:11:49 2015 +0000

    Auto merge of #23300 - sfackler:rm-iterator-ext, r=alexcrichton
    
    All methods are inlined into Iterator with `Self: Sized` bounds to make
    sure Iterator is still object safe.
    
    [breaking-change]
    
    This is blocked on ICEs: https://gist.github.com/sfackler/5aff7c57cf8d896e2c6f
    Seem to be similar to #23281.

commit d502f4221fd5472c4a7905cdc3c59533e9612822
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Wed Mar 11 22:41:24 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Sat Mar 28 13:53:45 2015 -0700

    Remove IteratorExt
    
    All methods are inlined into Iterator with `Self: Sized` bounds to make
    sure Iterator is still object safe.
    
    [breaking-change]

commit 4037f2a368edd75c561bc6f3d8c6f0d644bc4180
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Thu Mar 26 22:42:29 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Sat Mar 28 10:33:51 2015 -0700

    Update debug helpers and add list builder
    
    The collections debug helpers no longer prefix output with the
    collection name, in line with the current conventions for Debug
    implementations. Implementations that want to preserve the current
    behavior can simply add a `try!(write!(fmt, "TypeName "));` at the
    beginning of the `fmt` method.
    
    [breaking-change]

commit f8b6e28e758231f611e8e7923aa607cebd150717
Merge: 9f9e251 3feeea5
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Mar 28 09:09:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Mar 28 09:09:50 2015 +0000

    Auto merge of #23799 - reem:error-no-send, r=aturon
    
    The Send bound is an unnecessary restriction, and though provided as a convenience, can't be removed by downstream code.
    
    The removal of this bound is a [breaking-change] since it removes an implicit Send bound on all `E: Error` and all `Error` trait objects.
    
    To migrate, consider if your code actually requires the Send bound and, if so, add it explicitly.
    
    Fixes #23774
    
    r? @aturon
</pre></body></html>
