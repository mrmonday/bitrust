<!DOCTYPE html><html><head>
<title>BitRust - Breaking Changes in rust-lang/rust</title>
</head><body><pre>
commit 9c88f3be126d0fe02a92c20e1d78192f4b648401
Merge: 857ef6e 805349a
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Apr 27 20:46:48 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Apr 27 20:46:48 2015 +0000

    Auto merge of #24765 - pnkfelix:fsk-enum-swapindrop, r=nikomatsakis
    
    Inspect enum discriminant *after* calling its destructor
    
    Includes some drive-by cleanup (e.g. changed some field and method names to reflect fill-on-drop; added comments about zero-variant enums being classified as `_match::Single`).
    
    Probably the most invasive change was the expansion of the maps `available_drop_glues` and `drop_glues` to now hold two different kinds of drop glues; there is the (old) normal drop glue, and there is (new) drop-contents glue that jumps straight to dropping the contents of a struct or enum, skipping its destructor.
    
     * For all types that do not have user-defined Drop implementations, the normal glue is generated as usual (i.e. recursively dropping the fields of the data structure).
    
      (And this actually is exactly what the newly-added drop-contents glue does as well.)
    
     * For types that have user-defined Drop implementations, the "normal" drop glue now schedules a cleanup before invoking the `Drop::drop` method that will call the drop-contents glue after that invocation returns.
    
    Fix #23611.
    
    ----
    
    Is this a breaking change?  The prior behavior was totally unsound, and it seems unreasonable that anyone was actually relying on it.
    
    Nonetheless, since there is a user-visible change to the language semantics, I guess I will conservatively mark this as a:
    
    [breaking-change]
    
    (To see an example of what sort of user-visible change this causes, see the comments in the regression test.)

commit 6365080c5cd27b74ec87420c351a3e7bdcff988e
Merge: b0043db 24ef905
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Apr 26 09:52:28 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Apr 26 09:52:28 2015 +0000

    Auto merge of #23085 - goffrie:interpolating-quote, r=huonw
    
    This changes the `ToTokens` implementations for expressions, statements, etc. with almost-trivial ones that produce `Interpolated(*Nt(...))` pseudo-tokens. In this way, quasiquote now works the same way as macros do: already-parsed AST fragments are used as-is, not reparsed.
    
    The `ToSource` trait is removed. Quasiquote no longer involves pretty-printing at all, which removes the need for the `encode_with_hygiene` hack. All associated machinery is removed.
    
    New `Nonterminal`s are added: NtArm, NtImplItem, and NtTraitItem. These are just for quasiquote, not macros.
    
    `ToTokens` is no longer implemented for `Arg` (although this could be added again) and `Generics` (which I don't think makes sense).
    
    This breaks any compiler extensions that relied on the ability of `ToTokens` to turn AST fragments back into inspectable token trees. For this reason, this closes #16987.
    
    As such, this is a [breaking-change].
    
    Fixes #16472.
    Fixes #15962.
    Fixes #17397.
    Fixes #16617.

commit 2d9831dea598d8a45c69e8c799503e8a397aacc0
Author:     Geoffry Song &lt;goffrie@gmail.com&gt;
AuthorDate: Thu Mar 5 15:06:49 2015 -0500
Commit:     Geoffry Song &lt;goffrie@gmail.com&gt;
CommitDate: Sat Apr 25 21:42:10 2015 -0400

    Interpolate AST nodes in quasiquote.
    
    This changes the `ToTokens` implementations for expressions, statements,
    etc. with almost-trivial ones that produce `Interpolated(*Nt(...))`
    pseudo-tokens. In this way, quasiquote now works the same way as macros
    do: already-parsed AST fragments are used as-is, not reparsed.
    
    The `ToSource` trait is removed. Quasiquote no longer involves
    pretty-printing at all, which removes the need for the
    `encode_with_hygiene` hack. All associated machinery is removed.
    
    A new `Nonterminal` is added, NtArm, which the parser now interpolates.
    This is just for quasiquote, not macros (although it could be in the
    future).
    
    `ToTokens` is no longer implemented for `Arg` (although this could be
    added again) and `Generics` (which I don't think makes sense).
    
    This breaks any compiler extensions that relied on the ability of
    `ToTokens` to turn AST fragments back into inspectable token trees. For
    this reason, this closes #16987.
    
    As such, this is a [breaking-change].
    
    Fixes #16472.
    Fixes #15962.
    Fixes #17397.
    Fixes #16617.

commit 00c48d3779fb4c372d2dfe7a8654c6cd1e065511
Merge: 0d8309e 0ad48e4
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Apr 25 21:44:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Apr 25 21:44:50 2015 +0000

    Auto merge of #24547 - bombless:comma, r=pnkfelix
    
    Closes #20616
    It breaks code such as &lt;https://github.com/rust-lang/rust/blob/c64feb63418fd05bd6e5adc6f9ad763aa6a594b1/src/librustc_typeck/check/method/suggest.rs#L367&gt;, so this is a [breaking-change], you have to add missing comma after the last lifetime arguement now.

commit 98e9765d973d46faa5c80fb37a48040ca9e87b28
Merge: 44338cb 8f5b5f9
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Apr 21 15:28:06 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Apr 21 15:28:06 2015 -0700

    rollup merge of #24541: alexcrichton/issue-24538
    
    This is an implementation of [RFC 1030][rfc] which adds these traits to the
    prelude and additionally removes all inherent `into_iter` methods on collections
    in favor of the trait implementation (which is now accessible by default).
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/1030
    
    This is technically a breaking change due to the prelude additions and removal
    of inherent methods, but it is expected that essentially no code breaks in
    practice.
    
    [breaking-change]
    Closes #24538

commit eeb94886adccb3f13003f92f117115d17846ce1f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Apr 17 15:32:42 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Apr 21 11:37:43 2015 -0700

    std: Remove deprecated/unstable num functionality
    
    This commit removes all the old casting/generic traits from `std::num` that are
    no longer in use by the standard library. This additionally removes the old
    `strconv` module which has not seen much use in quite a long time. All generic
    functionality has been supplanted with traits in the `num` crate and the
    `strconv` module is supplanted with the [rust-strconv crate][rust-strconv].
    
    [rust-strconv]: https://github.com/lifthrasiir/rust-strconv
    
    This is a breaking change due to the removal of these deprecated crates, and the
    alternative crates are listed above.
    
    [breaking-change]

commit efa6a46a8eceb4ab792d5ec8e28cf3baaaa96491
Merge: 1284be4 9868529
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Apr 18 02:53:53 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Apr 18 02:53:53 2015 +0000

    Auto merge of #24133 - kballard:add-sync-to-io-error, r=alexcrichton
    
    This allows `io::Error` values to be stored in `Arc` properly.
    
    Because this requires `Sync` of any value passed to `io::Error::new()`
    and modifies the relevant `convert::From` impls, this is a
    
    [breaking-change]
    
    Fixes #24049.

commit 8f5b5f94dcdb9884737dfbc8efd893d1d70f0b14
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Apr 17 14:31:30 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Apr 17 16:37:30 2015 -0700

    std: Add Default/IntoIterator/ToOwned to the prelude
    
    This is an implementation of [RFC 1030][rfc] which adds these traits to the
    prelude and additionally removes all inherent `into_iter` methods on collections
    in favor of the trait implementation (which is now accessible by default).
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/1030
    
    This is technically a breaking change due to the prelude additions and removal
    of inherent methods, but it is expected that essentially no code breaks in
    practice.
    
    [breaking-change]
    Closes #24538

commit e40449e0d545561c73a9b9b324b5971b533a87b7
Merge: abf0548 5a3a599
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Apr 16 01:17:04 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Apr 16 01:17:04 2015 +0000

    Auto merge of #24485 - brson:is, r=alexcrichton
    
    It was an oversight that this was not done in the great int upheaval.
    
    [breaking-change]

commit 5a3a599428f5af024857d19b5d360b148e885fa2
Author:     Brian Anderson &lt;banderson@mozilla.com&gt;
AuthorDate: Wed Apr 15 16:11:56 2015 -0700
Commit:     Brian Anderson &lt;banderson@mozilla.com&gt;
CommitDate: Wed Apr 15 16:13:26 2015 -0700

    Forbid is/us suffixes. Fixes #22496
    
    It was an oversight that this was not done in the great int upheaval.
    
    [breaking-change]

commit 07f807d01f191ced1d7f4857c73fc57fbe31f421
Merge: ce27d02 77bf827
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Apr 15 21:05:16 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Apr 15 21:05:16 2015 +0000

    Auto merge of #24330 - pnkfelix:issue-24267, r=nikomatsakis
    
    Extend rustc::middle::dataflow to allow filtering kills from flow-exits.
    
    Fix borrowck analysis so that it will not treat a break that pops through an assignment
    ```rust
    x = { ... break; ... }
    ```
    as a kill of the "moved-out" bit for `x`.
    
    Fix #24267.
    
    [breaking-change], but really, its only breaking code that was already buggy.

commit e6a812402828f0f11b0de7a7e0c08c1d85a437f1
Merge: f55e66a 2705051
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Apr 14 00:07:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Apr 14 00:07:50 2015 +0000

    Auto merge of #24251 - alexcrichton:unsafe-from-raw-fd, r=aturon
    
    As pointed out in [RFC issue 1043][rfc] it is quite useful to have the standard
    I/O types to provide the contract that they are the sole owner of the underlying
    object they represent. This guarantee enables writing safe interfaces like the
    `MemoryMap` API sketched out in that issue.
    
    [rfc]: https://github.com/rust-lang/rfcs/issues/1043
    
    As constructing objects from these raw handles may end up violating these
    ownership gurantees, the functions for construction are now marked unsafe.
    
    [breaking-change]
    Closes rust-lang/rfcs#1043

commit 6e0fb70ff6effe7b7be2c5fe951e9161613e6707
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Apr 13 14:48:17 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Apr 13 14:48:17 2015 -0700

    Generalize `spawn` beyond unit closures
    
    `thread::spawn` was previously restricted to closures that return `()`,
    which limited the utility of joining on a spawned thread. However, there
    is no reason for this restriction, and this commit allows arbitrary
    return types.
    
    Since it introduces a type parameter to `JoinHandle`, it's technically
    a:
    
    [breaking-change]
    
    However, no code is actually expected to break.

commit 6399bb425b3a82111cd554737f194c95b8f6bad5
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Apr 13 12:08:20 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Apr 13 12:15:28 2015 -0700

    De-stabilize `thread::scoped` and friends
    
    Issue #24292 demonstrates that the `scoped` API as currently offered can
    be memory-unsafe: the `JoinGuard` can be moved into a context that will
    fail to execute destructors prior to the stack frame being popped (for
    example, by creating an `Rc` cycle).
    
    This commit reverts the APIs to `unstable` status while a long-term
    solution is worked out.
    
    (There are several possible ways to address this issue; it's not a
    fundamental problem with the `scoped` idea, but rather an indication
    that Rust doesn't currently provide a good way to ensure that
    destructors are run within a particular stack frame.)
    
    [breaking-change]

commit f55e66aaed42589dcda0221a4545dbaaec68e577
Merge: 588d37c f3f99fb
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Apr 13 17:39:14 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Apr 13 17:39:14 2015 +0000

    Auto merge of #24198 - alexcrichton:windows-readlink, r=aturon
    
    The current implementation of using GetFinalPathNameByHandle actually reads all
    intermediate links instead of just looking at the current link. This commit
    alters the behavior of the function to use a different API which correctly reads
    only one level of the soft link.
    
    [breaking-change]

commit 524547551cd6c9b33a9677e1a58e9a9d1e19c0fc
Merge: 49798c5 5308ac9
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Apr 13 08:08:23 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Apr 13 08:08:23 2015 +0000

    Auto merge of #24339 - lfairy:remove-regex-data, r=alexcrichton
    
    The regex crate keeps its own tables now (rust-lang/regex#41) so we
    don't need them here.
    
    [breaking-change]

commit 5308ac939a330b74540bea5920b0086a2d954648
Author:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
AuthorDate: Sun Apr 12 13:24:19 2015 +1200
Commit:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
CommitDate: Mon Apr 13 10:30:10 2015 +1200

    Remove regex module from libunicode
    
    The regex crate keeps its own tables now (rust-lang/regex#41) so we
    don't need them here.
    
    [breaking-change]

commit 5afa2704a6fdee62b267a5df9ca0934350dfc3d1
Merge: 6790b0e 000db38
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Apr 12 01:26:53 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Apr 12 01:26:53 2015 +0000

    Auto merge of #23011 - nagisa:the-war-of-symbol-and-symbol, r=pnkfelix
    
    We provide tools to tell what exact symbols to emit for any fn or static, but
    don’t quite check if that won’t cause any issues later on. Some of the issues
    include LLVM mangling our names again and our names pointing to wrong locations,
    us generating dumb foreign call wrappers, linker errors, extern functions
    resolving to different symbols altogether (`extern {fn fail();} fail();` in some
    cases calling `fail1()`), etc.
    
    Before the commit we had a function called `note_unique_llvm_symbol`, so it is
    clear somebody was aware of the issue at some point, but the function was barely
    used, mostly in irrelevant locations.
    
    Along with working on it I took liberty to start refactoring trans/base into
    a few smaller modules. The refactoring is incomplete and I hope I will find some
    motivation to carry on with it.
    
    This is possibly a [breaking-change] because it makes dumbly written code
    properly invalid.
    
    This fixes all those issues about incorrect use of #[no_mangle] being not reported/misreported/ICEd by the compiler.
    
    NB. This PR does not attempt to tackle the parallel codegen issue that was mentioned in https://github.com/rust-lang/rust/pull/22811, but I believe it should be very straightforward in a follow up PR by modifying `trans::declare::get_defined_value` to look at all the contexts.
    
    cc @alexcrichton @huonw @nrc because you commented on the original RFC issue.
    
    EDIT: wow, this became much bigger than I initially intended.

commit 93f7fe32d30b67baa6abf09c073c5862a978dc57
Merge: c897ac0 05aaad1
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Apr 10 23:49:24 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Apr 10 23:49:24 2015 +0000

    Auto merge of #24270 - pnkfelix:use-disr-val-for-derive-ord, r=brson
    
    Use `discriminant_value` intrinsic for `derive(PartialOrd)`
    
    [breaking-change]
    
    This is a [breaking-change] because it can change the result of comparison operators when enum discriminants have been explicitly assigned.  Notably in a case like:
    ```rust
    #[derive(PartialOrd)]
    enum E { A = 2, B = 1}
    ```
    
    Under the old deriving, `A &lt; B` held, because `A` came before `B` in the order of declaration.  But now we use the ordering according to the provided values, and thus `A &gt; B`.  (However, this change is very unlikely to break much, if any, code, since the orderings themselves should all remain well-defined, total, etc.)
    
    Fix #15523

commit d6c72306c8fc2ec0fd9d6e499c32f2bf52f0b8ba
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Apr 3 15:30:10 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Apr 9 17:07:02 2015 -0700

    std: Set CLOEXEC for all fds opened on unix
    
    This commit starts to set the CLOEXEC flag for all files and sockets opened by
    the standard library by default on all unix platforms. There are a few points of
    note in this commit:
    
    * The implementation is not 100% satisfactory in the face of threads. File
      descriptors only have the `F_CLOEXEC` flag set *after* they are opened,
      allowing for a fork/exec to happen in the middle and leak the descriptor.
      Some platforms do support atomically opening a descriptor while setting the
      `CLOEXEC` flag, and it is left as a future extension to bind these apis as it
      is unclear how to do so nicely at this time.
    
    * The implementation does not offer a method of opting into the old behavior of
      not setting `CLOEXEC`. This will possibly be added in the future through
      extensions on `OpenOptions`, for example.
    
    * This change does not yet audit any Windows APIs to see if the handles are
      inherited by default by accident.
    
    This is a breaking change for users who call `fork` or `exec` outside of the
    standard library itself and expect file descriptors to be inherted. All file
    descriptors created by the standard library will no longer be inherited.
    
    [breaking-change]

commit 2705051e2067e8f467b4cb9bc75e801a5cd4f0e7
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Apr 9 15:43:27 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Apr 9 16:12:33 2015 -0700

    std: Make FromRawFd::from_raw_fd an unsafe method
    
    As pointed out in [RFC issue 1043][rfc] it is quite useful to have the standard
    I/O types to provide the contract that they are the sole owner of the underlying
    object they represent. This guarantee enables writing safe interfaces like the
    `MemoryMap` API sketched out in that issue.
    
    [rfc]: https://github.com/rust-lang/rfcs/issues/1043
    
    As constructing objects from these raw handles may end up violating these
    ownership gurantees, the functions for construction are now marked unsafe.
    
    [breaking-change]
    Closes rust-lang/rfcs#1043

commit 5daee19eca622030c598042d9615df17d4ad035f
Merge: 4e466e7 ec7c800
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Thu Apr 9 15:54:28 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Apr 10 00:24:43 2015 +0530

    Rollup merge of #24212 - alexcrichton:destabilize-begin-unwind, r=huonw
    
     Now that we have a `#[allow_internal_unstable]` attribute for macros there's no
    need for these two `begin_unwind` functions to be stable. Right now the `panic!`
    interface is the only one we wish to stabilize, so remove the stability markers
    from these functions.
    
    While this is a breaking change, it is highly unlikely to break any actual code.
    It is recommended to use the `panic!` macro instead if it breaks explicit calls
    into `std::rt`.
    
    [breaking-change]
    cc #24208

commit e3f324cd9d7b27eda6133c407a4751a8b0217631
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Apr 8 17:01:03 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Thu Apr 9 08:54:09 2015 -0700

    Improve bounds in Iterator API
    
    This commit changes `Iterator`'s API by:
    
    * Generalizing bounds from `Iterator` to `IntoIterator` whenever
      possible, matching the semantics and ergonomics of `for` loops.
    
    * Tightens up a few method-level bounds so that you get an error
      earlier. For example, `rev` did not require `DoubleEndedIterator` even
      though the result is only an `Iterator` when the original iterator was
      double-ended.
    
    Closes #23587
    
    The bound-tightening is technically a:
    
    [breaking-change]
    
    but no code should break in practice.

commit 65e3f0325a64d8f1affa146b3575a4b7c90458d7
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 8 15:48:46 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 8 15:48:46 2015 -0700

    std: Destabilize the internals of panic!
    
    Now that we have a `#[allow_internal_unstable]` attribute for macros there's no
    need for these two `begin_unwind` functions to be stable. Right now the `panic!`
    interface is the only one we wish to stabilize, so remove the stability markers
    from these functions.
    
    While this is a breaking change, it is highly unlikely to break any actual code.
    It is recommended to use the `panic!` macro instead if it breaks explicit calls
    into `std::rt`.
    
    [breaking-change]
    cc #24208

commit f3f99fb44eea1d7037f94259aef6cbc39837ebee
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 8 09:50:50 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 8 10:33:39 2015 -0700

    std: Fix fs::read_link behavior on Windows
    
    The current implementation of using GetFinalPathNameByHandle actually reads all
    intermediate links instead of just looking at the current link. This commit
    alters the behavior of the function to use a different API which correctly reads
    only one level of the soft link.
    
    [breaking-change]

commit 97f24a85965c3c51a2c18be029091ae52bbd7920
Author:     Tobias Bucher &lt;tobiasbucher5991@gmail.com&gt;
AuthorDate: Mon Apr 6 17:43:50 2015 +0200
Commit:     Tobias Bucher &lt;tobiasbucher5991@gmail.com&gt;
CommitDate: Wed Apr 8 00:26:35 2015 +0200

    Make `sum` and `product` inherent methods on `Iterator`
    
    In addition to being nicer, this also allows you to use `sum` and `product` for
    iterators yielding custom types aside from the standard integers.
    
    Due to removing the `AdditiveIterator` and `MultiplicativeIterator` trait, this
    is a breaking change.
    
    [breaking-change]

commit 986852911464df87088007e64780165cc538f9b9
Author:     Kevin Ballard &lt;kevin@sb.org&gt;
AuthorDate: Mon Apr 6 16:30:18 2015 -0700
Commit:     Kevin Ballard &lt;kevin@sb.org&gt;
CommitDate: Mon Apr 6 17:20:23 2015 -0700

    Add `Sync` to the bounds in `io::Error`
    
    This allows `io::Error` values to be stored in `Arc` properly.
    
    Because this requires `Sync` of any value passed to `io::Error::new()`
    and modifies the relevant `convert::From` impls, this is a
    
    [breaking-change]
    
    Fixes #24049.

commit f1dabed82bfed643fbbfc93203473e384c58d20a
Author:     Simonas Kazlauskas &lt;git@kazlauskas.me&gt;
AuthorDate: Wed Mar 4 01:08:06 2015 +0200
Commit:     Simonas Kazlauskas &lt;git@kazlauskas.me&gt;
CommitDate: Fri Apr 3 15:48:07 2015 +0300

    Introduce trans::declare
    
    We provide tools to tell what exact symbols to emit for any fn or static, but
    don’t quite check if that won’t cause any issues later on. Some of the issues
    include LLVM mangling our names again and our names pointing to wrong locations,
    us generating dumb foreign call wrappers, linker errors, extern functions
    resolving to different symbols altogether (extern {fn fail();} fail(); in some
    cases calling fail1()), etc.
    
    Before the commit we had a function called note_unique_llvm_symbol, so it is
    clear somebody was aware of the issue at some point, but the function was barely
    used, mostly in irrelevant locations.
    
    Along with working on it I took liberty to start refactoring trans/base into
    a few smaller modules. The refactoring is incomplete and I hope I will find some
    motivation to carry on with it.
    
    This is possibly a [breaking-change] because it makes dumbly written code
    properly invalid.

commit 82dcec7ee4a8a71fdfb8e8771ae6785261ec1d5b
Merge: fc98b19 7c3efcc
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Apr 3 07:13:51 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Apr 3 07:13:51 2015 +0000

    Auto merge of #23934 - lfairy:write-no-deref, r=alexcrichton
    
    This means passing in e.g. a `Vec&lt;u8&gt;` or `String` will work as
    intended, rather than deref-ing to `&amp;mut [u8]` or `&amp;mut str`.
    
    [breaking-change]
    
    Closes #23768

commit fc98b19cf72ea45851ebb7b28af160be92b19128
Merge: 5e30f05 883adc6
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Apr 3 04:29:52 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Apr 3 04:29:52 2015 +0000

    Auto merge of #23832 - petrochenkov:usize, r=aturon
    
    These constants are small and can fit even in `u8`, but semantically they have type `usize` because they denote sizes and are almost always used in `usize` context. The change of their type to `u32` during the integer audit led only to the large amount of `as usize` noise (see the second commit, which removes this noise).
    
    This is a minor [breaking-change] to an unstable interface.
    
    r? @aturon

commit 655634e6ab00707ef98034dcfb32000cbfa7a01c
Merge: bb252a8 371277f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 1 13:56:20 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 1 13:56:20 2015 -0700

    rollup merge of #23949: aturon/stab-timeout
    
    This commit renames and stabilizes:
    
    * `Condvar::wait_timeout_ms` (renamed from `wait_timeout`)
    * `thread::park_timeout_ms` (renamed from `park_timeout`)
    * `thread::sleep_ms` (renamed from `sleep`)
    
    In each case, the timeout is taken as a `u32` number of milliseconds,
    rather than a `Duration`.
    
    These functions are likely to be deprecated once a stable form of
    `Duration` is available, but there is little cost to having these named
    variants around, and it's crucial functionality for 1.0.
    
    [breaking-change]
    
    r? @alexcrichton
    
    cc @sfackler @carllerche

commit 371277fb0d210152eb8c79e30bd7f7749c5af63c
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Apr 1 12:20:57 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Wed Apr 1 13:43:45 2015 -0700

    Stabilize basic timeout functionality
    
    This commit renames and stabilizes:
    
    * `Condvar::wait_timeout_ms` (renamed from `wait_timeout`)
    * `thread::park_timeout_ms` (renamed from `park_timeout`)
    * `thread::sleep_ms` (renamed from `sleep`)
    
    In each case, the timeout is taken as a `u32` number of milliseconds,
    rather than a `Duration`.
    
    These functions are likely to be deprecated once a stable form of
    `Duration` is available, but there is little cost to having these named
    variants around, and it's crucial functionality for 1.0.
    
    [breaking-change]

commit e9bacbaa2c9c88aaecf07ee30f02d08a1999e5c6
Merge: fb4029f e98dce3
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 1 13:30:08 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 1 13:30:08 2015 -0700

    rollup merge of #23951: alexcrichton/splitn
    
    This commit is an implementation of [RFC 979][rfc] which changes the meaning of
    the count parameter to the `splitn` function on strings and slices. The
    parameter now means the number of items that are returned from the iterator, not
    the number of splits that are made.
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/979
    
    Closes #23911
    [breaking-change]

commit e98dce3e00a7b6bfd264418ef993bbf9cdb1f0b6
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Apr 1 11:28:34 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Apr 1 13:29:42 2015 -0700

    std: Changing the meaning of the count to splitn
    
    This commit is an implementation of [RFC 979][rfc] which changes the meaning of
    the count parameter to the `splitn` function on strings and slices. The
    parameter now means the number of items that are returned from the iterator, not
    the number of splits that are made.
    
    [rfc]: https://github.com/rust-lang/rfcs/pull/979
    
    Closes #23911
    [breaking-change]

commit cade32acf6f5ff209ee082d70350d9bc0362985a
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Wed Apr 1 11:12:30 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Wed Apr 1 14:41:21 2015 -0400

    Remove `Thunk` struct and `Invoke` trait; change `Thunk` to be an alias
    for `Box&lt;FnBox()&gt;`. I found the alias was still handy because it is
    shorter than the fully written type.
    
    This is a [breaking-change]: convert code using `Invoke` to use `FnBox`,
    which is usually pretty straight-forward. Code using thunk mostly works
    if you change `Thunk::new =&gt; Box::new` and `foo.invoke(arg)` to
    `foo(arg)`.

commit 7c3efcc5bb260234fc163340c9fd7aad3d8d780e
Author:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
AuthorDate: Wed Apr 1 19:48:49 2015 +1300
Commit:     Chris Wong &lt;lambda.fairy@gmail.com&gt;
CommitDate: Wed Apr 1 19:48:49 2015 +1300

    Don't reborrow the target of a `write!()`
    
    This means passing in e.g. a `Vec&lt;u8&gt;` or `String` will work as
    intended, rather than deref-ing to `&amp;mut [u8]` or `&amp;mut str`.
    
    [breaking-change]
    
    Closes #23768

commit ac77392f8ab1c201b0c927f6a2d30b632b95acda
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 16:01:03 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 16:12:48 2015 -0700

    std: Stabilize last bits of io::Error
    
    This commit stabilizes a few remaining bits of the `io::Error` type:
    
    * The `Error::new` method is now stable. The last `detail` parameter was removed
      and the second `desc` parameter was generalized to `E: Into&lt;Box&lt;Error&gt;&gt;` to
      allow creating an I/O error from any form of error. Currently there is no form
      of downcasting, but this will be added in time.
    
    * An implementation of `From&lt;&amp;str&gt; for Box&lt;Error&gt;` was added to liballoc to
      allow construction of errors from raw strings.
    
    * The `Error::raw_os_error` method was stabilized as-is.
    
    * Trait impls for `Clone`, `Eq`, and `PartialEq` were removed from `Error` as it
      is not possible to use them with trait objects.
    
    This is a breaking change due to the modification of the `new` method as well as
    the removal of the trait implementations for the `Error` type.
    
    [breaking-change]

commit 3422be3666cba57f1a6fb6ab3deb1a6df66b7695
Merge: 30283d4 608fff8
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 15:59:35 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:59:35 2015 -0700

    rollup merge of #23288: alexcrichton/issue-19470
    
    This is a deprecated attribute that is slated for removal, and it also affects
    all implementors of the trait. This commit removes the attribute and fixes up
    implementors accordingly. The primary implementation which was lost was the
    ability to compare `&amp;[T]` and `Vec&lt;T&gt;` (in that order).
    
    This change also modifies the `assert_eq!` macro to not consider both directions
    of equality, only the one given in the left/right forms to the macro. This
    modification is motivated due to the fact that `&amp;[T] == Vec&lt;T&gt;` no longer
    compiles, causing hundreds of errors in unit tests in the standard library (and
    likely throughout the community as well).
    
    Closes #19470
    [breaking-change]

commit da04788efca6ec1e421139fb4916a5aacd49a2e2
Merge: 94137a3 9fc51ef
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 11:26:10 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:53:26 2015 -0700

    rollup merge of #23875: aturon/revise-convert-2
    
    * Marks `#[stable]` the contents of the `std::convert` module.
    
    * Added methods `PathBuf::as_path`, `OsString::as_os_str`,
      `String::as_str`, `Vec::{as_slice, as_mut_slice}`.
    
    * Deprecates `OsStr::from_str` in favor of a new, stable, and more
      general `OsStr::new`.
    
    * Adds unstable methods `OsString::from_bytes` and `OsStr::{to_bytes,
      to_cstring}` for ergonomic FFI usage.
    
    [breaking-change]
    
    r? @alexcrichton

commit d03120afd36f9e3f4c1305e9e5ca0d24a3b4a32f
Merge: 890f0ab f19e763
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 10:15:32 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:49:11 2015 -0700

    rollup merge of #23876: alexcrichton/stabilize-any
    
    This commit stabilizes the following APIs:
    
    * `TypeId::of` - now that it has an `Any` bound it's ready to be stable.
    * `Box&lt;Any&gt;::downcast` - now that an inherent impl on `Box&lt;Any&gt;` as well as
      `Box&lt;Any+Send&gt;` is allowed the `BoxAny` trait is removed in favor of these
      inherent methods.
    
    This is a breaking change due to the removal of the `BoxAny` trait, but
    consumers can simply remove imports to fix crates.
    
    [breaking-change]

commit 890f0ab10a81720606805db36628f61f29d0e816
Merge: 1829974 6370f29
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 10:15:29 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 15:49:10 2015 -0700

    rollup merge of #23766: alexcrichton/stabilize-raw-fd
    
    This commit stabilizes the platform-specific `io` modules, specifically around
    the traits having to do with the raw representation of each object on each
    platform.
    
    Specifically, the following material was stabilized:
    
    * `AsRaw{Fd,Socket,Handle}`
    * `RawFd` (renamed from `Fd`)
    * `RawHandle` (renamed from `Handle`)
    * `RawSocket` (renamed from `Socket`)
    * `AsRaw{Fd,Socket,Handle}` implementations
    * `std::os::{unix, windows}::io`
    
    The following material was added as `#[unstable]`:
    
    * `FromRaw{Fd,Socket,Handle}`
    * Implementations for various primitives
    
    There are a number of future improvements that are possible to make to this
    module, but this should cover a good bit of functionality desired from these
    modules for now. Some specific future additions may include:
    
    * `IntoRawXXX` traits to consume the raw representation and cancel the
      auto-destructor.
    * `Fd`, `Socket`, and `Handle` abstractions that behave like Rust objects and
      have nice methods for various syscalls.
    
    At this time though, these are considered backwards-compatible extensions and
    will not be stabilized at this time.
    
    This commit is a breaking change due to the addition of `Raw` in from of the
    type aliases in each of the platform-specific modules.
    
    [breaking-change]

commit 5cf126ae2f6af1cdac901f6995e3c2bab35e587f
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 10 17:59:23 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 13:39:14 2015 -0700

    std: Remove #[old_orphan_check] from PartialEq
    
    This is a deprecated attribute that is slated for removal, and it also affects
    all implementors of the trait. This commit removes the attribute and fixes up
    implementors accordingly. The primary implementation which was lost was the
    ability to compare `&amp;[T]` and `Vec&lt;T&gt;` (in that order).
    
    This change also modifies the `assert_eq!` macro to not consider both directions
    of equality, only the one given in the left/right forms to the macro. This
    modification is motivated due to the fact that `&amp;[T] == Vec&lt;T&gt;` no longer
    compiles, causing hundreds of errors in unit tests in the standard library (and
    likely throughout the community as well).
    
    cc #19470
    [breaking-change]

commit 9fc51efe3344a32d9e522f08383f052277b6ab63
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Mon Mar 30 15:15:27 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Tue Mar 31 11:24:38 2015 -0700

    Stabilize `std::convert` and related code
    
    * Marks `#[stable]` the contents of the `std::convert` module.
    
    * Added methods `PathBuf::as_path`, `OsString::as_os_str`,
      `String::as_str`, `Vec::{as_slice, as_mut_slice}`.
    
    * Deprecates `OsStr::from_str` in favor of a new, stable, and more
      general `OsStr::new`.
    
    * Adds unstable methods `OsString::from_bytes` and `OsStr::{to_bytes,
      to_cstring}` for ergonomic FFI usage.
    
    [breaking-change]

commit 5d0beb7d85e8e711334c7fb6f2c5da270e5200cb
Merge: b3317d6 232424d
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 31 10:15:26 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 31 10:15:26 2015 -0700

    rollup merge of #23549: aturon/stab-num
    
    This commit stabilizes the `std::num` module:
    
    * The `Int` and `Float` traits are deprecated in favor of (1) the
      newly-added inherent methods and (2) the generic traits available in
      rust-lang/num.
    
    * The `Zero` and `One` traits are reintroduced in `std::num`, which
      together with various other traits allow you to recover the most
      common forms of generic programming.
    
    * The `FromStrRadix` trait, and associated free function, is deprecated
      in favor of inherent implementations.
    
    * A wide range of methods and constants for both integers and floating
      point numbers are now `#[stable]`, having been adjusted for integer
      guidelines.
    
    * `is_positive` and `is_negative` are renamed to `is_sign_positive` and
      `is_sign_negative`, in order to address #22985
    
    * The `Wrapping` type is moved to `std::num` and stabilized;
      `WrappingOps` is deprecated in favor of inherent methods on the
      integer types, and direct implementation of operations on
      `Wrapping&lt;X&gt;` for each concrete integer type `X`.
    
    Closes #22985
    Closes #21069
    
    [breaking-change]
    
    r? @alexcrichton

commit 80bf31dd514055177b22c3dc66836d39eb5b1648
Merge: b3317d6 232424d
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 31 14:50:46 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 31 14:50:46 2015 +0000

    Auto merge of #23549 - aturon:stab-num, r=alexcrichton
    
    This commit stabilizes the `std::num` module:
    
    * The `Int` and `Float` traits are deprecated in favor of (1) the
      newly-added inherent methods and (2) the generic traits available in
      rust-lang/num.
    
    * The `Zero` and `One` traits are reintroduced in `std::num`, which
      together with various other traits allow you to recover the most
      common forms of generic programming.
    
    * The `FromStrRadix` trait, and associated free function, is deprecated
      in favor of inherent implementations.
    
    * A wide range of methods and constants for both integers and floating
      point numbers are now `#[stable]`, having been adjusted for integer
      guidelines.
    
    * `is_positive` and `is_negative` are renamed to `is_sign_positive` and
      `is_sign_negative`, in order to address #22985
    
    * The `Wrapping` type is moved to `std::num` and stabilized;
      `WrappingOps` is deprecated in favor of inherent methods on the
      integer types, and direct implementation of operations on
      `Wrapping&lt;X&gt;` for each concrete integer type `X`.
    
    Closes #22985
    Closes #21069
    
    [breaking-change]
    
    r? @alexcrichton

commit 232424d9952700682373ccf2d578109f401ff023
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Thu Mar 19 23:42:18 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Tue Mar 31 07:50:25 2015 -0700

    Stabilize std::num
    
    This commit stabilizes the `std::num` module:
    
    * The `Int` and `Float` traits are deprecated in favor of (1) the
      newly-added inherent methods and (2) the generic traits available in
      rust-lang/num.
    
    * The `Zero` and `One` traits are reintroduced in `std::num`, which
      together with various other traits allow you to recover the most
      common forms of generic programming.
    
    * The `FromStrRadix` trait, and associated free function, is deprecated
      in favor of inherent implementations.
    
    * A wide range of methods and constants for both integers and floating
      point numbers are now `#[stable]`, having been adjusted for integer
      guidelines.
    
    * `is_positive` and `is_negative` are renamed to `is_sign_positive` and
      `is_sign_negative`, in order to address #22985
    
    * The `Wrapping` type is moved to `std::num` and stabilized;
      `WrappingOps` is deprecated in favor of inherent methods on the
      integer types, and direct implementation of operations on
      `Wrapping&lt;X&gt;` for each concrete integer type `X`.
    
    Closes #22985
    Closes #21069
    
    [breaking-change]

commit 57938041c18ee1c1bef362e60f24f5b2d3a46213
Merge: 464c18c acd48a2
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 31 09:04:38 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 31 09:04:38 2015 +0530

    Rollup merge of #23866 - alexcrichton:switch-some-orders, r=aturon
    
    This functions swaps the order of arguments to a few functions that previously
    took (output, input) parameters, but now take (input, output) parameters (in
    that order).
    
    The affected functions are:
    
    * ptr::copy
    * ptr::copy_nonoverlapping
    * slice::bytes::copy_memory
    * intrinsics::copy
    * intrinsics::copy_nonoverlapping
    
    Closes #22890
    [breaking-change]

commit 606f50c46dd9a3852d36456d2015e1ccf832642e
Author:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
AuthorDate: Tue Mar 31 00:27:13 2015 +1100
Commit:     Huon Wilson &lt;dbau.pp+github@gmail.com&gt;
CommitDate: Tue Mar 31 12:16:42 2015 +1100

    Lex binary and octal literals more eagerly.
    
    Previously 0b12 was considered two tokens, 0b1 and 2, as 2 isn't a valid
    base 2 digit. This patch changes that to collapse them into one (and
    makes `0b12` etc. an error: 2 isn't a valid base 2 digit).
    
    This may break some macro invocations of macros with `tt` (or syntax
    extensions) that rely on adjacent digits being separate tokens and hence
    is a
    
    [breaking-change]
    
    The fix is to separate the tokens, e.g. `0b12` -&gt; `0b1 2`.
    
    cc https://github.com/rust-lang/rfcs/pull/879

commit e17f4fc1d4545f5c17b21805c5145b05495484ee
Author:     Sean McArthur &lt;sean.monstar@gmail.com&gt;
AuthorDate: Mon Mar 30 17:56:48 2015 -0700
Commit:     Sean McArthur &lt;sean.monstar@gmail.com&gt;
CommitDate: Mon Mar 30 18:08:58 2015 -0700

    convert: remove FromError, use From&lt;E&gt; instead
    
    This removes the FromError trait, since it can now be expressed using
    the new convert::Into trait. All implementations of FromError&lt;E&gt; where
    changed to From&lt;E&gt;, and `try!` was changed to use From::from instead.
    
    Because this removes FromError, it is a breaking change, but fixing it
    simply requires changing the words `FromError` to `From`, and
    `from_error` to `from`.
    
    [breaking-change]

commit f19e763e0824a73118ed715f526cb7bdd584d4c4
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 30 16:43:04 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 30 16:44:11 2015 -0700

    std: Stabilize the rest of Any/BoxAny
    
    This commit stabilizes the following APIs:
    
    * `TypeId::of` - now that it has an `Any` bound it's ready to be stable.
    * `Box&lt;Any&gt;::downcast` - now that an inherent impl on `Box&lt;Any&gt;` as well as
      `Box&lt;Any+Send&gt;` is allowed the `BoxAny` trait is removed in favor of these
      inherent methods.
    
    This is a breaking change due to the removal of the `BoxAny` trait, but
    consumers can simply remove imports to fix crates.
    
    [breaking-change]

commit acd48a2b3e7fcc0372f7718a2fac1cf80e03db95
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 27 11:12:28 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 30 14:08:40 2015 -0700

    std: Standardize (input, output) param orderings
    
    This functions swaps the order of arguments to a few functions that previously
    took (output, input) parameters, but now take (input, output) parameters (in
    that order).
    
    The affected functions are:
    
    * ptr::copy
    * ptr::copy_nonoverlapping
    * slice::bytes::copy_memory
    * intrinsics::copy
    * intrinsics::copy_nonoverlapping
    
    Closes #22890
    [breaking-change]

commit 14192d6df5cc714e5c9a3ca70b08f2514d977be2
Merge: f002640 e64b677
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Mar 30 11:35:52 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Mar 30 11:35:52 2015 +0000

    Auto merge of #23848 - cmr:no-compiler-docs, r=huonw
    
    This saves a bunch of a time and will make distributions smaller, as well as
    avoiding filling the implementors page with internal garbage. Turn it back on
    with `--enable-compiler-docs` if you want them.
    
    (Crates behind the facade are not documented at all)
    
    [breaking-change]

commit c92bdcb232da3973a8a548e6b2044b610e286210
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Tue Mar 24 15:45:11 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Mon Mar 30 05:02:20 2015 -0400

    Fallout where types must be specified.
    
    This is due to a [breaking-change] to operators. The primary affected
    code is uses of the `Rng` trait where we used to (incorrectly) infer the
    right-hand-side type from the left-hand-side, in the case that the LHS
    type was a scalar like `i32`. The fix is to add a type annotation like
    `x + rng.gen::&lt;i32&gt;()`.

commit e64b677ca66d742e7c06738bacf3a160cba827a7
Author:     Corey Richardson &lt;corey@octayn.net&gt;
AuthorDate: Fri Mar 27 23:01:19 2015 -0400
Commit:     Corey Richardson &lt;corey@octayn.net&gt;
CommitDate: Sun Mar 29 06:15:51 2015 -0400

    mk: don't build docs for internal or behind-the-facade crates in beta/stable
    
    This saves a bunch of a time and will make distributions smaller, as well as
    avoiding filling the implementors page with internal garbage. Turn it back on
    with `--enable-compiler-docs` if you want compiler docs during development.
    
    Crates behind the facade are only documented on nightly/dev builds (where they
    can be used).
    
    [breaking-change]
    
    Closes #23772
    Closes #21297

commit 227b46bdede794d5c8476b810bb1c30926bd9c04
Merge: 27af78c 3c0c8fc
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sun Mar 29 05:21:29 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sun Mar 29 05:21:29 2015 +0000

    Auto merge of #23810 - sfackler:debug-collections, r=alexcrichton
    
    The collections debug helpers no longer prefix output with the
    collection name, in line with the current conventions for Debug
    implementations. Implementations that want to preserve the current
    behavior can simply add a `try!(write!(fmt, "TypeName "));` at the
    beginning of the `fmt` method.
    
    [breaking-change]

commit c89de2c56baeb61e7cc434924dcc8bedd32b26b8
Merge: 01f2c67 d502f42
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Mar 28 22:11:49 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Mar 28 22:11:49 2015 +0000

    Auto merge of #23300 - sfackler:rm-iterator-ext, r=alexcrichton
    
    All methods are inlined into Iterator with `Self: Sized` bounds to make
    sure Iterator is still object safe.
    
    [breaking-change]
    
    This is blocked on ICEs: https://gist.github.com/sfackler/5aff7c57cf8d896e2c6f
    Seem to be similar to #23281.

commit d502f4221fd5472c4a7905cdc3c59533e9612822
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Wed Mar 11 22:41:24 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Sat Mar 28 13:53:45 2015 -0700

    Remove IteratorExt
    
    All methods are inlined into Iterator with `Self: Sized` bounds to make
    sure Iterator is still object safe.
    
    [breaking-change]

commit 4037f2a368edd75c561bc6f3d8c6f0d644bc4180
Author:     Steven Fackler &lt;sfackler@gmail.com&gt;
AuthorDate: Thu Mar 26 22:42:29 2015 -0700
Commit:     Steven Fackler &lt;sfackler@gmail.com&gt;
CommitDate: Sat Mar 28 10:33:51 2015 -0700

    Update debug helpers and add list builder
    
    The collections debug helpers no longer prefix output with the
    collection name, in line with the current conventions for Debug
    implementations. Implementations that want to preserve the current
    behavior can simply add a `try!(write!(fmt, "TypeName "));` at the
    beginning of the `fmt` method.
    
    [breaking-change]

commit f8b6e28e758231f611e8e7923aa607cebd150717
Merge: 9f9e251 3feeea5
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Sat Mar 28 09:09:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Sat Mar 28 09:09:50 2015 +0000

    Auto merge of #23799 - reem:error-no-send, r=aturon
    
    The Send bound is an unnecessary restriction, and though provided as a convenience, can't be removed by downstream code.
    
    The removal of this bound is a [breaking-change] since it removes an implicit Send bound on all `E: Error` and all `Error` trait objects.
    
    To migrate, consider if your code actually requires the Send bound and, if so, add it explicitly.
    
    Fixes #23774
    
    r? @aturon

commit 3feeea59dbfe397cccc6760b68f7bfb8291540b7
Author:     Jonathan Reem &lt;jonathan.reem@gmail.com&gt;
AuthorDate: Fri Mar 27 16:35:16 2015 -0700
Commit:     Jonathan Reem &lt;jonathan.reem@gmail.com&gt;
CommitDate: Fri Mar 27 16:35:16 2015 -0700

    Make `std::error::Error` not inherit from Send
    
    The Send bound is an unnecessary restriction, and though provided as a
    convenience, can't be removed by downstream code.
    
    The removal of this bound is a [breaking-change] since it
    removes an implicit Send bound on all `E: Error` and all
    `Error` trait objects.
    
    To migrate, consider if your code actually requires the Send
    bound and, if so, add it explicitly.
    
    Fixes #23774

commit 1639e51f6e4d036478705f4581de3a7417ccec0f
Author:     Brian Anderson &lt;banderson@mozilla.com&gt;
AuthorDate: Thu Mar 26 18:34:27 2015 -0700
Commit:     Brian Anderson &lt;banderson@mozilla.com&gt;
CommitDate: Fri Mar 27 12:50:49 2015 -0700

    Feature gate *all* slice patterns. #23121
    
    Until some backwards-compatibility hazards are fixed in #23121,
    these need to be unstable.
    
    [breaking-change]

commit b24a3b82011c3b78573ace4ade3f99d7c4701a11
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Mar 26 17:35:13 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Mar 27 10:19:59 2015 -0700

    rustc: Remove support for hyphens in crate names
    
    This commit removes parser support for `extern crate "foo" as bar` as the
    renamed crate is now required to be an identifier. Additionally this commit
    enables hard errors on crate names that contain hyphens in them, they must now
    solely contain alphanumeric characters or underscores.
    
    If the crate name is inferred from the file name, however, the file name
    `foo-bar.rs` will have the crate name inferred as `foo_bar`. If a binary is
    being emitted it will have the name `foo-bar` and a library will have the name
    `libfoo_bar.rlib`.
    
    This commit is a breaking change for a number of reasons:
    
    * Old syntax is being removed. This was previously only issuing warnings.
    * The output for the compiler when input is received on stdin is now `rust_out`
      instead of `rust-out`.
    * The crate name for a crate in the file `foo-bar.rs` is now `foo_bar` which can
      affect infrastructure such as logging.
    
    [breaking-change]

commit 45f1324037b098d6e92da7b34cc0aba274fdae97
Merge: a491d21 c9f600b
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 27 10:07:52 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Mar 27 10:07:52 2015 -0700

    rollup merge of #23771: aturon/stab-straggle-1
    
    Marks as `#[stable}`:
    
    * `ok_or`
    * `ok_or_else`
    * `iter_mut`
    * `cloned`
    
    Similarly to `IteratorExt::cloned`, the `cloned` method is pared down to
    work only on `Option&lt;&amp;T&gt;`. Thus, this is a:
    
    [breaking-change]
    
    r? @alexcrichton

commit e42521aa58be928dd62b5450c443368d29ab6a65
Merge: 0e5052c b68ca84
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Fri Mar 27 10:07:41 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Fri Mar 27 10:07:41 2015 -0700

    rollup merge of #23535: pnkfelix/fsk-filling-drop
    
    Replace zeroing-on-drop with filling-on-drop.
    
    This is meant to set the stage for removing *all* zeroing and filling (on drop) in the future.
    
    Note that the code is meant to be entirely abstract with respect to the particular values used for the drop flags: the final commit demonstrates how to go from zeroing-on-drop to filling-on-drop by changing the value of three constants (in two files).
    
    See further discussion on the internals thread:
      http://internals.rust-lang.org/t/attention-hackers-filling-drop/1715/11
    
    [breaking-change] especially for structs / enums using `#[unsafe_no_drop_flag]`.

commit c9f600bceeb5086ea292c3872ee3094ce770f9b0
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Thu Mar 26 17:47:13 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Thu Mar 26 17:47:13 2015 -0700

    Stabilize some stragglers in `std::option`
    
    Marks as `#[stable}`:
    
    * `ok_or`
    * `ok_or_else`
    * `iter_mut`
    * `cloned`
    
    Similarly to `IteratorExt::cloned`, the `cloned` method is pared down to
    work only on `Option&lt;&amp;T&gt;`. Thus, this is a:
    
    [breaking-change]

commit 6370f2978e485fd46bcb64f51a1c003395acfedc
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Mar 26 16:18:29 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Mar 26 16:40:36 2015 -0700

    std: Stabilize parts of std::os::platform::io
    
    This commit stabilizes the platform-specific `io` modules, specifically around
    the traits having to do with the raw representation of each object on each
    platform.
    
    Specifically, the following material was stabilized:
    
    * `AsRaw{Fd,Socket,Handle}`
    * `RawFd` (renamed from `Fd`)
    * `RawHandle` (renamed from `Handle`)
    * `RawSocket` (renamed from `Socket`)
    * `AsRaw{Fd,Socket,Handle}` implementations
    * `std::os::{unix, windows}::io`
    
    The following material was added as `#[unstable]`:
    
    * `FromRaw{Fd,Socket,Handle}`
    * Implementations for various primitives
    
    There are a number of future improvements that are possible to make to this
    module, but this should cover a good bit of functionality desired from these
    modules for now. Some specific future additions may include:
    
    * `IntoRawXXX` traits to consume the raw representation and cancel the
      auto-destructor.
    * `Fd`, `Socket`, and `Handle` abstractions that behave like Rust objects and
      have nice methods for various syscalls.
    
    At this time though, these are considered backwards-compatible extensions and
    will not be stabilized at this time.
    
    This commit is a breaking change due to the addition of `Raw` in from of the
    type aliases in each of the platform-specific modules.
    
    [breaking-change]

commit 9754b06cd80cfcc523573535090519bec935fec3
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Thu Mar 26 13:25:06 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Thu Mar 26 13:25:33 2015 -0700

    rustc: Remove support for old_impl_check
    
    This commit removes compiler support for the `old_impl_check` attribute which
    should in theory be entirely removed now. The last remaining use of it in the
    standard library has been updated by moving the type parameter on the
    `old_io::Acceptor` trait into an associated type. As a result, this is a
    breaking change for all current users of the deprecated `old_io::Acceptor`
    trait. Code can be migrated by using the `Connection` associated type instead.
    
    [breaking-change]

commit 3b13b9c2b4e72d08cb1c68024ccc4f50001f4878
Merge: 91b633a 1955e05
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Tue Mar 24 15:27:14 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Tue Mar 24 15:27:14 2015 -0700

    rollup merge of #23638: pnkfelix/fsk-reject-specialized-drops
    
    Reject specialized Drop impls.
    
    See Issue #8142 for discussion.
    
    This makes it illegal for a Drop impl to be more specialized than the original item.
    
    So for example, all of the following are now rejected (when they would have been blindly accepted before):
    
    ```rust
    struct S&lt;A&gt; { ... };
    impl Drop for S&lt;i8&gt; { ... } // error: specialized to concrete type
    
    struct T&lt;'a&gt; { ... };
    impl Drop for T&lt;'static&gt; { ... } // error: specialized to concrete region
    
    struct U&lt;A&gt; { ... };
    impl&lt;A:Clone&gt; Drop for U&lt;A&gt; { ... } // error: added extra type requirement
    
    struct V&lt;'a,'b&gt;;
    impl&lt;'a,'b:a&gt; Drop for V&lt;'a,'b&gt; { ... } // error: added extra region requirement
    ```
    
    Due to examples like the above, this is a [breaking-change].
    
    (The fix is to either remove the specialization from the `Drop` impl, or to transcribe the requirements into the struct/enum definition; examples of both are shown in the PR's fixed to `libstd`.)
    
    ----
    
    This is likely to be the last thing blocking the removal of the `#[unsafe_destructor]` attribute.
    
    Fix #8142
    Fix #23584

commit 5b2e8693e42dee545d336c0364773b3fbded93a5
Author:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
AuthorDate: Sat Mar 21 13:12:08 2015 +0100
Commit:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
CommitDate: Tue Mar 24 22:27:23 2015 +0100

    Reject specialized Drop impls.
    
    See Issue 8142 for discussion.
    
    This makes it illegal for a Drop impl to be more specialized than the
    original item.
    
    So for example, all of the following are now rejected (when they would
    have been blindly accepted before):
    
    ```rust
    struct S&lt;A&gt; { ... };
    impl Drop for S&lt;i8&gt; { ... } // error: specialized to concrete type
    
    struct T&lt;'a&gt; { ... };
    impl Drop for T&lt;'static&gt; { ... } // error: specialized to concrete region
    
    struct U&lt;A&gt; { ... };
    impl&lt;A:Clone&gt; Drop for U&lt;A&gt; { ... } // error: added extra type requirement
    
    struct V&lt;'a,'b&gt;;
    impl&lt;'a,'b:a&gt; Drop for V&lt;'a,'b&gt; { ... } // error: added extra region requirement
    ```
    
    Due to examples like the above, this is a [breaking-change].
    
    (The fix is to either remove the specialization from the `Drop` impl,
    or to transcribe the requirements into the struct/enum definition;
    examples of both are shown in the PR's fixed to `libstd`.)
    
    ----
    
    This is likely to be the last thing blocking the removal of the
    `#[unsafe_destructor]` attribute.
    
    Includes two new error codes for the new dropck check.
    
    Update run-pass tests to accommodate new dropck pass.
    
    Update tests and docs to reflect new destructor restriction.
    
    ----
    
    Implementation notes:
    
    We identify Drop impl specialization by not being as parametric as the
    struct/enum definition via unification.
    
    More specifically:
    
     1. Attempt unification of a skolemized instance of the struct/enum
        with an instance of the Drop impl's type expression where all of
        the impl's generics (i.e. the free variables of the type
        expression) have been replaced with unification variables.
    
     2. If unification fails, then reject Drop impl as specialized.
    
     3. If unification succeeds, check if any of the skolemized
        variables "leaked" into the constraint set for the inference
        context; if so, then reject Drop impl as specialized.
    
     4. Otherwise, unification succeeded without leaking skolemized
        variables: accept the Drop impl.
    
    We identify whether a Drop impl is injecting new predicates by simply
    looking whether the predicate, after an appropriate substitution,
    appears on the struct/enum definition.

commit 9330bae4bde720dbdf8d379bd5529a1bb7a6f1e9
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Wed Mar 11 10:08:33 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Mon Mar 23 19:57:30 2015 -0400

    Fallout from changing fn traits to use inheritance rather than bridge
    impls. This is a [breaking-change] (for gated code) in that when you
    implement `Fn` (`FnMut`) you must also implement `FnOnce`. This commit
    demonstrates how to fix it.

commit 753efb5042563dd34a4a524197fa14a129ddf449
Merge: 388e5ae 57cf2de
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 23 15:10:50 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 23 15:10:50 2015 -0700

    rollup merge of #23601: nikomatsakis/by-value-index
    
    This is a [breaking-change]. When indexing a generic map (hashmap, etc) using the `[]` operator, it is now necessary to borrow explicitly, so change `map[key]` to `map[&amp;key]` (consistent with the `get` routine). However, indexing of string-valued maps with constant strings can now be written `map["abc"]`.
    
    r? @japaric
    cc @aturon @Gankro

commit 2153c581ef66de1537286b58b1b323d24c25d07f
Merge: b97e1cc 6bd3ab0
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 23 15:09:09 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 23 15:09:09 2015 -0700

    rollup merge of #23557: aturon/rfc-909
    
    This commit implements [RFC 909](https://github.com/rust-lang/rfcs/pull/909):
    
    The `std::thread_local` module is now deprecated, and its contents are
    available directly in `std::thread` as `LocalKey`, `LocalKeyState`, and
    `ScopedKey`.
    
    The macros remain exactly as they were, which means little if any code
    should break. Nevertheless, this is technically a:
    
    [breaking-change]
    
    Closes #23547

commit b97e1cc28e0d3fe6a745a02a7c1750564a090f34
Merge: fd13400 9231ceb
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 23 15:09:08 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 23 15:09:08 2015 -0700

    rollup merge of #23541: aturon/stab-error
    
    This small commit stabilizes the `Error` trait as-is, except that `Send`
    and `Debug` are added as constraints. The `Send` constraint is because
    most uses of `Error` will be for trait objects, and by default we would
    like these objects to be transferrable between threads. The `Debug`
    constraint is to ensure that e.g. `Box&lt;Error&gt;` is `Debug`, and because
    types that implement `Display` should certainly implement `Debug` in any case.
    
    In the near future we expect to add `Any`-like downcasting features to
    `Error`, but this is waiting on some additional
    mechanisms (`Reflect`). It will be added before 1.0 via default methods.
    
    [breaking-change]
    
    r? @alexcrichton
    
    Closes #21790

commit ad41e7cd7a3d1969e666508d7e4a3ba305cee2ec
Merge: d6054e4 45fae88
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Mon Mar 23 15:07:19 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Mon Mar 23 15:07:19 2015 -0700

    rollup merge of #23119: nikomatsakis/issue-23116-ref-mut
    
    Don't allow upcasting to a supertype in the type of the match discriminant. Fixes #23116.
    
    This is a [breaking-change] in that it closes a type hole that previously existed.
    
    r? @pnkfelix

commit 8389253df0431e58bfe0a8e0e3949d58ebe7400f
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Wed Mar 18 09:14:54 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Mar 23 15:01:45 2015 -0700

    Add generic conversion traits
    
    This commit:
    
    * Introduces `std::convert`, providing an implementation of
    RFC 529.
    
    * Deprecates the `AsPath`, `AsOsStr`, and `IntoBytes` traits, all
    in favor of the corresponding generic conversion traits.
    
      Consequently, various IO APIs now take `AsRef&lt;Path&gt;` rather than
    `AsPath`, and so on. Since the types provided by `std` implement both
    traits, this should cause relatively little breakage.
    
    * Deprecates many `from_foo` constructors in favor of `from`.
    
    * Changes `PathBuf::new` to take no argument (creating an empty buffer,
      as per convention). The previous behavior is now available as
      `PathBuf::from`.
    
    * De-stabilizes `IntoCow`. It's not clear whether we need this separate trait.
    
    Closes #22751
    Closes #14433
    
    [breaking-change]

commit f78815979706bca435bff80155b28acc80a19781
Merge: 4a81e66 45fae88
Author:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
AuthorDate: Mon Mar 23 17:05:43 2015 -0400
Commit:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
CommitDate: Mon Mar 23 17:05:43 2015 -0400

    Rollup merge of #23119 - nikomatsakis:issue-23116-ref-mut, r=pnkfelix
    
    Don't allow upcasting to a supertype in the type of the match discriminant. Fixes #23116.
    
    This is a [breaking-change] in that it closes a type hole that previously existed.
    
    r? @pnkfelix

commit 6bd3ab0d8140053475a901ad4e2e80e98955bcb0
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Fri Mar 20 00:46:13 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Mar 23 11:28:54 2015 -0700

    Implement RFC 909: move thread_local into thread
    
    This commit implements [RFC
    909](https://github.com/rust-lang/rfcs/pull/909):
    
    The `std::thread_local` module is now deprecated, and its contents are
    available directly in `std::thread` as `LocalKey`, `LocalKeyState`, and
    `ScopedKey`.
    
    The macros remain exactly as they were, which means little if any code
    should break. Nevertheless, this is technically a:
    
    [breaking-change]
    
    Closes #23547

commit 9231ceb6dd273d8101e1b3906e6060f802e6423d
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Thu Mar 19 16:37:34 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Mon Mar 23 11:27:19 2015 -0700

    Stabilize the Error trait
    
    This small commit stabilizes the `Error` trait as-is, except that `Send`
    and `Debug` are added as constraints. The `Send` constraint is because
    most uses of `Error` will be for trait objects, and by default we would
    like these objects to be transferrable between threads. The `Debug`
    constraint is to ensure that e.g. `Box&lt;Error&gt;` is `Debug`, and because
    types that implement `Display` should certainly implement `Debug` in any case.
    
    In the near future we expect to add `Any`-like downcasting features to
    `Error`, but this is waiting on some additional
    mechanisms (`Reflect`). It will be added before 1.0 via default methods.
    
    [breaking-change]

commit 45fae882568d9bf36ade39f210a2721d05e556dd
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Fri Mar 6 10:14:12 2015 -0500
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Mon Mar 23 05:30:43 2015 -0400

    When matching against a pattern (either via `match` or `let`) that
    contains ref-bindings, do not permit any upcasting from the type of
    the value being matched. Similarly, do not permit coercion in a `let`.
    
    This is a [breaking-change] in that it closes a type hole that
    previously existed, and in that coercion is not performed. You should
    be able to work around the latter by converting:
    
    ```rust
    let ref mut x: T = expr;
    ```
    
    into
    
    ```rust
    let x: T = expr;
    let ref mut x = x;
    ```
    
    Restricting coercion not to apply in the case of `let ref` or `let ref mut` is sort
    of unexciting to me, but seems the best solution:
    
    1. Mixing coercion and `let ref` or `let ref mut` is a bit odd, because you are taking
       the address of a (coerced) temporary, but only sometimes. It's not syntactically evident,
       in other words, what's going on. When you're doing a coercion, you're kind of
    
    2. Put another way, I would like to preserve the relationship that
       `equality &lt;= subtyping &lt;= coercion &lt;= as-coercion`, where this is
       an indication of the number of `(T1,T2)` pairs that are accepted by
       the various relations. Trying to mix `let ref mut` and coercion
       would create another kind of relation that is like coercion, but
       acts differently in the case where a precise match is needed.
    
    3. In any case, this is strictly more conservative than what we had
       before and we can undo it in the future if we find a way to make
       coercion mix with type equality.
    
    The change to match I feel ok about but similarly unthrilled. There is
    some subtle text already concerning whether to use eqtype or subtype
    for identifier bindings. The best fix I think would be to always have
    match use strict equality but use subtyping on identifier bindings,
    but the comment `(*)` explains why that's not working at the moment.
    As above, I think we can change this as we clean up the code there.

commit a91eece96b1c945bebb01a7e906dabc2d736a131
Merge: b0aad7d 5fe0bb7
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Sun Mar 22 01:35:39 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Mon Mar 23 04:54:26 2015 +0530

    Rollup merge of #23559 - aturon:future-proof-map-index, r=Gankro
    
     This commit removes the `IndexMut` impls on `HashMap` and `BTreeMap`, in
    order to future-proof the API against the eventual inclusion of an
    `IndexSet` trait.
    
    Ideally, we would eventually be able to support:
    
    ```rust
    map[owned_key] = val;
    map[borrowed_key].mutating_method(arguments);
    &amp;mut map[borrowed_key];
    ```
    
    but to keep the design space as unconstrained as possible, we do not
    currently want to support `IndexMut`, in case some other strategy will
    eventually be needed.
    
    Code currently using mutating index notation can use `get_mut` instead.
    
    [breaking-change]
    
    Closes #23448
    
    r? @Gankro

commit 5fe0bb743a0af0413f8989a70a4f926fa5c63074
Author:     Aaron Turon &lt;aturon@mozilla.com&gt;
AuthorDate: Fri Mar 20 10:22:57 2015 -0700
Commit:     Aaron Turon &lt;aturon@mozilla.com&gt;
CommitDate: Fri Mar 20 10:46:31 2015 -0700

    Future-proof indexing on maps: remove IndexMut
    
    This commit removes the `IndexMut` impls on `HashMap` and `BTreeMap`, in
    order to future-proof the API against the eventual inclusion of an
    `IndexSet` trait.
    
    Ideally, we would eventually be able to support:
    
    ```rust
    map[owned_key] = val;
    map[borrowed_key].mutating_method(arguments);
    &amp;mut map[borrowed_key];
    ```
    
    but to keep the design space as unconstrained as possible, we do not
    currently want to support `IndexMut`, in case some other strategy will
    eventually be needed.
    
    Code currently using mutating index notation can use `get_mut` instead.
    
    [breaking-change]
    
    Closes #23448

commit 19fef72a8c14100029e5ce39cbc5472ab091dad8
Author:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
AuthorDate: Thu Mar 19 19:52:08 2015 +0100
Commit:     Felix S. Klock II &lt;pnkfelix@pnkfx.org&gt;
CommitDate: Fri Mar 20 11:25:20 2015 +0100

    Added panic-on-overflow for rhs of left and right shift expressions.
    
    This includes a slight refactoring of the `cast_shift_rhs` and related
    functions in `trans::base`, so that I can call them from much later in
    the compiler's control flow (so that we can clearly dilineate where
    automatic conversions of the RHS occur, versus where we check it).
    
    The rhs-checking and fallback-masking is generalized to 8- and 16-bit
    values, and the fallback-masking is turned on unconditionally.
    
    Fix #10183.
    
    Is this a [breaking-change]?  I would argue it is not; it only adds a
    strict definition to what was previously undefined behavior; however,
    there might be code that was e.g. assuming that `1_i8 &lt;&lt; 17` yields 0.
    (This happens in certain contexts and at certain optimization levels.)

commit 6107e4c0b88d9e22482ed88c52b98c2ec2034bb1
Merge: 0711006 71321ff
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 20 05:36:15 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 20 12:43:15 2015 +0530

    Rollup merge of  #23534 - steveklabnik:remove_sched_threads, r=alexcrichton
    
    As @alexcrichton says, this was really a libgreen thing, and isn't
    relevant now.
    
    As this removes a technically-public function, this is a
    
    [breaking-change]

commit e2d32b74ecedc3f603def4d5130c0c300edce7d1
Merge: 3e43373 7cbc428
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 20 05:30:28 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 20 12:43:11 2015 +0530

    Rollup merge of #23525 - steveklabnik:test_tasks, r=alexcrichton
    
     We don't use 'task' anymore, these are now threads.
    
    Because this changes the name of a compiler option, this is
    
    [breaking-change]
    
    I think this is small enough to not need an RFC, nor a period of accepting both. If we want to take both for a while, I can change the patch.

commit 3e433738fb1ab9f353c943d60061d72024c6af07
Merge: 4294327 f2e3c74
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Fri Mar 20 05:30:23 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 20 12:43:11 2015 +0530

    Rollup merge of #23504 - alexcrichton:parse-error-not-unit, r=aturon
    
     The IP and socket address types all had `FromStr` implemented but the
    implementations were not marked stable, nor was the error type returned ready to
    be properly stabilized.
    
    This commit marks the implementations of `FromStr` as stable and also renamed
    the `ParseError` structure to `AddrParseError`. The error is now also an opaque
    structure that cannot be constructed outside the standard library.
    
    cc #22949
    [breaking-change]

commit fda8673531c2ecea13c86216f964feb6091b4ade
Merge: e98e391 f2e3c74
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Fri Mar 20 04:30:04 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Fri Mar 20 04:30:04 2015 +0000

    Auto merge of #23504 - alexcrichton:parse-error-not-unit, r=aturon
    
    The IP and socket address types all had `FromStr` implemented but the
    implementations were not marked stable, nor was the error type returned ready to
    be properly stabilized.
    
    This commit marks the implementations of `FromStr` as stable and also renamed
    the `ParseError` structure to `AddrParseError`. The error is now also an opaque
    structure that cannot be constructed outside the standard library.
    
    cc #22949
    [breaking-change]

commit 71321ff33fa3fe71cc1df541b3d0547b4e208923
Author:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
AuthorDate: Thu Mar 19 18:38:16 2015 -0400
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Fri Mar 20 05:36:07 2015 +0530

    Remove rt::default_sched_threads and RUST_THREADS.
    
    As @alexcrichton says, this was really a libgreen thing, and isn't
    relevant now.
    
    As this removes a technically-public function, this is a
    
    [breaking-change]
    
    Conflicts:
    	src/libtest/lib.rs

commit 7cbc42849f7586d3c567d7ac8f202839f9b968e8
Author:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
AuthorDate: Thu Mar 19 15:42:53 2015 -0400
Commit:     Steve Klabnik &lt;steve@steveklabnik.com&gt;
CommitDate: Thu Mar 19 15:42:56 2015 -0400

    RUST_TEST_TASKS -&gt; RUST_TEST_THREADS
    
    We don't use 'task' anymore, these are now threads.
    
    Because this changes the name of a compiler option, this is
    
    [breaking-change]

commit 7f53b943f94b338e4c5401f1ce9efbe7da92b0c5
Merge: 81e2396 dedac5e
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Thu Mar 19 19:15:22 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Thu Mar 19 19:15:22 2015 +0000

    Auto merge of #23430 - alexcrichton:io-error, r=aturon
    
    This commit stabilizes the `ErrorKind` enumeration which is consumed by and
    generated by the `io::Error` type. The purpose of this type is to serve as a
    cross-platform namespace to categorize errors into. Two specific issues are
    addressed as part of this stablization:
    
    * The naming of each variant was scrutinized and some were tweaked. An example
      is how `FileNotFound` was renamed to simply `NotFound`. These names should not
      show either a Unix or Windows bias and the set of names is intended to grow
      over time. For now the names will likely largely consist of those errors
      generated by the I/O APIs in the standard library.
    
    * The mapping of OS error codes onto kinds has been altered. Coalescing no
      longer occurs (multiple error codes become one kind). It is intended that each
      OS error code, if bound, corresponds to only one `ErrorKind`. The current set
      of error kinds was expanded slightly to include some networking errors.
    
    This commit also adds a `raw_os_error` function which returns an `Option&lt;i32&gt;`
    to extract the underlying raw error code from the `Error`.
    
    Closes #16666
    
    [breaking-change]

commit a32bb1bcc4c6b8806b1058c2f654415341240233
Merge: c7392be c225824
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Thu Mar 19 06:08:56 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Thu Mar 19 08:49:34 2015 +0530

    Rollup merge of #23475 - nikomatsakis:closure-ret-syntax, r=acrichto
    
     Require braces when a closure has an explicit return type. This is a [breaking-change]: instead of a closure like `|| -&gt; i32 22`, prefer `|| -&gt; i32 { 22 }`.
    
    Fixes #23420.

commit f2e3c7469b56cd744e613a05a1ea73f441f66401
Author:     Alex Crichton &lt;alex@alexcrichton.com&gt;
AuthorDate: Wed Mar 18 20:08:15 2015 -0700
Commit:     Alex Crichton &lt;alex@alexcrichton.com&gt;
CommitDate: Wed Mar 18 20:10:15 2015 -0700

    std: Stabilize FromStr implementations in std::net
    
    The IP and socket address types all had `FromStr` implemented but the
    implementations were not marked stable, nor was the error type returned ready to
    be properly stabilized.
    
    This commit marks the implementations of `FromStr` as stable and also renamed
    the `ParseError` structure to `AddrParseError`. The error is now also an opaque
    structure that cannot be constructed outside the standard library.
    
    cc #22949
    [breaking-change]

commit c225824bded695c8bced713f5a4c62fe327277bc
Author:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
AuthorDate: Wed Mar 18 09:22:38 2015 -0400
Commit:     Niko Matsakis &lt;niko@alum.mit.edu&gt;
CommitDate: Wed Mar 18 20:07:27 2015 -0400

    Require braces when a closure has an explicit return type. This is a
    [breaking-change]: instead of a closure like `|| -&gt; i32 22`, prefer `||
    -&gt; i32 { 22 }`.
    
    Fixes #23420.

commit 46f649c479ce40f3b4590590dda6c2895e8d60f6
Merge: f9a7bc5 dccd17d
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Mar 18 08:27:22 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Mar 18 08:27:22 2015 +0000

    Auto merge of #22838 - petrochenkov:bytelit, r=alexcrichton
    
    This patch changes the type of byte string literals from `&amp;[u8]` to `&amp;[u8; N]`.
    It also implements some necessary traits (`IntoBytes`, `Seek`, `Read`, `BufRead`) for fixed-size arrays (also related to #21725) and adds test for #17233, which seems to be resolved.
    
    Fixes #18465
    [breaking-change]

commit c10918905fda1344e78bc16e6e73294d096ee97d
Merge: 1ae32de 0947f40
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Wed Mar 18 03:22:12 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Wed Mar 18 03:22:12 2015 +0000

    Auto merge of #23452 - nikomatsakis:unsafety-subtyping, r=nrc
    
    Safe fns are no longer subtypes of unsafe fns, but you can coerce from one to the other.
    
    This is a [breaking-change] in that impl fns must now be declared `unsafe` if the trait is declared `unsafe`. In some rare cases, the subtyping change may also direct affect you, but no such cases were encountered in practice.
    
    Fixes #23449.
    
    r? @nrc

commit ea8b82e90c450febb1f26a07862a1ec89c22addd
Merge: bfac337 e256b7f
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 21:23:02 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 21:23:02 2015 +0000

    Auto merge of #23376 - eddyb:die-tydesc-die, r=nikomatsakis
    
    Final remnant of reflection is gone. Also, virtual `Trait` destructors are no longer tied to `Box`.
    That means they can be used to drop any instance of the type (used in libarena to replace TyDesc).
    
    This is [breaking-change] for direct users of intrinsics:
    * use `intrinsics::type_name::&lt;T&gt;()` instead of `(*intrinsics::get_tydesc::&lt;T&gt;()).name`
    * the only way to get the destructor is from a trait object's vtable (see libarena changes)
    
    r? @pcwalton f? @dotdash

commit c64d671671aea2e44ee7fc6eb00ee75fc30ed7b9
Merge: 31ba212 277b4f0
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 13:29:48 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 13:29:48 2015 +0000

    Auto merge of #23423 - nikomatsakis:issue-18737-trait-subtyping, r=nrc
    
    This upcast coercion currently never requires vtable changes. It should be generalized.
    
    This is a [breaking-change] -- if you have an impl on an object type like `impl SomeTrait`, then this will no longer be applicable to object types like `SomeTrait+Send`. In the standard library, this primarily affected `Any`, and this PR adds impls for `Any+Send` as to keep the API the same in practice. An alternate workaround is to use UFCS form or standalone fns. For more details, see &lt;https://github.com/rust-lang/rust/issues/18737#issuecomment-78450798&gt;.
    
    r? @nrc

commit c2671b59ccbc899b8defbabf453e88f89900c3a0
Merge: a4b57be cbd37d8
Author:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
AuthorDate: Tue Mar 17 15:19:57 2015 +0530
Commit:     Manish Goregaokar &lt;manishsmail@gmail.com&gt;
CommitDate: Tue Mar 17 15:19:57 2015 +0530

    Rollup merge of #23409 - GBGamer:patch-2, r=alexcrichton
    
     To the correct MAP_NORESERVE. Every other instance is known as MAP_NORESERVE, so this is just a basic typo.
    
    I really doubt this will break anybody's but my own code.
    
    [breaking-change]

commit e46610966f798a083350724461648c6ffdd151f4
Merge: a257288 b65ebc4
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 03:23:50 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 03:23:50 2015 +0000

    Auto merge of #23104 - japaric:inherent, r=nikomatsakis
    
    - Allow inherent implementations on `char`, `str`, `[T]`, `*const T`, `*mut T` and all the numeric primitives.
    - copy `unicode::char::CharExt` methods into `impl char`
    - remove `unicode::char::CharExt`, its re-export `std::char::CharExt` and `CharExt` from the prelude
    - copy `collections::str::StrExt` methods into `impl str`
    - remove `collections::str::StrExt` its re-export `std::str::StrExt`, and `StrExt` from the prelude
    - copy `collections::slice::SliceExt` methods into `impl&lt;T&gt; [T]`
    - remove `collections::slice::SliceExt` its re-export `std::slice::SliceExt`, and `SliceExt` from the prelude
    - copy `core::ptr::PtrExt` methods into `impl&lt;T&gt; *const T`
    - remove `core::ptr::PtrExt` its re-export `std::ptr::PtrExt`, and `PtrExt` from the prelude
    - copy `core::ptr::PtrExt` and `core::ptr::MutPtrExt` methods into `impl&lt;T&gt; *mut T`
    - remove `core::ptr::MutPtrExt` its re-export `std::ptr::MutPtrExt`, and `MutPtrExt` from the prelude
    - copy `core::num::Int` and `core::num::SignedInt` methods into `impl i{8,16,32,64,size}`
    - copy `core::num::Int` and `core::num::UnsignedInt` methods into `impl u{8,16,32,64,size}`
    - remove `core::num::UnsignedInt` and its re-export `std::num::UnsignedInt`
    - move `collections` tests into its own crate: `collectionstest`
    - copy `core::num::Float` methods into `impl f{32,64}`
    
    Because this PR removes several traits, this is a [breaking-change], however functionality remains unchanged and breakage due to unresolved imports should be minimal. If you encounter an error due to an unresolved import, simply remove the import:
    
    ``` diff
      fn main() {
    -     use std::num::UnsignedInt;  //~ error: unresolved import `std::num::UnsignedInt`.
    -
          println!("{}", 8_usize.is_power_of_two());
      }
    ```
    
    ---
    
    cc  #16862
    [preview docs](http://japaric.github.io/inherent/std/index.html)
    [unicode::char](http://japaric.github.io/inherent/unicode/primitive.char.html)
    [collections::str](http://japaric.github.io/inherent/collections/primitive.str.html)
    [std::f32](http://japaric.github.io/inherent/std/primitive.f32.html)

commit a2572885ab62512a2508868a27c22d615382174a
Merge: 92dd995 f798674
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Tue Mar 17 00:50:26 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Tue Mar 17 00:50:26 2015 +0000

    Auto merge of #23352 - alexcrichton:stabilize-net, r=aturon
    
    This commit performs a stabilization pass over the std::net module,
    incorporating the changes from RFC 923. Specifically, the following actions were
    taken:
    
    Stable functionality:
    
    * `net` (the name)
    * `Shutdown`
    * `Shutdown::{Read, Write, Both}`
    * `lookup_host`
    * `LookupHost`
    * `SocketAddr`
    * `SocketAddr::{V4, V6}`
    * `SocketAddr::port`
    * `SocketAddrV4`
    * `SocketAddrV4::{new, ip, port}`
    * `SocketAddrV6`
    * `SocketAddrV4::{new, ip, port, flowinfo, scope_id}`
    * Common trait impls for socket addr structures
    * `ToSocketAddrs`
    * `ToSocketAddrs::Iter`
    * `ToSocketAddrs::to_socket_addrs`
    * `ToSocketAddrs for {SocketAddr*, (Ipv*Addr, u16), str, (str, u16)}`
    * `Ipv4Addr`
    * `Ipv4Addr::{new, octets, to_ipv6_compatible, to_ipv6_mapped}`
    * `Ipv6Addr`
    * `Ipv6Addr::{new, segments, to_ipv4}`
    * `TcpStream`
    * `TcpStream::connect`
    * `TcpStream::{peer_addr, local_addr, shutdown, try_clone}`
    * `{Read,Write} for {TcpStream, &amp;TcpStream}`
    * `TcpListener`
    * `TcpListener::bind`
    * `TcpListener::{local_addr, try_clone, accept, incoming}`
    * `Incoming`
    * `UdpSocket`
    * `UdpSocket::bind`
    * `UdpSocket::{recv_from, send_to, local_addr, try_clone}`
    
    Unstable functionality:
    
    * Extra methods on `Ipv{4,6}Addr` for various methods of inspecting the address
      and determining qualities of it.
    * Extra methods on `TcpStream` to configure various protocol options.
    * Extra methods on `UdpSocket` to configure various protocol options.
    
    Deprecated functionality:
    
    * The `socket_addr` method has been renamed to `local_addr`
    
    This commit is a breaking change due to the restructuring of the `SocketAddr`
    type as well as the renaming of the `socket_addr` method. Migration should be
    fairly straightforward, however, after accounting for the new level of
    abstraction in `SocketAddr` (protocol distinction at the socket address level,
    not the IP address).
    
    [breaking-change]

commit 92dd995e1705a8c398a5266c8483e2519e494f47
Merge: 1760e87 9889aae
Author:     bors &lt;bors@rust-lang.org&gt;
AuthorDate: Mon Mar 16 22:13:52 2015 +0000
Commit:     bors &lt;bors@rust-lang.org&gt;
CommitDate: Mon Mar 16 22:13:52 2015 +0000

    Auto merge of #23331 - eddyb:attr-lookahead, r=nikomatsakis
    
    Most of the changes are cleanup facilitated by straight-forward attribute handling.
    This is a minor [breaking-change] for users of `quote_stmt!` (returns `Option&lt;P&lt;Stmt&gt;&gt;` now) and some of the public methods in `Parser` (a few `Vec&lt;Attribute&gt;` arguments/returns were removed).
    
    r? @nikomatsakis
</pre></body></html>
